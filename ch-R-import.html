<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 R 데이터 수집 | R 프로그래밍 3판 (draft)</title>
  <meta name="description" content="이 책은 경영데이터분석기초의 주교재로 사용되기 위해 개발되었습니다." />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 R 데이터 수집 | R 프로그래밍 3판 (draft)" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="이 책은 경영데이터분석기초의 주교재로 사용되기 위해 개발되었습니다." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 R 데이터 수집 | R 프로그래밍 3판 (draft)" />
  
  <meta name="twitter:description" content="이 책은 경영데이터분석기초의 주교재로 사용되기 위해 개발되었습니다." />
  

<meta name="author" content="Kilhwan Kim" />


<meta name="date" content="2024-11-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ch-R-OOP.html"/>
<link rel="next" href="ch-R-documents.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-176754989-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-176754989-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R 프로그래밍 3판</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#판-서문"><i class="fa fa-check"></i>1판 서문</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#판-서문-1"><i class="fa fa-check"></i>2판 서문</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#판의-주요-개정-2022년-7월-이후부터"><i class="fa fa-check"></i>2판의 주요 개정 (2022년 7월 이후부터)</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#판-서문-2"><i class="fa fa-check"></i>3판 서문</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#일러두기"><i class="fa fa-check"></i>일러두기</a></li>
</ul></li>
<li class="part"><span><b>I R 프로그래밍 기초</b></span></li>
<li class="chapter" data-level="1" data-path="ch-intro.html"><a href="ch-intro.html"><i class="fa fa-check"></i><b>1</b> <strong>R</strong> 설치 및 시작</a>
<ul>
<li class="chapter" data-level="1.1" data-path="ch-intro.html"><a href="ch-intro.html#sec-Rintro"><i class="fa fa-check"></i><b>1.1</b> <strong>R</strong> 소개</a></li>
<li class="chapter" data-level="1.2" data-path="ch-intro.html"><a href="ch-intro.html#sec-installation"><i class="fa fa-check"></i><b>1.2</b> <strong>R</strong> 설치하기</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="ch-intro.html"><a href="ch-intro.html#r을-윈도우즈에-설치할-때-주의-사항"><i class="fa fa-check"></i><b>1.2.1</b> <strong>R</strong>을 윈도우즈에 설치할 때 주의 사항</a></li>
<li class="chapter" data-level="1.2.2" data-path="ch-intro.html"><a href="ch-intro.html#winget"><i class="fa fa-check"></i><b>1.2.2</b> <code>winget</code> 명령어로 설치하기</a></li>
<li class="chapter" data-level="1.2.3" data-path="ch-intro.html"><a href="ch-intro.html#r-배포판-내려받기"><i class="fa fa-check"></i><b>1.2.3</b> <strong>R</strong> 배포판 내려받기</a></li>
<li class="chapter" data-level="1.2.4" data-path="ch-intro.html"><a href="ch-intro.html#r-설치하기"><i class="fa fa-check"></i><b>1.2.4</b> R 설치하기</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="ch-intro.html"><a href="ch-intro.html#sec-RStudio"><i class="fa fa-check"></i><b>1.3</b> RStudio</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="ch-intro.html"><a href="ch-intro.html#winget을-이용한-rstudio-설치"><i class="fa fa-check"></i><b>1.3.1</b> <code>winget</code>을 이용한 RStudio 설치</a></li>
<li class="chapter" data-level="1.3.2" data-path="ch-intro.html"><a href="ch-intro.html#rstudio-설치"><i class="fa fa-check"></i><b>1.3.2</b> RStudio 설치</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="ch-intro.html"><a href="ch-intro.html#sec-R-start"><i class="fa fa-check"></i><b>1.4</b> RStudio로 R 시작하기</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="ch-intro.html"><a href="ch-intro.html#r-콘솔과-프롬프트"><i class="fa fa-check"></i><b>1.4.1</b> R 콘솔과 프롬프트</a></li>
<li class="chapter" data-level="1.4.2" data-path="ch-intro.html"><a href="ch-intro.html#r-콘솔-사용과-관련된-몇-가지-팁"><i class="fa fa-check"></i><b>1.4.2</b> R 콘솔 사용과 관련된 몇 가지 팁</a></li>
<li class="chapter" data-level="1.4.3" data-path="ch-intro.html"><a href="ch-intro.html#r-스크립트-파일-만들기"><i class="fa fa-check"></i><b>1.4.3</b> R 스크립트 파일 만들기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html"><i class="fa fa-check"></i><b>2</b> R 데이터 기초</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#단순한-데이터-형식-data-types"><i class="fa fa-check"></i><b>2.1</b> 단순한 데이터 형식 (data types)</a></li>
<li class="chapter" data-level="2.2" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#단순-연산"><i class="fa fa-check"></i><b>2.2</b> 단순 연산</a></li>
<li class="chapter" data-level="2.3" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#변수와-할당"><i class="fa fa-check"></i><b>2.3</b> 변수와 할당</a></li>
<li class="chapter" data-level="2.4" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#함수를-이용한-연산"><i class="fa fa-check"></i><b>2.4</b> 함수를 이용한 연산</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html"><i class="fa fa-check"></i><b>3</b> R 벡터</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#숫자-벡터"><i class="fa fa-check"></i><b>3.1</b> 숫자 벡터</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#c-함수를-이용한-숫자-벡터-만들기"><i class="fa fa-check"></i><b>3.1.1</b> c() 함수를 이용한 숫자 벡터 만들기</a></li>
<li class="chapter" data-level="3.1.2" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#패턴을-이용한-숫자-벡터-만들기"><i class="fa fa-check"></i><b>3.1.2</b> 패턴을 이용한 숫자 벡터 만들기</a></li>
<li class="chapter" data-level="3.1.3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#숫자-벡터의-연산"><i class="fa fa-check"></i><b>3.1.3</b> 숫자 벡터의 연산</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#논리-벡터"><i class="fa fa-check"></i><b>3.2</b> 논리 벡터</a></li>
<li class="chapter" data-level="3.3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#문자-벡터"><i class="fa fa-check"></i><b>3.3</b> 문자 벡터</a></li>
<li class="chapter" data-level="3.4" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#결측치-missing-values"><i class="fa fa-check"></i><b>3.4</b> 결측치 (Missing Values)</a></li>
<li class="chapter" data-level="3.5" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#인덱스-벡터와-필터링"><i class="fa fa-check"></i><b>3.5</b> 인덱스 벡터와 필터링</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#자연수-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.1</b> 자연수 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.2" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#음의-정수-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.2</b> 음의 정수 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#논리-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.3</b> 논리 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.4" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#이름-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.4</b> 이름 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.5" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#인덱스-벡터를-이용해-벡터-요소에-값-할당하기"><i class="fa fa-check"></i><b>3.5.5</b> 인덱스 벡터를 이용해 벡터 요소에 값 할당하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html"><i class="fa fa-check"></i><b>4</b> R 행렬</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬-만들기"><i class="fa fa-check"></i><b>4.1</b> 행렬 만들기</a></li>
<li class="chapter" data-level="4.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#벡터를-결합하여-행렬-만들기"><i class="fa fa-check"></i><b>4.2</b> 벡터를 결합하여 행렬 만들기</a></li>
<li class="chapter" data-level="4.3" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-필터링"><i class="fa fa-check"></i><b>4.3</b> 행렬의 필터링</a></li>
<li class="chapter" data-level="4.4" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-연산"><i class="fa fa-check"></i><b>4.4</b> 행렬의 연산</a></li>
<li class="chapter" data-level="4.5" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬과-함수"><i class="fa fa-check"></i><b>4.5</b> 행렬과 함수</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬을-인수로-하는-함수들"><i class="fa fa-check"></i><b>4.5.1</b> 행렬을 인수로 하는 함수들</a></li>
<li class="chapter" data-level="4.5.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-행별-또는-열별로-함수를-적용하는-방법"><i class="fa fa-check"></i><b>4.5.2</b> 행렬의 행별 또는 열별로 함수를 적용하는 방법</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#sec-RMatrix-array"><i class="fa fa-check"></i><b>4.6</b> 배열 *</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#배열의-생성"><i class="fa fa-check"></i><b>4.6.1</b> 배열의 생성</a></li>
<li class="chapter" data-level="4.6.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#배열도-결국-벡터"><i class="fa fa-check"></i><b>4.6.2</b> 배열도 결국 벡터</a></li>
<li class="chapter" data-level="4.6.3" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#배열의-연산과-필터링"><i class="fa fa-check"></i><b>4.6.3</b> 배열의 연산과 필터링</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#sec-RMatrix-operation-advanced"><i class="fa fa-check"></i><b>4.7</b> 행렬과 배열의 고급 연산 *</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-곱"><i class="fa fa-check"></i><b>4.7.1</b> 행렬의 곱</a></li>
<li class="chapter" data-level="4.7.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-주대각선-요소와-대각행렬"><i class="fa fa-check"></i><b>4.7.2</b> 행렬의 주대각선 요소와 대각행렬</a></li>
<li class="chapter" data-level="4.7.3" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#연립-일차-방정식과-역행렬"><i class="fa fa-check"></i><b>4.7.3</b> 연립 일차 방정식과 역행렬</a></li>
<li class="chapter" data-level="4.7.4" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#고유치eigenvalues와-고유벡터eigenvectors"><i class="fa fa-check"></i><b>4.7.4</b> 고유치(eigenvalues)와 고유벡터(eigenvectors)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ch-R-List.html"><a href="ch-R-List.html"><i class="fa fa-check"></i><b>5</b> R 리스트</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ch-R-List.html"><a href="ch-R-List.html#객체-객체의-타입-객체의-속성"><i class="fa fa-check"></i><b>5.1</b> 객체, 객체의 타입, 객체의 속성 *</a></li>
<li class="chapter" data-level="5.2" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트의-생성-및-필터링"><i class="fa fa-check"></i><b>5.2</b> 리스트의 생성 및 필터링</a></li>
<li class="chapter" data-level="5.3" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트의-변경-및-연결"><i class="fa fa-check"></i><b>5.3</b> 리스트의 변경 및 연결</a></li>
<li class="chapter" data-level="5.4" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트에-함수-적용하기"><i class="fa fa-check"></i><b>5.4</b> 리스트에 함수 적용하기</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="ch-R-List.html"><a href="ch-R-List.html#lapply-함수"><i class="fa fa-check"></i><b>5.4.1</b> lapply() 함수</a></li>
<li class="chapter" data-level="5.4.2" data-path="ch-R-List.html"><a href="ch-R-List.html#sapply-함수"><i class="fa fa-check"></i><b>5.4.2</b> sapply() 함수</a></li>
<li class="chapter" data-level="5.4.3" data-path="ch-R-List.html"><a href="ch-R-List.html#mapply-함수"><i class="fa fa-check"></i><b>5.4.3</b> mapply() 함수</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트-활용-분야"><i class="fa fa-check"></i><b>5.5</b> 리스트 활용 분야</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html"><i class="fa fa-check"></i><b>6</b> R 데이터 프레임</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#범주형-데이터와-요인-factors"><i class="fa fa-check"></i><b>6.1</b> 범주형 데이터와 요인 (Factors)</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#명목형-변수와-요인"><i class="fa fa-check"></i><b>6.1.1</b> 명목형 변수와 요인</a></li>
<li class="chapter" data-level="6.1.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#순서형-변수와-요인"><i class="fa fa-check"></i><b>6.1.2</b> 순서형 변수와 요인</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임-만들기"><i class="fa fa-check"></i><b>6.2</b> 데이터 프레임 만들기</a></li>
<li class="chapter" data-level="6.3" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임-각-열의-지정"><i class="fa fa-check"></i><b>6.3</b> 데이터 프레임 각 열의 지정</a></li>
<li class="chapter" data-level="6.4" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임의-필터링"><i class="fa fa-check"></i><b>6.4</b> 데이터 프레임의 필터링</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#리스트-형식으로-필터링"><i class="fa fa-check"></i><b>6.4.1</b> 리스트 형식으로 필터링</a></li>
<li class="chapter" data-level="6.4.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#행렬-형식으로-필터링"><i class="fa fa-check"></i><b>6.4.2</b> 행렬 형식으로 필터링</a></li>
<li class="chapter" data-level="6.4.3" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#subset을-이용한-필터링"><i class="fa fa-check"></i><b>6.4.3</b> subset()을 이용한 필터링</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임에-함수-적용하기"><i class="fa fa-check"></i><b>6.5</b> 데이터 프레임에 함수 적용하기</a></li>
<li class="chapter" data-level="6.6" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#sec-read-file"><i class="fa fa-check"></i><b>6.6</b> 파일에서 데이터 읽어오기</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#텍스트-파일에서-데이터-읽어오기"><i class="fa fa-check"></i><b>6.6.1</b> 텍스트 파일에서 데이터 읽어오기</a></li>
<li class="chapter" data-level="6.6.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#csv-파일에서-데이터-읽어오기"><i class="fa fa-check"></i><b>6.6.2</b> CSV 파일에서 데이터 읽어오기</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#sec-write-file"><i class="fa fa-check"></i><b>6.7</b> 데이터 프레임을 파일로 쓰기</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#바이너리-형식으로-데이터-객체-저장-및-복원"><i class="fa fa-check"></i><b>6.7.1</b> 바이너리 형식으로 데이터 객체 저장 및 복원</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임의-열을-변수처럼-이용하는-방법"><i class="fa fa-check"></i><b>6.8</b> 데이터 프레임의 열을 변수처럼 이용하는 방법 *</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html"><i class="fa fa-check"></i><b>7</b> dplyr을 이용한 데이터 변환</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-tidyData"><i class="fa fa-check"></i><b>7.1</b> 정돈 데이터 (tidy data)</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#정돈-데이터-형식의-조건"><i class="fa fa-check"></i><b>7.1.1</b> 정돈 데이터 형식의 조건</a></li>
<li class="chapter" data-level="7.1.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#비정돈-데이터-형식"><i class="fa fa-check"></i><b>7.1.2</b> 비정돈 데이터 형식</a></li>
<li class="chapter" data-level="7.1.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#정돈-데이터를-사용하는-이유"><i class="fa fa-check"></i><b>7.1.3</b> 정돈 데이터를 사용하는 이유</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#tidyverse-패키지"><i class="fa fa-check"></i><b>7.2</b> <code>tidyverse</code> 패키지</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#tidyverse-패키지-설치"><i class="fa fa-check"></i><b>7.2.1</b> <code>tidyverse</code> 패키지 설치</a></li>
<li class="chapter" data-level="7.2.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#tidyverse-패키지-적재"><i class="fa fa-check"></i><b>7.2.2</b> <code>tidyverse</code> 패키지 적재</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-dplyr"><i class="fa fa-check"></i><b>7.3</b> <code>dplyr</code> 패키지와 정돈 데이터의 변환</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#dplyr-패키지"><i class="fa fa-check"></i><b>7.3.1</b> <code>dplyr</code> 패키지</a></li>
<li class="chapter" data-level="7.3.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#정돈-데이터-변환의-종류"><i class="fa fa-check"></i><b>7.3.2</b> 정돈 데이터 변환의 종류</a></li>
<li class="chapter" data-level="7.3.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#dplyr-패키지-vs.-r의-기본-기능"><i class="fa fa-check"></i><b>7.3.3</b> <code>dplyr</code> 패키지 vs. R의 기본 기능</a></li>
<li class="chapter" data-level="7.3.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#mpg-데이터"><i class="fa fa-check"></i><b>7.3.4</b> <code>mpg</code> 데이터</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-filter"><i class="fa fa-check"></i><b>7.4</b> <code>filter()</code>로 행 선택하기</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#선택-조건이-하나인-경우"><i class="fa fa-check"></i><b>7.4.1</b> 선택 조건이 하나인 경우</a></li>
<li class="chapter" data-level="7.4.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#여러-조건을-만족하는-행-추출하기"><i class="fa fa-check"></i><b>7.4.2</b> 여러 조건을 만족하는 행 추출하기</a></li>
<li class="chapter" data-level="7.4.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#논리-연산자로-복합-조건-만들기"><i class="fa fa-check"></i><b>7.4.3</b> 논리 연산자로 복합 조건 만들기</a></li>
<li class="chapter" data-level="7.4.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#in-연산자"><i class="fa fa-check"></i><b>7.4.4</b> <code>%in%</code> 연산자</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-slice"><i class="fa fa-check"></i><b>7.5</b> <code>slice()</code>로 행 선택하기</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#slice_sample로-표본-추출하기"><i class="fa fa-check"></i><b>7.5.1</b> <code>slice_sample()</code>로 표본 추출하기</a></li>
<li class="chapter" data-level="7.5.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#slice_head와-slice_tail"><i class="fa fa-check"></i><b>7.5.2</b> <code>slice_head()</code>와 <code>slice_tail()</code></a></li>
<li class="chapter" data-level="7.5.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#slice_min과-slice_max"><i class="fa fa-check"></i><b>7.5.3</b> <code>slice_min()</code>과 <code>slice_max()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-arrange"><i class="fa fa-check"></i><b>7.6</b> <code>arrange()</code>로 행 정렬하기</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#desc를-이용하여-내림차순으로-정렬하기"><i class="fa fa-check"></i><b>7.6.1</b> <code>desc()</code>를 이용하여 내림차순으로 정렬하기</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-select"><i class="fa fa-check"></i><b>7.7</b> <code>select()</code>를 이용하여 변수 이름으로 열 선택하기</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름을-나열하여-선택하기"><i class="fa fa-check"></i><b>7.7.1</b> 변수 이름을 나열하여 선택하기</a></li>
<li class="chapter" data-level="7.7.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름으로-변수-범위를-선택하기"><i class="fa fa-check"></i><b>7.7.2</b> 변수 이름으로 변수 범위를 선택하기</a></li>
<li class="chapter" data-level="7.7.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-위치로-매칭하여-선택하기"><i class="fa fa-check"></i><b>7.7.3</b> 변수 위치로 매칭하여 선택하기</a></li>
<li class="chapter" data-level="7.7.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-select-match"><i class="fa fa-check"></i><b>7.7.4</b> 변수 이름을 매칭하여 선택하기</a></li>
<li class="chapter" data-level="7.7.5" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수의-형식이나-조건으로-매칭하여-선택하기"><i class="fa fa-check"></i><b>7.7.5</b> 변수의 형식이나 조건으로 매칭하여 선택하기*</a></li>
<li class="chapter" data-level="7.7.6" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름-바꾸기"><i class="fa fa-check"></i><b>7.7.6</b> 변수 이름 바꾸기</a></li>
<li class="chapter" data-level="7.7.7" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-순서-바꾸기"><i class="fa fa-check"></i><b>7.7.7</b> 변수 순서 바꾸기</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-mutate"><i class="fa fa-check"></i><b>7.8</b> <code>mutate()</code>로 새로운 변수 만들기</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#transmute로-새로운-변수만-남기기"><i class="fa fa-check"></i><b>7.8.1</b> <code>transmute()</code>로 새로운 변수만 남기기</a></li>
<li class="chapter" data-level="7.8.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#새로운-변수를-만들-때-사용할-수-있는-함수들"><i class="fa fa-check"></i><b>7.8.2</b> 새로운 변수를 만들 때 사용할 수 있는 함수들</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-summarize"><i class="fa fa-check"></i><b>7.9</b> <code>summarize()</code>로 변수 요약하기</a>
<ul>
<li class="chapter" data-level="7.9.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#across로-여려-변수를-요약하기"><i class="fa fa-check"></i><b>7.9.1</b> <code>across()</code>로 여려 변수를 요약하기*</a></li>
</ul></li>
<li class="chapter" data-level="7.10" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-groupBy"><i class="fa fa-check"></i><b>7.10</b> <code>group_by()</code>로 그룹별로 요약하기</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#group_by로-그룹별로-새-변수-추가하기"><i class="fa fa-check"></i><b>7.10.1</b> <code>group_by()</code>로 그룹별로 새 변수 추가하기</a></li>
<li class="chapter" data-level="7.10.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#count로-개수-세기"><i class="fa fa-check"></i><b>7.10.2</b> <code>count()</code>로 개수 세기</a></li>
</ul></li>
<li class="chapter" data-level="7.11" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec-pipeOperator"><i class="fa fa-check"></i><b>7.11</b> <code>%&gt;%</code> 파이프 연산자</a>
<ul>
<li class="chapter" data-level="7.11.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#여러-단계를-거쳐-데이터를-변환할-때"><i class="fa fa-check"></i><b>7.11.1</b> 여러 단계를 거쳐 데이터를 변환할 때</a></li>
<li class="chapter" data-level="7.11.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#파이프-연산자"><i class="fa fa-check"></i><b>7.11.2</b> 파이프 연산자</a></li>
<li class="chapter" data-level="7.11.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#ungroup"><i class="fa fa-check"></i><b>7.11.3</b> <code>ungroup()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ch-visualization.html"><a href="ch-visualization.html"><i class="fa fa-check"></i><b>8</b> ggplot2를 이용한 데이터 시각화</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ch-visualization.html"><a href="ch-visualization.html#sec-getStarted-ggplot2"><i class="fa fa-check"></i><b>8.1</b> ggplot2 시작하기</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec-tryGgplot"><i class="fa fa-check"></i><b>8.1.1</b> ggplot2 그래프 그려보기</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="ch-visualization.html"><a href="ch-visualization.html#sec-aesMapping"><i class="fa fa-check"></i><b>8.2</b> 도형의 속성에 데이터 열을 대응시키기 (aesthetic mapping)</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="ch-visualization.html"><a href="ch-visualization.html#범주형-변수를-색상color-속성에-매핑하기"><i class="fa fa-check"></i><b>8.2.1</b> 범주형 변수를 색상(<code>color</code>) 속성에 매핑하기</a></li>
<li class="chapter" data-level="8.2.2" data-path="ch-visualization.html"><a href="ch-visualization.html#범주형-변수를-모양shape-속성에-매핑하기"><i class="fa fa-check"></i><b>8.2.2</b> 범주형 변수를 모양(<code>shape</code>) 속성에 매핑하기</a></li>
<li class="chapter" data-level="8.2.3" data-path="ch-visualization.html"><a href="ch-visualization.html#연속형-변수를-크기size-투명도alpha-색상color-속성에-매핑하기"><i class="fa fa-check"></i><b>8.2.3</b> 연속형 변수를 크기(<code>size</code>), 투명도(<code>alpha</code>), 색상(<code>color</code>) 속성에 매핑하기</a></li>
<li class="chapter" data-level="8.2.4" data-path="ch-visualization.html"><a href="ch-visualization.html#도형의-여러-속성에-데이터-열을-매핑시키기"><i class="fa fa-check"></i><b>8.2.4</b> 도형의 여러 속성에 데이터 열을 매핑시키기</a></li>
<li class="chapter" data-level="8.2.5" data-path="ch-visualization.html"><a href="ch-visualization.html#도형-속성에-데이터-열을-매핑하기---예제"><i class="fa fa-check"></i><b>8.2.5</b> 도형 속성에 데이터 열을 매핑하기 - 예제</a></li>
<li class="chapter" data-level="8.2.6" data-path="ch-visualization.html"><a href="ch-visualization.html#도형의-속성에-대응시키기-vs.-도형의-속성-인수를-설정하기"><i class="fa fa-check"></i><b>8.2.6</b> 도형의 속성에 대응시키기 vs. 도형의 속성 인수를 설정하기</a></li>
<li class="chapter" data-level="8.2.7" data-path="ch-visualization.html"><a href="ch-visualization.html#group-속성"><i class="fa fa-check"></i><b>8.2.7</b> <code>group</code> 속성</a></li>
<li class="chapter" data-level="8.2.8" data-path="ch-visualization.html"><a href="ch-visualization.html#그룹으로-나누어-선-그래프-그리기"><i class="fa fa-check"></i><b>8.2.8</b> 그룹으로 나누어 선 그래프 그리기</a></li>
<li class="chapter" data-level="8.2.9" data-path="ch-visualization.html"><a href="ch-visualization.html#이산형-변수는-group-속성으로-자동-매핑된다."><i class="fa fa-check"></i><b>8.2.9</b> 이산형 변수는 <code>group</code> 속성으로 자동 매핑된다.</a></li>
<li class="chapter" data-level="8.2.10" data-path="ch-visualization.html"><a href="ch-visualization.html#geom_smooth-함수에서-group-속성"><i class="fa fa-check"></i><b>8.2.10</b> <code>geom_smooth()</code> 함수에서 <code>group</code> 속성</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="ch-visualization.html"><a href="ch-visualization.html#sec-facets"><i class="fa fa-check"></i><b>8.3</b> 측면(facets)으로 나누어 그리기</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="ch-visualization.html"><a href="ch-visualization.html#facet_wrap로-일차원-측면-그래프-그리기"><i class="fa fa-check"></i><b>8.3.1</b> <code>facet_wrap()</code>로 일차원 측면 그래프 그리기</a></li>
<li class="chapter" data-level="8.3.2" data-path="ch-visualization.html"><a href="ch-visualization.html#facet_grid로-이차원-측면-그래프-그리기"><i class="fa fa-check"></i><b>8.3.2</b> <code>facet_grid()</code>로 이차원 측면 그래프 그리기</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="ch-visualization.html"><a href="ch-visualization.html#sec-layerAndGeom"><i class="fa fa-check"></i><b>8.4</b> 그래프 계층(layers)과 도형(geoms)</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="ch-visualization.html"><a href="ch-visualization.html#geom-함수의-순서와-그래프-계층"><i class="fa fa-check"></i><b>8.4.1</b> geom 함수의 순서와 그래프 계층</a></li>
<li class="chapter" data-level="8.4.2" data-path="ch-visualization.html"><a href="ch-visualization.html#ggplot-함수는-좌표축을-자동-조정한다."><i class="fa fa-check"></i><b>8.4.2</b> <code>ggplot()</code> 함수는 좌표축을 자동 조정한다.</a></li>
<li class="chapter" data-level="8.4.3" data-path="ch-visualization.html"><a href="ch-visualization.html#여러-데이터를-사용하여-그래프-계층-만들기"><i class="fa fa-check"></i><b>8.4.3</b> 여러 데이터를 사용하여 그래프 계층 만들기</a></li>
<li class="chapter" data-level="8.4.4" data-path="ch-visualization.html"><a href="ch-visualization.html#다른-데이터-범위로-그래프-계층-만들기"><i class="fa fa-check"></i><b>8.4.4</b> 다른 데이터 범위로 그래프 계층 만들기</a></li>
<li class="chapter" data-level="8.4.5" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec-commonDataMapping"><i class="fa fa-check"></i><b>8.4.5</b> 공통 <code>data</code>와 <code>mapping</code>의 설정</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="ch-visualization.html"><a href="ch-visualization.html#sec-commonProblems"><i class="fa fa-check"></i><b>8.5</b> ggplot 명령문을 입력할 때 자주 발생하는 문제들</a></li>
<li class="chapter" data-level="8.6" data-path="ch-visualization.html"><a href="ch-visualization.html#sec-ggplotStat"><i class="fa fa-check"></i><b>8.6</b> 통계 변환</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec-statCategorical"><i class="fa fa-check"></i><b>8.6.1</b> 범주형 변수의 통계 요약</a></li>
<li class="chapter" data-level="8.6.2" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec-statNumerical"><i class="fa fa-check"></i><b>8.6.2</b> 수치형 변수의 통계 요약</a></li>
<li class="chapter" data-level="8.6.3" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec-statNumericalPerCategory"><i class="fa fa-check"></i><b>8.6.3</b> 수치형 변수의 범주별 통계요약</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="ch-visualization.html"><a href="ch-visualization.html#sec-position"><i class="fa fa-check"></i><b>8.7</b> 위치 조정</a></li>
<li class="chapter" data-level="8.8" data-path="ch-visualization.html"><a href="ch-visualization.html#sec-typeofgraph"><i class="fa fa-check"></i><b>8.8</b> ggplot2 그래프의 종류</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="ch-visualization.html"><a href="ch-visualization.html#basic-graph"><i class="fa fa-check"></i><b>8.8.1</b> 직선을 그리는 그래픽 함수</a></li>
<li class="chapter" data-level="8.8.2" data-path="ch-visualization.html"><a href="ch-visualization.html#onecategory"><i class="fa fa-check"></i><b>8.8.2</b> 한 범주형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.3" data-path="ch-visualization.html"><a href="ch-visualization.html#onenumeric"><i class="fa fa-check"></i><b>8.8.3</b> 한 수치형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.4" data-path="ch-visualization.html"><a href="ch-visualization.html#twocategories"><i class="fa fa-check"></i><b>8.8.4</b> 두 범주형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.5" data-path="ch-visualization.html"><a href="ch-visualization.html#category-numeric"><i class="fa fa-check"></i><b>8.8.5</b> 범주형 변수와 수치형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.6" data-path="ch-visualization.html"><a href="ch-visualization.html#twonumeric"><i class="fa fa-check"></i><b>8.8.6</b> 두 수치형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.7" data-path="ch-visualization.html"><a href="ch-visualization.html#morethanthree"><i class="fa fa-check"></i><b>8.8.7</b> 세 변수 이상의 그래프</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="ch-visualization.html"><a href="ch-visualization.html#modification"><i class="fa fa-check"></i><b>8.9</b> 그래프의 외양 바꾸기</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="ch-visualization.html"><a href="ch-visualization.html#axes"><i class="fa fa-check"></i><b>8.9.1</b> 좌표축의 조정</a></li>
<li class="chapter" data-level="8.9.2" data-path="ch-visualization.html"><a href="ch-visualization.html#좌표계의-변경"><i class="fa fa-check"></i><b>8.9.2</b> 좌표계의 변경</a></li>
<li class="chapter" data-level="8.9.3" data-path="ch-visualization.html"><a href="ch-visualization.html#색상-척도color-scales의-변경"><i class="fa fa-check"></i><b>8.9.3</b> 색상 척도(color scales)의 변경</a></li>
<li class="chapter" data-level="8.9.4" data-path="ch-visualization.html"><a href="ch-visualization.html#labelsmodification"><i class="fa fa-check"></i><b>8.9.4</b> 레이블 조정</a></li>
<li class="chapter" data-level="8.9.5" data-path="ch-visualization.html"><a href="ch-visualization.html#themes"><i class="fa fa-check"></i><b>8.9.5</b> 테마 변경</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="ch-visualization.html"><a href="ch-visualization.html#misc"><i class="fa fa-check"></i><b>8.10</b> 기타 유용한 팁들</a>
<ul>
<li class="chapter" data-level="8.10.1" data-path="ch-visualization.html"><a href="ch-visualization.html#combinegraph"><i class="fa fa-check"></i><b>8.10.1</b> 여러 그래프를 한 도표에 넣기</a></li>
<li class="chapter" data-level="8.10.2" data-path="ch-visualization.html"><a href="ch-visualization.html#savegraph"><i class="fa fa-check"></i><b>8.10.2</b> 그래프 저장하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html"><i class="fa fa-check"></i><b>9</b> R 고급 데이터 변환</a>
<ul>
<li class="chapter" data-level="9.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#sec-bind-data"><i class="fa fa-check"></i><b>9.1</b> 데이터의 단순 결합</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#데이터를-행으로-결합하기"><i class="fa fa-check"></i><b>9.1.1</b> 데이터를 행으로 결합하기</a></li>
<li class="chapter" data-level="9.1.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#데이터를-열로-결합하기"><i class="fa fa-check"></i><b>9.1.2</b> 데이터를 열로 결합하기</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#관계형-데이터베이스처럼-데이터-결합하기"><i class="fa fa-check"></i><b>9.2</b> 관계형 데이터베이스처럼 데이터 결합하기</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#inner-join과-outer-join"><i class="fa fa-check"></i><b>9.2.1</b> Inner join과 outer join</a></li>
<li class="chapter" data-level="9.2.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#filtering-join"><i class="fa fa-check"></i><b>9.2.2</b> Filtering join</a></li>
<li class="chapter" data-level="9.2.3" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#join을-수행하는-다른-방법들"><i class="fa fa-check"></i><b>9.2.3</b> Join을 수행하는 다른 방법들</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#sec-tidyr"><i class="fa fa-check"></i><b>9.3</b> <code>tidyr</code> 패키지를 이용하여 정돈 데이터 형식으로 바꾸기</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#pivot_longer-여러-열에-걸친-한-변수의-데이터를-하나의-열로-길게-모으기"><i class="fa fa-check"></i><b>9.3.1</b> <code>pivot_longer</code>: 여러 열에 걸친 한 변수의 데이터를 하나의 열로 길게 모으기</a></li>
<li class="chapter" data-level="9.3.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#subsec-pivot-wider"><i class="fa fa-check"></i><b>9.3.2</b> <code>pivot_wider</code>: 한 열에 기술된 여러 변수의 데이터를 여러 열로 넓게 펼치기</a></li>
<li class="chapter" data-level="9.3.3" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#seperate-한-셀을-여러-셀로-분리하기"><i class="fa fa-check"></i><b>9.3.3</b> <code>seperate</code>: 한 셀을 여러 셀로 분리하기</a></li>
<li class="chapter" data-level="9.3.4" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#unite-여러-셀의-데이터를-하나의-셀로-병합하기"><i class="fa fa-check"></i><b>9.3.4</b> <code>unite</code>: 여러 셀의 데이터를 하나의 셀로 병합하기</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#데이터-열의-형식-바꾸기"><i class="fa fa-check"></i><b>9.4</b> 데이터 열의 형식 바꾸기</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html"><i class="fa fa-check"></i><b>10</b> R 프로그래밍 구조</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-조건문"><i class="fa fa-check"></i><b>10.1</b> R 조건문</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#if-조건문"><i class="fa fa-check"></i><b>10.1.1</b> if 조건문</a></li>
<li class="chapter" data-level="10.1.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#switch-함수"><i class="fa fa-check"></i><b>10.1.2</b> switch 함수</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-반복문"><i class="fa fa-check"></i><b>10.2</b> R 반복문</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#for-반복문"><i class="fa fa-check"></i><b>10.2.1</b> for 반복문</a></li>
<li class="chapter" data-level="10.2.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#while-반복문"><i class="fa fa-check"></i><b>10.2.2</b> while 반복문</a></li>
<li class="chapter" data-level="10.2.3" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#repeat-반복문"><i class="fa fa-check"></i><b>10.2.3</b> repeat 반복문</a></li>
<li class="chapter" data-level="10.2.4" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#반복문의-제어-명령"><i class="fa fa-check"></i><b>10.2.4</b> 반복문의 제어 명령</a></li>
<li class="chapter" data-level="10.2.5" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r에서-반복문-사용의-주의점"><i class="fa fa-check"></i><b>10.2.5</b> R에서 반복문 사용의 주의점</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-함수"><i class="fa fa-check"></i><b>10.3</b> R 함수</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#함수의-생성과-호출"><i class="fa fa-check"></i><b>10.3.1</b> 함수의 생성과 호출</a></li>
<li class="chapter" data-level="10.3.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#함수-객체를-인수로-사용하기"><i class="fa fa-check"></i><b>10.3.2</b> 함수 객체를 인수로 사용하기</a></li>
<li class="chapter" data-level="10.3.3" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-연산자"><i class="fa fa-check"></i><b>10.3.3</b> R 연산자</a></li>
<li class="chapter" data-level="10.3.4" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#변수-범위"><i class="fa fa-check"></i><b>10.3.4</b> 변수 범위</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html"><i class="fa fa-check"></i><b>11</b> R 객체 지향 프로그래밍</a>
<ul>
<li class="chapter" data-level="11.1" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#객체-지향-프로그래밍"><i class="fa fa-check"></i><b>11.1</b> 객체 지향 프로그래밍</a></li>
<li class="chapter" data-level="11.2" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s3-클래스"><i class="fa fa-check"></i><b>11.2</b> S3 클래스</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s3-클래스-객체-만들기"><i class="fa fa-check"></i><b>11.2.1</b> S3 클래스 객체 만들기</a></li>
<li class="chapter" data-level="11.2.2" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#포괄-함수generic-functions"><i class="fa fa-check"></i><b>11.2.2</b> 포괄 함수(generic functions)</a></li>
<li class="chapter" data-level="11.2.3" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s3에서-상속성의-구현"><i class="fa fa-check"></i><b>11.2.3</b> S3에서 상속성의 구현</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s4-클래스"><i class="fa fa-check"></i><b>11.3</b> S4 클래스</a></li>
</ul></li>
<li class="part"><span><b>II R 프로그래밍 응용</b></span></li>
<li class="chapter" data-level="12" data-path="ch-R-import.html"><a href="ch-R-import.html"><i class="fa fa-check"></i><b>12</b> R 데이터 수집</a>
<ul>
<li class="chapter" data-level="12.1" data-path="ch-R-import.html"><a href="ch-R-import.html#sec-read-csv"><i class="fa fa-check"></i><b>12.1</b> 텍스트 파일에서 데이터 읽기</a></li>
<li class="chapter" data-level="12.2" data-path="ch-R-import.html"><a href="ch-R-import.html#sec-read-spreadsheets"><i class="fa fa-check"></i><b>12.2</b> 스프레드시트 파일에서 데이터 읽기</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="ch-R-import.html"><a href="ch-R-import.html#sec-read-excel"><i class="fa fa-check"></i><b>12.2.1</b> Excel 파일에서 데이터 읽기</a></li>
<li class="chapter" data-level="12.2.2" data-path="ch-R-import.html"><a href="ch-R-import.html#sec-read-google-sheets"><i class="fa fa-check"></i><b>12.2.2</b> Google Sheets에서 데이터 읽기</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="ch-R-import.html"><a href="ch-R-import.html#sec-import-databse"><i class="fa fa-check"></i><b>12.3</b> 데이터베이스에서 데이터 가져오기</a></li>
<li class="chapter" data-level="12.4" data-path="ch-R-import.html"><a href="ch-R-import.html#sec-web-scrapping"><i class="fa fa-check"></i><b>12.4</b> 웹 스크래핑 (web scrapping): 웹 사이트에서 데이터 가져오기</a></li>
<li class="chapter" data-level="12.5" data-path="ch-R-import.html"><a href="ch-R-import.html#sec-public-api"><i class="fa fa-check"></i><b>12.5</b> 공개 API에서 데이터 가져오기</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ch-R-documents.html"><a href="ch-R-documents.html"><i class="fa fa-check"></i><b>13</b> <strong>R</strong> 동적 문서</a>
<ul>
<li class="chapter" data-level="13.1" data-path="ch-R-documents.html"><a href="ch-R-documents.html#quarto-설치"><i class="fa fa-check"></i><b>13.1</b> Quarto 설치</a></li>
<li class="chapter" data-level="13.2" data-path="ch-R-documents.html"><a href="ch-R-documents.html#sec-quarto-creation"><i class="fa fa-check"></i><b>13.2</b> Quarto 문서 만들기</a></li>
<li class="chapter" data-level="13.3" data-path="ch-R-documents.html"><a href="ch-R-documents.html#quarto의-출력-형식"><i class="fa fa-check"></i><b>13.3</b> Quarto의 출력 형식</a>
<ul>
<li class="chapter" data-level="" data-path="ch-R-documents.html"><a href="ch-R-documents.html#출력-형식-바꾸기"><i class="fa fa-check"></i>출력 형식 바꾸기</a></li>
<li class="chapter" data-level="13.3.1" data-path="ch-R-documents.html"><a href="ch-R-documents.html#여러-출력-형식으로-문서-변환하기"><i class="fa fa-check"></i><b>13.3.1</b> 여러 출력 형식으로 문서 변환하기</a></li>
<li class="chapter" data-level="13.3.2" data-path="ch-R-documents.html"><a href="ch-R-documents.html#출력-옵션-조정하기"><i class="fa fa-check"></i><b>13.3.2</b> 출력 옵션 조정하기</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="ch-R-documents.html"><a href="ch-R-documents.html#마크다운-기초"><i class="fa fa-check"></i><b>13.4</b> 마크다운 기초</a>
<ul>
<li class="chapter" data-level="" data-path="ch-R-documents.html"><a href="ch-R-documents.html#텍스트-서식"><i class="fa fa-check"></i>텍스트 서식</a></li>
<li class="chapter" data-level="" data-path="ch-R-documents.html"><a href="ch-R-documents.html#장과-절의-제목"><i class="fa fa-check"></i>장과 절의 제목</a></li>
<li class="chapter" data-level="" data-path="ch-R-documents.html"><a href="ch-R-documents.html#목록"><i class="fa fa-check"></i>목록</a></li>
<li class="chapter" data-level="13.4.1" data-path="ch-R-documents.html"><a href="ch-R-documents.html#url-링크"><i class="fa fa-check"></i><b>13.4.1</b> URL 링크</a></li>
<li class="chapter" data-level="" data-path="ch-R-documents.html"><a href="ch-R-documents.html#그림"><i class="fa fa-check"></i>그림</a></li>
<li class="chapter" data-level="" data-path="ch-R-documents.html"><a href="ch-R-documents.html#표"><i class="fa fa-check"></i>표</a></li>
<li class="chapter" data-level="" data-path="ch-R-documents.html"><a href="ch-R-documents.html#블록"><i class="fa fa-check"></i>블록</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="ch-R-documents.html"><a href="ch-R-documents.html#코드-모듬"><i class="fa fa-check"></i><b>13.5</b> 코드 모듬</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="ch-R-documents.html"><a href="ch-R-documents.html#코드-모듬-옵션"><i class="fa fa-check"></i><b>13.5.1</b> 코드 모듬 옵션</a></li>
<li class="chapter" data-level="13.5.2" data-path="ch-R-documents.html"><a href="ch-R-documents.html#실행-옵션-excution-options"><i class="fa fa-check"></i><b>13.5.2</b> 실행 옵션 (Excution Options)</a></li>
<li class="chapter" data-level="13.5.3" data-path="ch-R-documents.html"><a href="ch-R-documents.html#데이터프레임과-행렬을-표로-출력하기"><i class="fa fa-check"></i><b>13.5.3</b> 데이터프레임과 행렬을 표로 출력하기</a></li>
<li class="chapter" data-level="13.5.4" data-path="ch-R-documents.html"><a href="ch-R-documents.html#인라인-코드"><i class="fa fa-check"></i><b>13.5.4</b> 인라인 코드</a></li>
</ul></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="ch-RandPython.html"><a href="ch-RandPython.html"><i class="fa fa-check"></i><b>A</b> <strong>R</strong>과 <strong>Python</strong> 연동하기</a>
<ul>
<li class="chapter" data-level="A.1" data-path="ch-RandPython.html"><a href="ch-RandPython.html#reticulate-설치-및-사용할-파이썬-버전-설정"><i class="fa fa-check"></i><b>A.1</b> <code>reticulate</code> 설치 및 사용할 파이썬 버전 설정</a></li>
<li class="chapter" data-level="A.2" data-path="ch-RandPython.html"><a href="ch-RandPython.html#r과-파이썬-연동하는-방법"><i class="fa fa-check"></i><b>A.2</b> R과 파이썬 연동하는 방법</a></li>
<li class="chapter" data-level="A.3" data-path="ch-RandPython.html"><a href="ch-RandPython.html#파이썬-모듈-연동하기"><i class="fa fa-check"></i><b>A.3</b> 파이썬 모듈 연동하기</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="ch-RandPython.html"><a href="ch-RandPython.html#r과-python의-형식-변환"><i class="fa fa-check"></i><b>A.3.1</b> <strong>R</strong>과 <strong>Python</strong>의 형식 변환</a></li>
<li class="chapter" data-level="A.3.2" data-path="ch-RandPython.html"><a href="ch-RandPython.html#형변환-직접-하기"><i class="fa fa-check"></i><b>A.3.2</b> 형변환 직접 하기</a></li>
<li class="chapter" data-level="A.3.3" data-path="ch-RandPython.html"><a href="ch-RandPython.html#파이썬-모듈의-도움말-확인하기"><i class="fa fa-check"></i><b>A.3.3</b> 파이썬 모듈의 도움말 확인하기</a></li>
<li class="chapter" data-level="A.3.4" data-path="ch-RandPython.html"><a href="ch-RandPython.html#pickle-사용하기"><i class="fa fa-check"></i><b>A.3.4</b> <code>pickle</code> 사용하기</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="ch-RandPython.html"><a href="ch-RandPython.html#r-마크다운-문서에서-파이썬-명령-실행하기"><i class="fa fa-check"></i><b>A.4</b> R 마크다운 문서에서 파이썬 명령 실행하기</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="ch-RTips.html"><a href="ch-RTips.html"><i class="fa fa-check"></i><b>B</b> <strong>R</strong> 관련 여러 주제들</a>
<ul>
<li class="chapter" data-level="B.1" data-path="ch-RTips.html"><a href="ch-RTips.html#r의-파일-및-폴더-관련-명령어등"><i class="fa fa-check"></i><b>B.1</b> <strong>R</strong>의 파일 및 폴더 관련 명령어등</a>
<ul>
<li class="chapter" data-level="B.1.1" data-path="ch-RTips.html"><a href="ch-RTips.html#작업-디렉토리"><i class="fa fa-check"></i><b>B.1.1</b> 작업 디렉토리</a></li>
<li class="chapter" data-level="B.1.2" data-path="ch-RTips.html"><a href="ch-RTips.html#폴더-내의-파일-목록-확인하기"><i class="fa fa-check"></i><b>B.1.2</b> 폴더 내의 파일 목록 확인하기</a></li>
<li class="chapter" data-level="B.1.3" data-path="ch-RTips.html"><a href="ch-RTips.html#파일과-폴더-존재-확인"><i class="fa fa-check"></i><b>B.1.3</b> 파일과 폴더 존재 확인</a></li>
<li class="chapter" data-level="B.1.4" data-path="ch-RTips.html"><a href="ch-RTips.html#폴더의-생성과-삭제"><i class="fa fa-check"></i><b>B.1.4</b> 폴더의 생성과 삭제</a></li>
<li class="chapter" data-level="B.1.5" data-path="ch-RTips.html"><a href="ch-RTips.html#파일의-생성-복사-이동-삭제"><i class="fa fa-check"></i><b>B.1.5</b> 파일의 생성, 복사, 이동, 삭제</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="ch-RTips.html"><a href="ch-RTips.html#r에서-계산-정확도를-향상시키기"><i class="fa fa-check"></i><b>B.2</b> <strong>R</strong>에서 계산 정확도를 향상시키기</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 프로그래밍 3판 (draft)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ch-R-import" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Chapter 12</span> R 데이터 수집<a href="ch-R-import.html#ch-R-import" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>이 장에서는 다양한 원천에서 데이터를 <strong>R</strong>로 가져오는 방법을 다룬다.</p>
<ul>
<li>텍스트 파일에서 데이터 가져오기</li>
<li>스프레드시트 파일에서 데이터 가져오기</li>
<li>데이터베이스에서 데이터 가져오기</li>
<li>웹 스크래핑 (web scrapping): 웹 사이트에서 데이터 가져오기</li>
<li>공개 API에서 데이터 가져오기</li>
</ul>
<div class="sourceCode" id="cb2286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2286-1"><a href="ch-R-import.html#cb2286-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<div id="sec-read-csv" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> 텍스트 파일에서 데이터 읽기<a href="ch-R-import.html#sec-read-csv" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>R</strong>의 기본 기능을 사용하여 텍스트 파일을 읽고 쓰는 방법에 대해서는 <a href="ch-R-Data-Frame.html#sec-read-file">6.6</a>과 <a href="ch-R-Data-Frame.html#sec-write-file">6.7</a> 절에서 설명을 하였다.
이 절에서는 <code>tidyverse</code> 패키지에 포함된 <code>readr</code> 패키지의 <code>read_csv()</code> 함수를 사용하여 CSV 형식의 파일을 읽어오는 방법을 배운다.
<strong>R</strong>의 기본 기능에 포함된 <code>read.csv()</code> 함수와의 차이는 다음과 같다.</p>
<ul>
<li>읽어들인 파일을 <code>data.frame</code> 형식이 아니라 <code>tibble</code> 형식의 데이터로 반환한다.</li>
<li>데이터의 열의 데이터형과 변환을 더 상세히 조절할 수 있다.</li>
</ul>
<div id="csv-파일-1" class="section level4 unnumbered hasAnchor">
<h4>CSV 파일<a href="ch-R-import.html#csv-파일-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>CSV 파일은 데이터의 각 필드가 쉼표로 분리되어 있는 파일이다. 대부분의 통계 패키지뿐 아니라 다수의 SW에서 지원하는 파일 형식이다. Excel 등의 스프레드시트 파일도 CSV 파일로 저장할 수 있다. Excel의 버전에 따라 저장방식이 조금 차이가 있을 수 있으나, 대부분 ’다른 이름으로 저장’에서 파일 형식을 CSV 형식으로 지정해 주면 된다.</p>
<p>CSV 파일을 읽어들이는 예제는 다음 파일을 사용하니 예제를 따라하고자 하는 독자는 내려받도록 하자.</p>
<a href="data:application/zip;base64,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" download="students_all.zip">텍스트 파일 내려받기</a>
</div>
<div id="작업-디렉토리-설정-1" class="section level4 unnumbered hasAnchor">
<h4>작업 디렉토리 설정<a href="ch-R-import.html#작업-디렉토리-설정-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>파일을 불러오기 전에 주의할 점은 파일의 이름만으로 파일을 읽어오고 싶으면 현재의 작업 디렉토리(폴더)에 파일이 있어야 한다는 것이다. 그렇지 않은 경우에는 파일의 절대 경로를 모두 써 주어야만 읽어올 수 있다.</p>
<p>R 윈도우 버전에서 작업 디렉터리의 변경은 [파일]-[작업디렉토리변경] 메뉴를 이용하면 된다. RStudio에서는 [Session]-[Set Working Directory]-[Choose Directory] 메뉴를 이용하면 된다. 현재의 작업 디렉터리가 어디인지를 알기 위해서는 getwd() 명령을 이용하면 된다. 현재 작업 디렉터리의 파일을 보고 싶으면 list.files() 명령을 이용한다.</p>
<p>R 명령으로 작업 디렉터리를 변경하려면 setwd()를 이용한다. 다음은 getwd()로 현재 작업 디렉토리를 얻은 후 setwd()로 data라는 하위 디렉토리(폴더)로 작업 디렉토리를 변경하고, 그 안에 있는 파일이름에 <code>csv</code> 확장자가 있는 파일 목록을 확인하는 예이다.</p>
<div class="sourceCode" id="cb2287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2287-1"><a href="ch-R-import.html#cb2287-1" tabindex="-1"></a>WD <span class="ot">&lt;-</span> <span class="fu">getwd</span>()</span>
<span id="cb2287-2"><a href="ch-R-import.html#cb2287-2" tabindex="-1"></a><span class="fu">setwd</span>(<span class="fu">file.path</span>(WD, <span class="st">&quot;data/import&quot;</span>))</span>
<span id="cb2287-3"><a href="ch-R-import.html#cb2287-3" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">&quot;csv&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;students_all.csv&quot;            &quot;students-cp949.csv&quot;         
[3] &quot;students-with-comments.csv&quot;  &quot;students-with-comments2.csv&quot;
[5] &quot;students-with-problems.csv&quot;  &quot;students.csv&quot;               
[7] &quot;students2.csv&quot;               &quot;suicide_rates.csv&quot;          </code></pre>
</div>
<div id="read_csv" class="section level4 unnumbered hasAnchor">
<h4>read_csv()<a href="ch-R-import.html#read_csv" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>다음은 <code>suicide_rates.csv</code>이라는 파일에 저장된 데이터를 읽어서 <code>sr</code>이라는 변수에 할당하는 예이다.</p>
<div class="sourceCode" id="cb2289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2289-1"><a href="ch-R-import.html#cb2289-1" tabindex="-1"></a>sr <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;suicide_rates.csv&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 105 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (1): Country
dbl (3): Year, Males, Females

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<p><code>read_csv()</code> 함수는 파일을 읽은 후에 파일의 데이터에 대한 다음의 정보를 출력한다.</p>
<ul>
<li>데이터의 행과 열 수</li>
<li>열 구분자로 사용한 문자. 이 예에서처럼 <code>read_csv()</code>는 <code>,</code> 또는 <strong>Tab</strong> 문자를 기준으로 열을 분리한다. 이 외의 열 구분자를 사용하려면 <code>delim</code> 인수로 한 문자로 된 열 구분자를 따로 지정할 수 있다.</li>
<li>함수가 추정한 열 자료형과 열 이름: <code>read_csv()</code>는 사용자가 열의 자료형과 이름을 제공하지 않으면, 데이터 형식과 첫 행을 사용하여 이를 추정한다. 이 예에서는 데이터에서 <code>Country</code>라는 문자열 열과, <code>Year</code>, <code>Males</code>, <code>Females</code>라는 부동소수점 열을 읽어왔음을 보여준다.
<ul>
<li><code>read_csv()</code>는 열의 자료형, 열의 이름, 읽어올 열을 선택할 수 있다.</li>
<li><code>spec()</code> 함수를 사용하면 열에 대한 상세한 명세를 확인할 수 있다.</li>
<li><code>read_csv()</code>의 <code>show_col_types=FALSE</code>로 설정하면 출력은 생략된다.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb2291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2291-1"><a href="ch-R-import.html#cb2291-1" tabindex="-1"></a><span class="fu">spec</span>(sr)</span></code></pre></div>
<pre><code>cols(
  Country = col_character(),
  Year = col_double(),
  Males = col_double(),
  Females = col_double()
)</code></pre>
<div class="sourceCode" id="cb2293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2293-1"><a href="ch-R-import.html#cb2293-1" tabindex="-1"></a>sr <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;suicide_rates.csv&quot;</span>, <span class="at">show_col_types =</span>F)</span></code></pre></div>
<p><code>sr</code> 변수를 출력해 보면 읽어들인 데이터를 확인할 수 있다.
<code>suicide_rates.csv</code>는 총 105개 국(Country)의 남여 자살률(Males, Females)과 조사년도(Year)에 대한 데이터이다.
<code>read_csv()</code>는 tibble` 형식으로 데이터를 반환하므로 처음 10 개 행만 출력하고, 열도 사용자의 콘솔의 폭이 충분하지 않으면 처음 몇 개의 열만 출력할 수 있다.</p>
<div class="sourceCode" id="cb2294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2294-1"><a href="ch-R-import.html#cb2294-1" tabindex="-1"></a>sr</span></code></pre></div>
<pre><code># A tibble: 105 × 4
   Country              Year Males Females
   &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 ALBANIA                 3   4.7     3.3
 2 ANTIGUA AND BARBUDA    95   0       0  
 3 ARGENTINA               8  12.6     3  
 4 ARMENIA                 8   2.8     1.1
 5 AUSTRALIA               6  12.8     3.6
 6 AUSTRIA                 9  23.8     7.1
 7 AZERBAIJAN              7   1       0.3
 8 BAHAMAS                 5   1.9     0.6
 9 BAHRAIN                 6   4       3.5
10 BARBADOS                6   7.3     0  
# ℹ 95 more rows</code></pre>
<p>읽어들인 각 국의 성별 자살률 데이터를 시각화해 보자.</p>
<div class="sourceCode" id="cb2296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2296-1"><a href="ch-R-import.html#cb2296-1" tabindex="-1"></a><span class="fu">ggplot</span>(sr) <span class="sc">+</span></span>
<span id="cb2296-2"><a href="ch-R-import.html#cb2296-2" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(Males, Females, <span class="at">label=</span>Country), </span>
<span id="cb2296-3"><a href="ch-R-import.html#cb2296-3" tabindex="-1"></a>            <span class="at">size=</span><span class="dv">2</span>, <span class="at">check_overlap =</span> T) <span class="sc">+</span></span>
<span id="cb2296-4"><a href="ch-R-import.html#cb2296-4" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="Rimport_files/figure-html/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;" /></p>
</div>
<div id="한글-파일-인코딩" class="section level4 unnumbered hasAnchor">
<h4>한글 파일 인코딩<a href="ch-R-import.html#한글-파일-인코딩" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>students.csv</code>와 <code>students-cp949.csv</code>는 동일한 데이터를 UTF-8과 CP949라는 인코딩 방식으로 저장한 파일이다.
두 파일을 Excel에서 열어보면 <code>students.csv</code> 파일의 한글은 깨져 보이는데, <code>students-cp949.csv</code> 파일의 한글은 제대로 보인다.
이러한 현상이 발생하는 이유는, 윈도우즈는 CP949라는 인코딩 방식으로 한글을 처리하기 때문이다.</p>
<p><img src="img/file-encoding-excel.png" width="100%" style="display: block; margin: auto;" /></p>
<p>이번엔 이 두 파일을 <strong>R</strong>로 읽어들여 보자.</p>
<div class="sourceCode" id="cb2297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2297-1"><a href="ch-R-import.html#cb2297-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students.csv&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 5 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (2): name, gender
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 7
  name   grade gender midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 김철수     1 M           74    91 TRUE       8
2 김영희     4 F           82    77 FALSE      9
3 이철수     3 M           67    88 FALSE      7
4 이영희     2 F           89    78 TRUE       8
5 홍길동     1 M           50    86 FALSE     10</code></pre>
<div class="sourceCode" id="cb2300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2300-1"><a href="ch-R-import.html#cb2300-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students-cp949.csv&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 5 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (2): name, gender
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 7
  name                       grade gender midterm final retake    hw
  &lt;chr&gt;                      &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 &quot;\xb1\xe8\xc3\xb6\xbc\xf6&quot;     1 M           74    91 TRUE       8
2 &quot;\xb1\xe8\xbf\xb5\xc8\xf1&quot;     4 F           82    77 FALSE      9
3 &quot;\xc0\xcc\xc3\xb6\xbc\xf6&quot;     3 M           67    88 FALSE      7
4 &quot;\xc0\xcc\xbf\xb5\xc8\xf1&quot;     2 F           89    78 TRUE       8
5 &quot;\xc8\xab\xb1\xe6\xb5\xbf&quot;     1 M           50    86 FALSE     10</code></pre>
<p><strong>R</strong>에서 <code>students.csv</code> 파일의 한글은 잘 읽어오는데, <code>students-cp949.csv</code> 파일의 한글은 제대로 읽어오지 못했다.
이러한 현상이 발생하는 이유는 <strong>R</strong>은 디폴트로 UTF-8 인코딩으로 파일을 처리하기 때문이다.
Windows를 제외하고 Mac, Linux, 그리고 많은 웹 문서들은 UTF-8을 기준으로 파일을 인코딩한다.
그렇기 때문에 <strong>R</strong>의 많은 함수들은 기본적으로 UTF-8으로 파일을 처리한다.</p>
<p>그러면 윈도우즈의 Excel에서 데이터를 CSV 파일로 저장하면 CP949로 인코딩되는데 <strong>R</strong>에서는 이 CSV 파일을 어떻게 읽어와야 할까?
가장 쉬운 방법은 Excel 파일의 데이터를 CSV 파일로 저장하지 않고 Excel 파일 그 자체로 읽어들이는 것이다. 이에 대해서는 <a href="ch-R-import.html#sec-read-excel">12.2.1</a>에서 설명한다.
다른 한 방법은 <code>read_csv()</code>의 <code>locale</code> 인수에 인코딩을 CP949로 지정하는 것이다.</p>
<div class="sourceCode" id="cb2303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2303-1"><a href="ch-R-import.html#cb2303-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students-cp949.csv&quot;</span>, <span class="at">locale=</span><span class="fu">locale</span>(<span class="at">encoding=</span><span class="st">&quot;CP949&quot;</span>))</span></code></pre></div>
<pre><code>Rows: 5 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (2): name, gender
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 7
  name   grade gender midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 김철수     1 M           74    91 TRUE       8
2 김영희     4 F           82    77 FALSE      9
3 이철수     3 M           67    88 FALSE      7
4 이영희     2 F           89    78 TRUE       8
5 홍길동     1 M           50    86 FALSE     10</code></pre>
<p><code>locale</code> 인수를 설정할 때는 <code>locale()</code> 함수를 사용하는데, 지역에 특화된 인코딩 방식(encoding)뿐만 아니라, 날짜와 시간의 형식, 숫자 형식 등도 지정할 수 있으니 도움말을 참조하기 바란다.</p>
</div>
<div id="파일의-주석문-생략하기" class="section level4 unnumbered hasAnchor">
<h4>파일의 주석문 생략하기<a href="ch-R-import.html#파일의-주석문-생략하기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>students-with-comments.csv</code> 파일을 <code>read_csv()</code> 파일로 읽어보자.</p>
<div class="sourceCode" id="cb2306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2306-1"><a href="ch-R-import.html#cb2306-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students-with-comments.csv&quot;</span>)</span></code></pre></div>
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
<pre><code>Rows: 9 Columns: 1
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (1): # 이 파일은 어떤 과목을 수강하는 학생들에 대한 정보이다.

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 9 × 1
  `# 이 파일은 어떤 과목을 수강하는 학생들에 대한 정보이다.`
  &lt;chr&gt;                                                     
1 # name은 이름, grade는 학년, gender는 성별,               
2 # midterm과 final은 중간과 기말고사 점수                  
3 # retake는 재수강 여부, hw은 숙제 점수를 나타낸다.        
4 name,grade,gender,midterm,final,retake,hw                 
5 김철수,1, M,74,91,TRUE,8                                  
6 김영희,4,F,82,77,FALSE,9                                  
7 이철수,3,M,67,88,FALSE,7                                  
8 이영희,2,F,89,78,TRUE,8                                   
9 홍길동,1,M,50,86,FALSE,10                                 </code></pre>
<p>이 파일의 앞 부분에는 파일을 설명하는 4 줄의 주석문(comments)이 있다.
<code>read_csv()</code> 함수는 기본적으로 파일의 첫 줄은 열 이름을 나타내는 행으로, 그 다음 줄부터는 데이터의 행으로 간주한다.
앞의 예에서는 파일의 주석문을 열 이름으로 간주하여 오직 한 열만 있는 데이터로 파일을 읽어들였다. 이를 확인하려면 읽어들인 데이터의 행과 열수를 보면 된다.
이러한 현상이 발생한 이유는, 파일의 첫 줄에 쉼표(<code>,</code>)나 Tab이 사용되지 않았기 때문에 이 데이터는 오직 하나의 열로 구성된 데이터로 파악했기 때문이다.
그러므로 열의 자료형도 문자와 숫자를 모두 저장할 수 있는 문자열로 추정되었다.</p>
<p>파일의 앞부분에 주석문이 있는 경우에는 <code>skip</code> 인수를 사용하여 생략할 줄의 수를 지정하면, 열 이름이 시작되는 부분부터 데이터를 읽어들일 수 있다.</p>
<div class="sourceCode" id="cb2310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2310-1"><a href="ch-R-import.html#cb2310-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students-with-comments.csv&quot;</span>, <span class="at">skip=</span><span class="dv">4</span>)</span></code></pre></div>
<pre><code>Rows: 5 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (2): name, gender
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 7
  name   grade gender midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 김철수     1 M           74    91 TRUE       8
2 김영희     4 F           82    77 FALSE      9
3 이철수     3 M           67    88 FALSE      7
4 이영희     2 F           89    78 TRUE       8
5 홍길동     1 M           50    86 FALSE     10</code></pre>
<p>원래의 7 개의 열로 잘 분리되어 읽어졌음을 확인할 수 있다.</p>
<p>데이터 파일의 주석문이 파일의 앞부분뿐 아니라 파일 중간에 나오는 경우도 발생할 수 있다.</p>
<div class="sourceCode" id="cb2313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2313-1"><a href="ch-R-import.html#cb2313-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students-with-comments2.csv&quot;</span>)</span></code></pre></div>
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
<pre><code>Rows: 10 Columns: 1
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (1): # 이 파일은 어떤 과목을 수강하는 학생들에 대한 정보이다.

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 10 × 1
   `# 이 파일은 어떤 과목을 수강하는 학생들에 대한 정보이다.`
   &lt;chr&gt;                                                     
 1 # name은 이름, grade는 학년, gender는 성별,               
 2 # midterm과 final은 중간과 기말고사 점수                  
 3 # retake는 재수강 여부, hw은 숙제 점수를 나타낸다.        
 4 name,grade,gender,midterm,final,retake,hw                 
 5 김철수,1, M,74,91,TRUE,8                                  
 6 김영희,4,F,82,77,FALSE,9    # 데이터 확인 완료            
 7 이철수,3,M,67,88,FALSE,7                                  
 8 # 추가 등록 학생                                          
 9 이영희,2,F,89,78,TRUE,8                                   
10 홍길동,1,M,50,86,FALSE,10                                 </code></pre>
<p>이 파일은 앞 부분의 4줄뿐 아니라 데이터 중간에도 주석문이 포함되어 있다.
그러므로 다음처럼 앞의 4 줄을 제외하여도 데이터가 올바르게 처리되지 않는다.</p>
<div class="sourceCode" id="cb2317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2317-1"><a href="ch-R-import.html#cb2317-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students-with-comments2.csv&quot;</span>, <span class="at">skip=</span><span class="dv">4</span>)</span></code></pre></div>
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
<pre><code>Rows: 6 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (3): name, gender, hw
dbl (3): grade, midterm, final
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 6 × 7
  name             grade gender midterm final retake hw                     
  &lt;chr&gt;            &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;chr&gt;                  
1 김철수               1 M           74    91 TRUE   8                      
2 김영희               4 F           82    77 FALSE  9    # 데이터 확인 완료
3 이철수               3 M           67    88 FALSE  7                      
4 # 추가 등록 학생    NA &lt;NA&gt;        NA    NA NA     &lt;NA&gt;                   
5 이영희               2 F           89    78 TRUE   8                      
6 홍길동               1 M           50    86 FALSE  10                     </code></pre>
<p>일반적으로 주석문은 특수한 문자로 주석을 시작하는데, <code>#</code>를 사용하는 경우가 많다.
<code>read_csv()</code>는 <code>comment</code> 인수를 사용하여 특수한 문자열 다음에 있는 모든 텍스트를 주석문으로 간주하여 데이터에서 제외할 수 있다.</p>
<div class="sourceCode" id="cb2321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2321-1"><a href="ch-R-import.html#cb2321-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students-with-comments2.csv&quot;</span>, <span class="at">comment=</span><span class="st">&quot;#&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 5 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (2): name, gender
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 7
  name   grade gender midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 김철수     1 M           74    91 TRUE       8
2 김영희     4 F           82    77 FALSE      9
3 이철수     3 M           67    88 FALSE      7
4 이영희     2 F           89    78 TRUE       8
5 홍길동     1 M           50    86 FALSE     10</code></pre>
</div>
<div id="읽어들일-열-선택하기" class="section level4 unnumbered hasAnchor">
<h4>읽어들일 열 선택하기<a href="ch-R-import.html#읽어들일-열-선택하기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>파일의 데이터에 불필요한 열이 있을 수 있다.
데이터의 크기가 작으면 모든 데이터를 읽은 후에 (ch-dataTransformation)에서 배운 <code>select()</code> 함수를 사용하여 필요한 열만 선택해도 된다.
그러나 데이터가 매우 크면 불필요한 데이터를 위한 처리시간과 저장공간의 낭비가 너무 크게 발생할 수 있다.</p>
<p><code>read_csv()</code>는 <code>col_select</code> 인수로 읽어들일 열을 지정할 수 있다.
열을 지정하는 방식은 열의 위치, 열의 이름, 그리고 <code>select()</code>에서 열을 매칭하는 방식(<a href="ch-dataTransformation.html#sec-select-match">7.7.4</a> 참조)을 사용할 수 있다. 열을 지정하는 표현이 하나 이상이면 <code>c()</code>로 연결한다.</p>
<div class="sourceCode" id="cb2324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2324-1"><a href="ch-R-import.html#cb2324-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students.csv&quot;</span>, <span class="at">col_select=</span><span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>) <span class="co"># 2에서 4번째 열</span></span></code></pre></div>
<pre><code>Rows: 5 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (1): gender
dbl (2): grade, midterm

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 3
  grade gender midterm
  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
1     1 M           74
2     4 F           82
3     3 M           67
4     2 F           89
5     1 M           50</code></pre>
<div class="sourceCode" id="cb2327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2327-1"><a href="ch-R-import.html#cb2327-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students.csv&quot;</span>, <span class="at">col_select=</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">6</span>)) <span class="co"># 2에서 4번째 열과 6번재 열</span></span></code></pre></div>
<pre><code>Rows: 5 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (1): gender
dbl (2): grade, midterm
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 4
  grade gender midterm retake
  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;lgl&gt; 
1     1 M           74 TRUE  
2     4 F           82 FALSE 
3     3 M           67 FALSE 
4     2 F           89 TRUE  
5     1 M           50 FALSE </code></pre>
<div class="sourceCode" id="cb2330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2330-1"><a href="ch-R-import.html#cb2330-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students.csv&quot;</span>, <span class="at">col_select=</span><span class="sc">-</span><span class="dv">1</span>) <span class="co"># 첫 번째 열 제외</span></span></code></pre></div>
<pre><code>Rows: 5 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (1): gender
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 6
  grade gender midterm final retake    hw
  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1     1 M           74    91 TRUE       8
2     4 F           82    77 FALSE      9
3     3 M           67    88 FALSE      7
4     2 F           89    78 TRUE       8
5     1 M           50    86 FALSE     10</code></pre>
<div class="sourceCode" id="cb2333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2333-1"><a href="ch-R-import.html#cb2333-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students.csv&quot;</span>, <span class="at">col_select=</span><span class="fu">c</span>(midterm, final, hw)) <span class="co"># 열 이름으로</span></span></code></pre></div>
<pre><code>Rows: 5 Columns: 3
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
dbl (3): midterm, final, hw

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 3
  midterm final    hw
    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1      74    91     8
2      82    77     9
3      67    88     7
4      89    78     8
5      50    86    10</code></pre>
<div class="sourceCode" id="cb2336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2336-1"><a href="ch-R-import.html#cb2336-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students.csv&quot;</span>, <span class="at">col_select=</span><span class="fu">c</span>(name<span class="sc">:</span>grade, midterm<span class="sc">:</span>hw)) <span class="co"># 열 이름 범위로</span></span></code></pre></div>
<pre><code>Rows: 5 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (1): name
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 6
  name   grade midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 김철수     1      74    91 TRUE       8
2 김영희     4      82    77 FALSE      9
3 이철수     3      67    88 FALSE      7
4 이영희     2      89    78 TRUE       8
5 홍길동     1      50    86 FALSE     10</code></pre>
<div class="sourceCode" id="cb2339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2339-1"><a href="ch-R-import.html#cb2339-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students.csv&quot;</span>, <span class="at">col_select=</span><span class="fu">starts_with</span>(<span class="st">&quot;g&quot;</span>)) <span class="co"># 이름이 g로 시작하는 열만</span></span></code></pre></div>
<pre><code>Rows: 5 Columns: 2
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (1): gender
dbl (1): grade

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 5 × 2
  grade gender
  &lt;dbl&gt; &lt;chr&gt; 
1     1 M     
2     4 F     
3     3 M     
4     2 F     
5     1 M     </code></pre>
</div>
<div id="열의-자료형-지정하기" class="section level4 unnumbered hasAnchor">
<h4>열의 자료형 지정하기<a href="ch-R-import.html#열의-자료형-지정하기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>read_csv()</code>는 앞에서 설명한 바와 같이 대부분의 경우에 열의 데이터를 파악하여 적절한 자료형으로 읽어들인다.</p>
<div class="sourceCode" id="cb2342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2342-1"><a href="ch-R-import.html#cb2342-1" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;students.csv&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 5 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (2): name, gender
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb2344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2344-1"><a href="ch-R-import.html#cb2344-1" tabindex="-1"></a>students</span></code></pre></div>
<pre><code># A tibble: 5 × 7
  name   grade gender midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 김철수     1 M           74    91 TRUE       8
2 김영희     4 F           82    77 FALSE      9
3 이철수     3 M           67    88 FALSE      7
4 이영희     2 F           89    78 TRUE       8
5 홍길동     1 M           50    86 FALSE     10</code></pre>
<p>midterm과 final, hw 등의 열은 모두 숫자로 잘 처리되었기 때문에 <code>summary()</code>를 해보면 평균 등이 잘 계산된다.</p>
<div class="sourceCode" id="cb2346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2346-1"><a href="ch-R-import.html#cb2346-1" tabindex="-1"></a><span class="fu">summary</span>(students)</span></code></pre></div>
<pre><code>     name               grade        gender             midterm    
 Length:5           Min.   :1.0   Length:5           Min.   :50.0  
 Class :character   1st Qu.:1.0   Class :character   1st Qu.:67.0  
 Mode  :character   Median :2.0   Mode  :character   Median :74.0  
                    Mean   :2.2                      Mean   :72.4  
                    3rd Qu.:3.0                      3rd Qu.:82.0  
                    Max.   :4.0                      Max.   :89.0  
     final      retake              hw      
 Min.   :77   Mode :logical   Min.   : 7.0  
 1st Qu.:78   FALSE:3         1st Qu.: 8.0  
 Median :86   TRUE :2         Median : 8.0  
 Mean   :84                   Mean   : 8.4  
 3rd Qu.:88                   3rd Qu.: 9.0  
 Max.   :91                   Max.   :10.0  </code></pre>
<p>그러나 데이터가 깔끔하게 정리되어 있지 않으면 <code>read_csv()</code>가 추정하는 열의 자료형이 부정확할 수 있다.
이러한 경우에는 직접 열의 자료형을 지정하여야 한다.</p>
<div class="sourceCode" id="cb2348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2348-1"><a href="ch-R-import.html#cb2348-1" tabindex="-1"></a>students_prob <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;students-with-problems.csv&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 5 Columns: 7
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (3): name, gender, final
dbl (3): grade, midterm, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb2350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2350-1"><a href="ch-R-import.html#cb2350-1" tabindex="-1"></a>students_prob</span></code></pre></div>
<pre><code># A tibble: 5 × 7
  name   grade gender midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 김철수     1 M           74 91    TRUE       8
2 김영희     4 F           82 77    FALSE      9
3 이철수     3 M           NA 88    FALSE      7
4 이영희     2 F           89 -     TRUE       8
5 홍길동     1 M           50 86    FALSE     10</code></pre>
<p>위의 예를 보면 midterm과 final에 결측치가 있지만 데이터가 잘 읽어들여진 것으로 보인다.
그러나 <code>summary()</code>를 해보면 midterm은 평균들이 적절히 구해지지만, final은 문자열로 처리되어 평균이 구해지지 않는 것을 볼 수 있다.</p>
<div class="sourceCode" id="cb2352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2352-1"><a href="ch-R-import.html#cb2352-1" tabindex="-1"></a><span class="fu">summary</span>(students_prob)</span></code></pre></div>
<pre><code>     name               grade        gender             midterm     
 Length:5           Min.   :1.0   Length:5           Min.   :50.00  
 Class :character   1st Qu.:1.0   Class :character   1st Qu.:68.00  
 Mode  :character   Median :2.0   Mode  :character   Median :78.00  
                    Mean   :2.2                      Mean   :73.75  
                    3rd Qu.:3.0                      3rd Qu.:83.75  
                    Max.   :4.0                      Max.   :89.00  
                                                     NA&#39;s   :1      
    final             retake              hw      
 Length:5           Mode :logical   Min.   : 7.0  
 Class :character   FALSE:3         1st Qu.: 8.0  
 Mode  :character   TRUE :2         Median : 8.0  
                                    Mean   : 8.4  
                                    3rd Qu.: 9.0  
                                    Max.   :10.0  
                                                  </code></pre>
<p>왜 이러한 현상이 발생하는 걸까?
그것은 데이터 파일의 final 열에 결측치를 표현하기 위해 <code>-</code>라는 문자가 사용되었기 때문이다.
<code>read_csv()</code>는 이 열에 숫자뿐 아니라 문자가 있기 때문에 이를 모두 표현할 수 있는 문자열로 final 열을 처리했다.</p>
<p><code>read_csv()</code>의 <code>col_types</code>라는 인수로 각 열의 자료형을 직접 지정할 수 있다.
직접 자료형을 지정할 열은 <code>열_이름=열_자료형</code> 형식으로 리스트로 전달한다. (또는 <code>cols()</code> 함수를 사용하여 전달할 수 있다. 자세한 내용은 도움말은 참조한다.)
열의 자료형을 표현하는 다양한 함수와 이에 대응하는 축약어가 있다.</p>
<table>
<colgroup>
<col width="15%" />
<col width="22%" />
<col width="62%" />
</colgroup>
<thead>
<tr class="header">
<th>함수</th>
<th>축약어</th>
<th>열 자료형</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>col_logical()</code></td>
<td>“l”</td>
<td>논리 열</td>
</tr>
<tr class="even">
<td><code>col_integer()</code></td>
<td>“i”</td>
<td>정수 열</td>
</tr>
<tr class="odd">
<td><code>col_double()</code></td>
<td>“d”</td>
<td>부동소수점 열</td>
</tr>
<tr class="even">
<td><code>col_character()</code></td>
<td>“c”</td>
<td>문자 열. 데이터는 숫자지만 문자 열로 인식하고 싶을 때 주로 사용</td>
</tr>
<tr class="odd">
<td><code>col_factor()</code></td>
<td>“f”</td>
<td>요인 열. 열을 요인으로 변환</td>
</tr>
<tr class="even">
<td><code>col_date()</code>, <code>col_time()</code>, <code>col_datetime()</code></td>
<td>“D”, “T”, “DT”</td>
<td>날짜, 시간, 날짜와 시간 열. 이 함수들은 <code>format</code> 인수로 날짜와 시간의 표시 형식을 지정할 수 있다.</td>
</tr>
<tr class="odd">
<td><code>col_number()</code></td>
<td>“n”</td>
<td>비숫자 표현은 무시하고 숫자로 변환. 천 단위 <code>,</code> 등 처리에 주로 사용</td>
</tr>
<tr class="even">
<td><code>col_skip()</code></td>
<td>“-”</td>
<td>열을 무시</td>
</tr>
<tr class="odd">
<td><code>col_guess()</code></td>
<td>“?”</td>
<td>열의 데이터로 자료형 추정</td>
</tr>
</tbody>
</table>
<p><code>final</code> 열을 숫자로 지정하여 데이터를 다시 읽어보자.</p>
<div class="sourceCode" id="cb2354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2354-1"><a href="ch-R-import.html#cb2354-1" tabindex="-1"></a>students_prob <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;students-with-problems.csv&quot;</span>, </span>
<span id="cb2354-2"><a href="ch-R-import.html#cb2354-2" tabindex="-1"></a>                      <span class="at">col_types=</span><span class="fu">list</span>(<span class="at">final=</span><span class="fu">col_number</span>()))</span></code></pre></div>
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
<div class="sourceCode" id="cb2356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2356-1"><a href="ch-R-import.html#cb2356-1" tabindex="-1"></a>students_prob</span></code></pre></div>
<pre><code># A tibble: 5 × 7
  name   grade gender midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 김철수     1 M           74    91 TRUE       8
2 김영희     4 F           82    77 FALSE      9
3 이철수     3 M           NA    88 FALSE      7
4 이영희     2 F           89    NA TRUE       8
5 홍길동     1 M           50    86 FALSE     10</code></pre>
<p>final을 숫자로 인식하여 처리는 하였지만 데이터에 문제가 있다고 경고한다.
경고에서 제시한 것처럼 어떤 문제인지 <code>problems()</code> 함수로 살펴보자.</p>
<div class="sourceCode" id="cb2358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2358-1"><a href="ch-R-import.html#cb2358-1" tabindex="-1"></a><span class="fu">problems</span>(students_prob)</span></code></pre></div>
<pre><code># A tibble: 1 × 5
    row   col expected actual file                                              
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;                                             
1     5     5 a number -      /mnt/c/Users/kilhwan/Dropbox/Work/Writing/R-progr…</code></pre>
<p>5행의 5열의 데이터로 숫자(number)가 예상되었는데(exptected) 실제(actual)은 <code>-</code>가 입력되었다는 것이다.
<code>col_number()</code>로 지정된 열은 숫자 이외의 문자는 모두 무시되므로 이 셀의 데이터는 결측치(NA)로 처리되었다.
특정 문자를 결측치로 처리하려면 다음처럼 <code>na</code> 인수를 사용하여 결측치로 간주할 문자열을 지정한다.
midterm에 있는 빈 문자열과 final의 “-”로 표시된 문자열을 모두 결측치로 지정해 보자.
그러면 앞에서 본 경고는 사라진다.</p>
<div class="sourceCode" id="cb2360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2360-1"><a href="ch-R-import.html#cb2360-1" tabindex="-1"></a>students_prob <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;students-with-problems.csv&quot;</span>,  </span>
<span id="cb2360-2"><a href="ch-R-import.html#cb2360-2" tabindex="-1"></a>                      <span class="at">col_types=</span><span class="fu">list</span>(<span class="at">final=</span><span class="fu">col_number</span>()), </span>
<span id="cb2360-3"><a href="ch-R-import.html#cb2360-3" tabindex="-1"></a>                      <span class="at">na=</span><span class="fu">c</span>(<span class="st">&quot;-&quot;</span>, <span class="st">&quot;&quot;</span>))</span>
<span id="cb2360-4"><a href="ch-R-import.html#cb2360-4" tabindex="-1"></a>students_prob</span></code></pre></div>
<pre><code># A tibble: 5 × 7
  name   grade gender midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 김철수     1 M           74    91 TRUE       8
2 김영희     4 F           82    77 FALSE      9
3 이철수     3 M           NA    88 FALSE      7
4 이영희     2 F           89    NA TRUE       8
5 홍길동     1 M           50    86 FALSE     10</code></pre>
</div>
<div id="동일한-형식의-파일을-한번에-읽어들이기" class="section level4 unnumbered hasAnchor">
<h4>동일한 형식의 파일을 한번에 읽어들이기<a href="ch-R-import.html#동일한-형식의-파일을-한번에-읽어들이기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>students2.csv</code> 파일은 <code>students.csv</code>와 동일한 형식의 데이터인데 다른 분반의 학생들에 대한 정보이다.</p>
<div class="sourceCode" id="cb2362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2362-1"><a href="ch-R-import.html#cb2362-1" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&quot;students2.csv&quot;</span>, <span class="at">show_col_types=</span>F)</span></code></pre></div>
<pre><code># A tibble: 2 × 7
  name   grade gender midterm final retake    hw
  &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 강철수     2 M           70    81 FALSE      8
2 홍영희     3 F           92    79 FALSE      9</code></pre>
<p>만약 이 두 분반의 데이터를 합쳐서 분석한다면 두 파일을 각각 읽어들인 후, <a href="ch-R-Advanced-Data-Mgmt.html#sec-bind-data">9.1</a>에서 설명한 <code>bind_rows()</code> 함수로 병합을 하면 된다.</p>
<div class="sourceCode" id="cb2364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2364-1"><a href="ch-R-import.html#cb2364-1" tabindex="-1"></a>file_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;students.csv&quot;</span>, <span class="st">&quot;students2.csv&quot;</span>)</span>
<span id="cb2364-2"><a href="ch-R-import.html#cb2364-2" tabindex="-1"></a><span class="fu">lapply</span>(file_list, read_csv, <span class="at">show_col_types=</span>F) <span class="sc">%&gt;%</span>  </span>
<span id="cb2364-3"><a href="ch-R-import.html#cb2364-3" tabindex="-1"></a>  <span class="fu">bind_rows</span>(<span class="at">.id=</span><span class="st">&quot;cls&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 7 × 8
  cls   name   grade gender midterm final retake    hw
  &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 1     김철수     1 M           74    91 TRUE       8
2 1     김영희     4 F           82    77 FALSE      9
3 1     이철수     3 M           67    88 FALSE      7
4 1     이영희     2 F           89    78 TRUE       8
5 1     홍길동     1 M           50    86 FALSE     10
6 2     강철수     2 M           70    81 FALSE      8
7 2     홍영희     3 F           92    79 FALSE      9</code></pre>
<p><code>read_csv()</code>는 여러 개의 파일명을 받아서 병합시키는 기능이 있으므로 위의 과정을 다음과 같이 처리할 수 있다. <code>id</code> 인수는 여러 개의 파일을 읽을 때 파일의 경로를 저장할 열 이름을 지정한다.</p>
<div class="sourceCode" id="cb2366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2366-1"><a href="ch-R-import.html#cb2366-1" tabindex="-1"></a><span class="fu">read_csv</span>(file_list, <span class="at">id=</span><span class="st">&quot;file&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 7 Columns: 8
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (2): name, gender
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code># A tibble: 7 × 8
  file          name   grade gender midterm final retake    hw
  &lt;chr&gt;         &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 students.csv  김철수     1 M           74    91 TRUE       8
2 students.csv  김영희     4 F           82    77 FALSE      9
3 students.csv  이철수     3 M           67    88 FALSE      7
4 students.csv  이영희     2 F           89    78 TRUE       8
5 students.csv  홍길동     1 M           50    86 FALSE     10
6 students2.csv 강철수     2 M           70    81 FALSE      8
7 students2.csv 홍영희     3 F           92    79 FALSE      9</code></pre>
<p>한번에 처리해야 할 파일이 매우 많은 경우에는 <code>list.files()</code> 함수에 <code>pattern</code>을 정의하여 패턴에 맞는 모든 파일을 한번에 처리하는 것이 편리하다. (<code>pattern</code> 인수에는 정규표현식으로 파일 이름의 패턴을 지정할 수 있다.)
만약 월별로 저장된 24 개의 파일이 있으면 파일을 일일이 나열하는 것보다 이러한 방법이 매우 편리할 것이다.
다음은 “students”로 시작하여 숫자 패턴 후에 “.csv”로 끝나는 모든 파일을 지정하여 데이터를 읽는 예이다.</p>
<div class="sourceCode" id="cb2369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2369-1"><a href="ch-R-import.html#cb2369-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">pattern=</span><span class="st">&quot;students</span><span class="sc">\\</span><span class="st">d*[.]csv&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;students.csv&quot;  &quot;students2.csv&quot;</code></pre>
<div class="sourceCode" id="cb2371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2371-1"><a href="ch-R-import.html#cb2371-1" tabindex="-1"></a>students_all <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">list.files</span>(<span class="at">pattern=</span><span class="st">&quot;students</span><span class="sc">\\</span><span class="st">d*[.]csv&quot;</span>), <span class="at">id=</span><span class="st">&quot;file&quot;</span>)</span></code></pre></div>
<pre><code>Rows: 7 Columns: 8
── Column specification ────────────────────────────────────────────────────────
Delimiter: &quot;,&quot;
chr (2): name, gender
dbl (4): grade, midterm, final, hw
lgl (1): retake

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb2373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2373-1"><a href="ch-R-import.html#cb2373-1" tabindex="-1"></a>students_all</span></code></pre></div>
<pre><code># A tibble: 7 × 8
  file          name   grade gender midterm final retake    hw
  &lt;chr&gt;         &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;  &lt;dbl&gt;
1 students.csv  김철수     1 M           74    91 TRUE       8
2 students.csv  김영희     4 F           82    77 FALSE      9
3 students.csv  이철수     3 M           67    88 FALSE      7
4 students.csv  이영희     2 F           89    78 TRUE       8
5 students.csv  홍길동     1 M           50    86 FALSE     10
6 students2.csv 강철수     2 M           70    81 FALSE      8
7 students2.csv 홍영희     3 F           92    79 FALSE      9</code></pre>
</div>
<div id="데이터를-파일에-쓰기" class="section level4 unnumbered hasAnchor">
<h4>데이터를 파일에 쓰기<a href="ch-R-import.html#데이터를-파일에-쓰기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>데이터프레임 형식의 데이터를 CSV 형식의 파일로 저장하려면 <strong>R</strong>의 기본 기능이 제공하는 <code>write.csv()</code> 함수나 <code>readr</code>에서 제공하는 <code>write_csv()</code> 함수를 사용한다.
여기서는 <code>write_csv()</code> 함수를 설명하는데, 두 함수의 차이는 그리 크지 않다.</p>
<div class="sourceCode" id="cb2375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2375-1"><a href="ch-R-import.html#cb2375-1" tabindex="-1"></a><span class="fu">write_csv</span>(students_all, <span class="st">&quot;students_all.csv&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="sec-read-spreadsheets" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> 스프레드시트 파일에서 데이터 읽기<a href="ch-R-import.html#sec-read-spreadsheets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>이 절에서는 MS Excel이나 Google Sheets 등의 스프레드시트 파일의 데이터를 읽어오는 법을 다룬다.</p>
<div id="sec-read-excel" class="section level3 hasAnchor" number="12.2.1">
<h3><span class="header-section-number">12.2.1</span> Excel 파일에서 데이터 읽기<a href="ch-R-import.html#sec-read-excel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Excel에는 Excel 파일을 CSV 파일로 저장하는 기능이 있다.
이 기능을 사용하여 CSV 파일로 변환을 하면 앞에서 설명한 <code>read_csv()</code> 함수를 이용하여 데이터를 읽어들일 수 있다.
만약 Excel 데이터를 변환 없이 그대로 읽어들이고 싶으면, <code>readxl</code> 패키지의 <code>read_excel()</code> 함수를 사용한다.
<code>readxl</code> 패키지는 <code>tidyverse</code> 패키지가 설치되면 자동으로 설치된다. 만약 설치되어 있지 않다면 다음 명령이나 RStudio의 Packages 패널의 기능을 사용하여 설치한다.</p>
<div class="sourceCode" id="cb2376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2376-1"><a href="ch-R-import.html#cb2376-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;readxl&quot;</span>)</span></code></pre></div>
<a href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,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" download="dataMerge.xlsx">Download dataMerge.xlsx</a>
<p>위의 파일을 내려받으면, 다음과 같이, 4 개의 워크시트가 있는 Excel 파일에서 project라는 이름의 워크시트를 데이터프레임으로 읽어들이는 예를 살펴보자.</p>
<p><img src="img/dataMerge.png" width="90%" style="display: block; margin: auto;" /></p>
<p><code>readxl</code>은 <code>tidyverse</code> 패키지가 적재될 때 자동으로 적재되지는 않으므로, 직접 적재를 해야 한다.
<code>readxl</code>은 Excel 파일을 읽어들이는 다음 세 함수를 제공한다.</p>
<ul>
<li><code>read_xls()</code>: <code>xls</code> 형식의 Excel 파일을 읽어들인다.</li>
<li><code>read_xlsx()</code>: <code>xlsx</code> 형식의 Excel 파일을 읽어들인다.</li>
<li><code>read_excel()</code>: <code>xls</code>와 xlsx` 형식의 Excel 파일을 모두 읽어들인다.</li>
</ul>
<p>이 함수들은 <code>read_csv()</code>와 공유하는 인수들이 있다.
대표적인 예로 <code>col_names</code>, <code>col_types</code>, <code>na</code>, <code>skip</code> 등이 있다.
여기서는 <code>read_excel()</code> 함수만 다루도록 한다.</p>
<div id="워크시트의-데이터-읽기" class="section level4 unnumbered hasAnchor">
<h4>워크시트의 데이터 읽기<a href="ch-R-import.html#워크시트의-데이터-읽기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>한 파일에 여러 워크시트를 저장할 수 있는 것이 Excel 파일과 텍스트 파일의 가장 큰 차이라 할 수 있다.<br />
그렇기 때문에 read_excel()<code>함수는 첫 번째 인수로 파일명을, 두 번째</code>sheet<code>인수로 읽어들일 워크시트를 지정한다.</code>read_excel()<code>함수는 데이터를</code>tibble`이라는 일종의 개량된 data.frame 형식으로 데이터를 반환한다.</p>
<div class="sourceCode" id="cb2377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2377-1"><a href="ch-R-import.html#cb2377-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb2377-2"><a href="ch-R-import.html#cb2377-2" tabindex="-1"></a>project <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;dataMerge.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;project&quot;</span>) </span>
<span id="cb2377-3"><a href="ch-R-import.html#cb2377-3" tabindex="-1"></a>project</span></code></pre></div>
<pre><code># A tibble: 4 × 2
  Team  Project
  &lt;chr&gt;   &lt;dbl&gt;
1 A          80
2 B          90
3 C          85
4 D          75</code></pre>
<p><code>sheet</code> 인수에 아무것도 지정하지 않으면, 맨 처음 워크시트의 데이터를 읽어들인다.</p>
<div class="sourceCode" id="cb2379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2379-1"><a href="ch-R-import.html#cb2379-1" tabindex="-1"></a>class1 <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;dataMerge.xlsx&quot;</span>) </span>
<span id="cb2379-2"><a href="ch-R-import.html#cb2379-2" tabindex="-1"></a>class1</span></code></pre></div>
<pre><code># A tibble: 5 × 6
  ID    Name   Adress Midterm Final Team 
  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
1 015   김철수 서울        78    59 A    
2 018   김영희 경기        85    87 A    
3 025   이철수 충남        80    70 B    
4 034   이영희 대전        92    89 B    
5 151   홍길동 세종        58    66 B    </code></pre>
<p>Excel 파일에 있는 모든 워크시트 정보를 확인하려면 <code>excel_sheets()</code> 함수를 사용한다.</p>
<div class="sourceCode" id="cb2381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2381-1"><a href="ch-R-import.html#cb2381-1" tabindex="-1"></a><span class="fu">excel_sheets</span>(<span class="st">&quot;dataMerge.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;class1&quot;     &quot;class2&quot;     &quot;project&quot;    &quot;attendance&quot;</code></pre>
</div>
<div id="워크시트의-특정-범위의-데이터-읽기" class="section level4 unnumbered hasAnchor">
<h4>워크시트의 특정 범위의 데이터 읽기<a href="ch-R-import.html#워크시트의-특정-범위의-데이터-읽기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>다음은 제공된 Excel 파일의 4 번째 워크시트를 보여준다.</p>
<p><img src="img/dataMerge-attendance.png" width="70%" style="display: block; margin: auto;" /></p>
<p>지금까지의 워크시트는 데이터가 모두 좌상단부터 시작하고, 열 이름과 데이터를 제외하고는 다른 정보가 저장되어 있지 않았다.
그러나 대부분의 워크시트는 데이터 저장의 용도뿐 아니라 문서로서 역할도 하기 때문에 위의 그림처럼 데이터와 무관한 내용들이 있을 수 있다.
이런 경우에는 워크시트의 특정 범위를 지정하여 데이터를 읽어와야 한다.
<code>read_excel()</code>의 <code>range</code> 인수는 Excel의 범위 지정 문법을 사용하여 특정 범위를 지정한다.</p>
<div class="sourceCode" id="cb2383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2383-1"><a href="ch-R-import.html#cb2383-1" tabindex="-1"></a>att <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;dataMerge.xlsx&quot;</span>, <span class="at">sheet =</span> <span class="st">&quot;attendance&quot;</span>, <span class="at">range=</span><span class="st">&quot;B3:C12&quot;</span>) </span>
<span id="cb2383-2"><a href="ch-R-import.html#cb2383-2" tabindex="-1"></a>att</span></code></pre></div>
<pre><code># A tibble: 9 × 2
  ID    Attendance
  &lt;chr&gt;      &lt;dbl&gt;
1 012           85
2 015           90
3 018           95
4 019          100
5 025          100
6 028          100
7 034          100
8 045          100
9 151           95</code></pre>
<p>다음처럼 <code>range</code>에 워크시트가 포함된 범위를 지정하면 <code>sheet</code> 인수는 무시되므로 이를 지정하지 않는다.</p>
<div class="sourceCode" id="cb2385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2385-1"><a href="ch-R-import.html#cb2385-1" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&quot;dataMerge.xlsx&quot;</span>, <span class="at">range=</span><span class="st">&quot;attendance!B3:C12&quot;</span>) </span></code></pre></div>
<pre><code># A tibble: 9 × 2
  ID    Attendance
  &lt;chr&gt;      &lt;dbl&gt;
1 012           85
2 015           90
3 018           95
4 019          100
5 025          100
6 028          100
7 034          100
8 045          100
9 151           95</code></pre>
</div>
<div id="자료형에-대한-주의-사항" class="section level4 unnumbered hasAnchor">
<h4>자료형에 대한 주의 사항<a href="ch-R-import.html#자료형에-대한-주의-사항" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>CSV 파일은 모든 데이터가 단순한 텍스트로 저장되지만, Excel 파일은 그렇지 않다.
Excel 파일의 데이터를 읽어들일 때 다음 세 가지 사항을 주의해야 한다.</p>
<ol style="list-style-type: decimal">
<li><p>Excel은 실제 자료형과 표현되는 형태가 다를 수 있다. Excel에는 정수형이 없다. 숫자는 모두 부동소수점의 자료형이다. 단지 소수점 몇 째 자리까지 표현할지에 따라 Excel에서 보여지는 숫자 형식이 달라질 뿐이다. 날짜와 시간도 1970년 1월 1일 이후의 경과된 초를 기준으로 숫자로 저장된다. 단지 표현될 때 날짜 형식으로 보여질 뿐이다. 그러므로 Excel에서 보여지는 형식과 다르게 <strong>R</strong>에서 읽혀질 수 있다는 것을 이해해야 한다. <code>read_excel()</code> 함수는 각 열의 데이터로 <strong>R</strong>에서 적절한 자료형으로 추정하지만 이러한 추정이 만족스럽지 않으면 <code>col_types</code> 인수에 자료형을 적절히 지정해 주어야 한다. 관련된 내용은 <code>read_excel()</code> 함수의 도움말을 참조한다.</p></li>
<li><p>Excel은 셀별로 데이터 형식을 지정한다는 것이다. 그러므로 한 열이 여러 데이터가 혼합된 형태일 수 있다. 만약에 혼합된 형식의 데이터를 모두 이용하려면 열의 자료형을 <code>"list"</code>로 설정한다.</p></li>
<li><p>Excel의 셀은 배경색, 텍스트의 서식 등의 다양한 정보를 가지고 있다. 이는 시트의 데이터를 사람에게 보기 좋은 문서로서 표현한 것이지만, 컴퓨터가 처리하기에 적절한 데이터 저장 방식은 아니다. 또한 피벗 테이블처럼 복잡한 형식으로 데이터가 저장되어 있을 수도 있다. 만약 Excel 파일에 표현된 이러한 정보가 데이터 분석에 필요하다면, <a href="https://nacnudus.github.io/tidyxl/"><code>tidyxl</code> 패키지</a>의 기능을 검토해 볼 필요가 있다.</p></li>
</ol>
</div>
<div id="데이터를-excel-파일에-쓰기" class="section level4 hasAnchor" number="12.2.1.1">
<h4><span class="header-section-number">12.2.1.1</span> 데이터를 Excel 파일에 쓰기<a href="ch-R-import.html#데이터를-excel-파일에-쓰기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Excel 파일에 데이터를 저장하려면 <code>writexl</code> 패키지가 필요하다.</p>
<div class="sourceCode" id="cb2387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2387-1"><a href="ch-R-import.html#cb2387-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;writexl&quot;</span>)</span></code></pre></div>
<p><code>write_xlsx()</code> 파일은 <strong>R</strong>의 데이터프레임(들)을 xlsx 형식의 Excel 파일에 저장한다.</p>
<ul>
<li>첫 번째 인수에 데이터프레임 또는 데이터프레임을 요소로 하는 리스트를 제공한다. 리스트로 제공하는 경우 요소의 이름이 워크시트의 이름이 된다.</li>
<li><code>path</code> 인수는 저장될 파일의 경로를 지정한다. 파일명만 지정하면 작업 디렉토리에 저장된다.</li>
<li><code>col_names</code> 인수는 열 이름을 저장할지를 지정한다. 디폴트 값은 <code>TRUE</code>이다.</li>
<li><code>format_headers</code> 인수는 열 이름을 가운데 정렬하고 굵은 글자로 표시할지를 지정한다. 디폴트 값은 <code>TRUE</code>이다.</li>
</ul>
<p>다음은 데이터프레임 하나만 제공하는 경우이다.
보통의 Excel 파일처럼 Sheet1라는 이름의 워크시트에 데이터가 저장된다.</p>
<div class="sourceCode" id="cb2388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2388-1"><a href="ch-R-import.html#cb2388-1" tabindex="-1"></a><span class="fu">library</span>(writexl)</span>
<span id="cb2388-2"><a href="ch-R-import.html#cb2388-2" tabindex="-1"></a><span class="fu">write_xlsx</span>(students_all, <span class="at">path=</span><span class="st">&quot;students_all.xlsx&quot;</span>)</span>
<span id="cb2388-3"><a href="ch-R-import.html#cb2388-3" tabindex="-1"></a><span class="fu">excel_sheets</span>(<span class="st">&quot;students_all.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;Sheet1&quot;</code></pre>
<p>다음처럼 요소에 이름을 부여한 리스트를 인수로 제공하면 요소 이름을 워크시트 이름으로 하여 데이터가 저장된다.</p>
<div class="sourceCode" id="cb2390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2390-1"><a href="ch-R-import.html#cb2390-1" tabindex="-1"></a><span class="fu">write_xlsx</span>(</span>
<span id="cb2390-2"><a href="ch-R-import.html#cb2390-2" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">students=</span>students_all, <span class="at">project=</span>project, <span class="at">attendance=</span>att), </span>
<span id="cb2390-3"><a href="ch-R-import.html#cb2390-3" tabindex="-1"></a>  <span class="at">path=</span><span class="st">&quot;students_all.xlsx&quot;</span></span>
<span id="cb2390-4"><a href="ch-R-import.html#cb2390-4" tabindex="-1"></a>)</span>
<span id="cb2390-5"><a href="ch-R-import.html#cb2390-5" tabindex="-1"></a><span class="fu">excel_sheets</span>(<span class="st">&quot;students_all.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;students&quot;   &quot;project&quot;    &quot;attendance&quot;</code></pre>
<p><code>writexl</code> 패키지는 Excel 파일에 데이터를 저장하는 기능만을 제공한다. 만약 Excel 파일에 데이터와 함께 다양한 스타일을 같이 지정하고자 하면 <a href="https://ycphs.github.io/openxlsx/articles/Formatting.html"><code>openxlsx</code> 패키지</a>를 참고하지 바란다.</p>
</div>
</div>
<div id="sec-read-google-sheets" class="section level3 hasAnchor" number="12.2.2">
<h3><span class="header-section-number">12.2.2</span> Google Sheets에서 데이터 읽기<a href="ch-R-import.html#sec-read-google-sheets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Google Sheets에서 데이터를 읽어오는 방식은 Excel에서 데이터를 읽어오는 것과 유사하다.
그러나 Excel은 기본적으로 PC 환경의 SW이고 Google Sheets는 인터넷 환경에서의 서비스이기 때문에 차이점이 존재한다.</p>
<div id="googlesheets4-패키지" class="section level4 unnumbered hasAnchor">
<h4><code>googlesheets4</code> 패키지<a href="ch-R-import.html#googlesheets4-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Google Sheets에서 데이터를 읽고 쓰려면 <code>googlesheets4</code> 패키지가 필요하다.
이 패키지는 Google Sheets API v4의 <strong>R</strong> 인터페이스를 제공한다.
<code>googlesheet4</code> 패키지는 다음의 두 패키지에 의존하고 있다.</p>
<ul>
<li><code>gargle</code> 패키지: 250 여개의 Google API의 공통 기능에 대한 <strong>R</strong> 인터페이스를 제공한다. <code>googlesheets4</code>에서는 Oauth 등의 기능을 사용한다.</li>
<li><code>googledirve</code> 패키지: Google Drive API와 관련된 <strong>R</strong> 인터페이스를 제공한다.</li>
</ul>
<p>이 패키지는 <code>tidyverse</code> 패키지를 설치하였으면 설치가 되어 있을 것이다.
그렇지 않다면 다음 명령으로 설치를 한다.</p>
<div class="sourceCode" id="cb2392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2392-1"><a href="ch-R-import.html#cb2392-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;googlesheets4&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb2393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2393-1"><a href="ch-R-import.html#cb2393-1" tabindex="-1"></a><span class="fu">library</span>(googlesheets4)</span></code></pre></div>
</div>
<div id="워크시트-읽기" class="section level4 unnumbered hasAnchor">
<h4>워크시트 읽기<a href="ch-R-import.html#워크시트-읽기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>googlesheets4</code>로 Google Sheets의 시트에 접근하려면 디폴트로 사용자 인증을 진행한다.
만약 공개되어 있는 시트를 읽는 경우에는 Oauth를 사용하여 인증 과정을 거치지 않아도 된다.
<strong>R</strong>에서 불필요한 인증을 하지 않으려면 먼저 <code>gs4_deauth()</code> 함수를 호출한다.</p>
<div class="sourceCode" id="cb2394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2394-1"><a href="ch-R-import.html#cb2394-1" tabindex="-1"></a><span class="fu">gs4_deauth</span>()</span></code></pre></div>
<p><a href="https://docs.google.com/spreadsheets/d/1U6Cf_qEOhiR9AZqTqS3mbMF3zt2db48ZP5v3rkrAEJY/">Gapminder에서 제공하는 기대 수명과 1인당 GDP 데이터</a>에 접근해 보자.</p>
<p><code>read_sheet()</code> 함수는 Google Sheets 문서에서 데이터를 읽어들인다.
<code>read_sheet()</code>는 <code>range_read()</code>라고도 불리는데 두 함수는 동일한 함수이다.</p>
<ul>
<li><code>ss</code> 인수는 첫 번째 인수로 Google Sheets 문서를 지정한다. URL, ID 등을 입력받는다.</li>
<li><code>sheet</code> 인수는 읽을 워크시트를 지정한다. 이름, 위치 등으로 지정한다. <code>range</code> 인수에 워크시트가 지정되면 이 인수는 무시된다. 디폴트값은 문서의 첫 시트이다.</li>
<li><code>range</code> 인수는 Excel과 마찬가지로 셀 범위로 워크시트에서 읽어들일 데이터 범위를 지정한다. 디폴트 값은 비어있지 않은 모든 셀을 읽어들인다.</li>
<li><code>read_csv()</code>와 <code>read_excel()</code>처럼 <code>col_names</code>, <code>col_types</code>, <code>na</code>, <code>skip</code> 등의 인수를 가지고 있다. 자세한 정보는 <code>read_sheet()</code>에 대한 도움말을 참조한다.</li>
</ul>
<div class="sourceCode" id="cb2395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2395-1"><a href="ch-R-import.html#cb2395-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://docs.google.com/spreadsheets/d/1U6Cf_qEOhiR9AZqTqS3mbMF3zt2db48ZP5v3rkrAEJY/&quot;</span></span>
<span id="cb2395-2"><a href="ch-R-import.html#cb2395-2" tabindex="-1"></a>life_exp_africa <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(url)</span></code></pre></div>
<pre><code>✔ Reading from &quot;gapminder&quot;.</code></pre>
<pre><code>✔ Range &#39;Africa&#39;.</code></pre>
<div class="sourceCode" id="cb2398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2398-1"><a href="ch-R-import.html#cb2398-1" tabindex="-1"></a>life_exp_africa</span></code></pre></div>
<pre><code># A tibble: 624 × 6
   country continent  year lifeExp      pop gdpPercap
   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 Algeria Africa     1952    43.1  9279525     2449.
 2 Algeria Africa     1957    45.7 10270856     3014.
 3 Algeria Africa     1962    48.3 11000948     2551.
 4 Algeria Africa     1967    51.4 12760499     3247.
 5 Algeria Africa     1972    54.5 14760787     4183.
 6 Algeria Africa     1977    58.0 17152804     4910.
 7 Algeria Africa     1982    61.4 20033753     5745.
 8 Algeria Africa     1987    65.8 23254956     5681.
 9 Algeria Africa     1992    67.7 26298373     5023.
10 Algeria Africa     1997    69.2 29072015     4797.
# ℹ 614 more rows</code></pre>
<p><code>sheet</code> 인수를 지정하지 않았기 때문에 첫 번째 워크시트인 Africa 지역의 나라들의 기대수명(lifeExp)과 일인당GDP(gdpPercap) 등을 제공한다.</p>
<p>Google Sheets 문서의 URL은 다음의 구조로 되어 있다.</p>
<pre><code>https://docs.google.com/spreadsheets/d/문서ID/edit#gid=워크시트ID</code></pre>
<p>그러므로 다음처럼 URL을 참조하여 문서 ID로 데이터를 읽어올 수도 있다.</p>
<div class="sourceCode" id="cb2401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2401-1"><a href="ch-R-import.html#cb2401-1" tabindex="-1"></a>sheet_id <span class="ot">&lt;-</span> <span class="st">&quot;1U6Cf_qEOhiR9AZqTqS3mbMF3zt2db48ZP5v3rkrAEJY&quot;</span></span>
<span id="cb2401-2"><a href="ch-R-import.html#cb2401-2" tabindex="-1"></a>life_exp_asia <span class="ot">&lt;-</span> <span class="fu">read_sheet</span>(sheet_id, <span class="at">sheet=</span><span class="st">&quot;Asia&quot;</span>)</span></code></pre></div>
<pre><code>✔ Reading from &quot;gapminder&quot;.</code></pre>
<pre><code>✔ Range &#39;&#39;Asia&#39;&#39;.</code></pre>
<div class="sourceCode" id="cb2404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2404-1"><a href="ch-R-import.html#cb2404-1" tabindex="-1"></a>life_exp_asia</span></code></pre></div>
<pre><code># A tibble: 396 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 Afghanistan Asia       1952    28.8  8425333      779.
 2 Afghanistan Asia       1957    30.3  9240934      821.
 3 Afghanistan Asia       1962    32.0 10267083      853.
 4 Afghanistan Asia       1967    34.0 11537966      836.
 5 Afghanistan Asia       1972    36.1 13079460      740.
 6 Afghanistan Asia       1977    38.4 14880372      786.
 7 Afghanistan Asia       1982    39.9 12881816      978.
 8 Afghanistan Asia       1987    40.8 13867957      852.
 9 Afghanistan Asia       1992    41.7 16317921      649.
10 Afghanistan Asia       1997    41.8 22227415      635.
# ℹ 386 more rows</code></pre>
<p>Google Sheets에 대한 메타정보를 확인하려면 <code>gs4_get()</code> 함수를 사용한다.
이 함수는 Google Sheets 문서에 대한 정보, 워크시트에 대한 정보, 그리고 이름이 부여된 범위에 대한 정보를 제공한다.</p>
<div class="sourceCode" id="cb2406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2406-1"><a href="ch-R-import.html#cb2406-1" tabindex="-1"></a><span class="fu">gs4_get</span>(sheet_id)</span></code></pre></div>
<pre><code>
── &lt;googlesheets4_spreadsheet&gt; ─────────────────────────────────────────────────
 Spreadsheet name: &quot;gapminder&quot;                                 
               ID: 1U6Cf_qEOhiR9AZqTqS3mbMF3zt2db48ZP5v3rkrAEJY
           Locale: en_US                                       
        Time zone: America/Los_Angeles                         
      # of sheets: 5                                           
# of named ranges: 1                                           

── &lt;sheets&gt; ────────────────────────────────────────────────────────────────────
(Sheet name): (Nominal extent in rows x columns)
    &#39;Africa&#39;: 625 x 6
  &#39;Americas&#39;: 301 x 6
      &#39;Asia&#39;: 397 x 6
    &#39;Europe&#39;: 361 x 6
   &#39;Oceania&#39;: 25 x 6

── &lt;named ranges&gt; ──────────────────────────────────────────────────────────────
(Named range): (A1 range)        
     &#39;canada&#39;: &#39;Americas&#39;!A38:F49</code></pre>
<p>Google Sheets의 모든 워크시트의 이름만 확인하려면 <code>sheet_names()</code> 함수를 사용한다.</p>
<div class="sourceCode" id="cb2408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2408-1"><a href="ch-R-import.html#cb2408-1" tabindex="-1"></a><span class="fu">sheet_names</span>(sheet_id)</span></code></pre></div>
<pre><code>[1] &quot;Africa&quot;   &quot;Americas&quot; &quot;Asia&quot;     &quot;Europe&quot;   &quot;Oceania&quot; </code></pre>
<p><code>sheet_properties()</code> 함수를 사용하면 모든 워크시트의 속성을 확인할 수 있다.</p>
<div class="sourceCode" id="cb2410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2410-1"><a href="ch-R-import.html#cb2410-1" tabindex="-1"></a><span class="fu">sheet_properties</span>(sheet_id)</span></code></pre></div>
<pre><code># A tibble: 5 × 8
  name     index         id type  visible grid_rows grid_columns data  
  &lt;chr&gt;    &lt;int&gt;      &lt;int&gt; &lt;chr&gt; &lt;lgl&gt;       &lt;int&gt;        &lt;int&gt; &lt;list&gt;
1 Africa       0  780868077 GRID  TRUE          625            6 &lt;NULL&gt;
2 Americas     1   45759261 GRID  TRUE          301            6 &lt;NULL&gt;
3 Asia         2 1984823455 GRID  TRUE          397            6 &lt;NULL&gt;
4 Europe       3 1503562052 GRID  TRUE          361            6 &lt;NULL&gt;
5 Oceania      4 1796776040 GRID  TRUE           25            6 &lt;NULL&gt;</code></pre>
<p><code>gs4_get()</code> 함수 결과에서 보듯이 Gapmider의 문서에는 <code>"canada"</code>라는 이름으로 정의되어 있는 범위가 존재한다.
이 범위는 캐나다와 관련 데이터의 셀 범위를 가리키고 있다.
문서에 이미 정의된 범위는 <code>range</code> 인수에 해당 이름을 지정하여 가져올 수 있다.
이 범위에는 열 이름을 나타내는 머리행이 없으므로, <code>col_names</code> 인수에 열 이름을 지정해야 한다.</p>
<div class="sourceCode" id="cb2412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2412-1"><a href="ch-R-import.html#cb2412-1" tabindex="-1"></a><span class="fu">read_sheet</span>(sheet_id, <span class="at">range=</span><span class="st">&quot;canada&quot;</span>,</span>
<span id="cb2412-2"><a href="ch-R-import.html#cb2412-2" tabindex="-1"></a>           <span class="at">col_names=</span><span class="fu">names</span>(life_exp_africa))</span></code></pre></div>
<pre><code>✔ Reading from &quot;gapminder&quot;.</code></pre>
<pre><code>✔ Range &#39;canada&#39;.</code></pre>
<pre><code># A tibble: 12 × 6
   country continent  year lifeExp      pop gdpPercap
   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 Canada  Americas   1952    68.8 14785584    11367.
 2 Canada  Americas   1957    70.0 17010154    12490.
 3 Canada  Americas   1962    71.3 18985849    13462.
 4 Canada  Americas   1967    72.1 20819767    16077.
 5 Canada  Americas   1972    72.9 22284500    18971.
 6 Canada  Americas   1977    74.2 23796400    22091.
 7 Canada  Americas   1982    75.8 25201900    22899.
 8 Canada  Americas   1987    76.9 26549700    26627.
 9 Canada  Americas   1992    78.0 28523502    26343.
10 Canada  Americas   1997    78.6 30305843    28955.
11 Canada  Americas   2002    79.8 31902268    33329.
12 Canada  Americas   2007    80.7 33390141    36319.</code></pre>
<p>Gapminder의 문서는 모든 워크시트가 동일한 구조로 되어 있다. 그러므로 하나의 데이터로 모두 통합할 수 있다.
다음은 <code>sheet_names()</code>로 모든 워크시트의 이름 받은 후, 차례대로 워크시트를 읽어와 하나의 데이터프레임으로 병합한 예이다.</p>
<div class="sourceCode" id="cb2416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2416-1"><a href="ch-R-import.html#cb2416-1" tabindex="-1"></a>life_exp_all <span class="ot">&lt;-</span> <span class="fu">sheet_names</span>(sheet_id) <span class="sc">%&gt;%</span> </span>
<span id="cb2416-2"><a href="ch-R-import.html#cb2416-2" tabindex="-1"></a>  <span class="fu">lapply</span>(<span class="cf">function</span>(sheet) <span class="fu">read_sheet</span>(sheet_id, <span class="at">sheet=</span>sheet)) <span class="sc">%&gt;%</span> </span>
<span id="cb2416-3"><a href="ch-R-import.html#cb2416-3" tabindex="-1"></a>  <span class="fu">bind_rows</span>()</span></code></pre></div>
<pre><code>✔ Reading from &quot;gapminder&quot;.</code></pre>
<pre><code>✔ Range &#39;&#39;Africa&#39;&#39;.</code></pre>
<pre><code>✔ Reading from &quot;gapminder&quot;.</code></pre>
<pre><code>✔ Range &#39;&#39;Americas&#39;&#39;.</code></pre>
<pre><code>✔ Reading from &quot;gapminder&quot;.</code></pre>
<pre><code>✔ Range &#39;&#39;Asia&#39;&#39;.</code></pre>
<pre><code>✔ Reading from &quot;gapminder&quot;.</code></pre>
<pre><code>✔ Range &#39;&#39;Europe&#39;&#39;.</code></pre>
<pre><code>✔ Reading from &quot;gapminder&quot;.</code></pre>
<pre><code>✔ Range &#39;&#39;Oceania&#39;&#39;.</code></pre>
<div class="sourceCode" id="cb2427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2427-1"><a href="ch-R-import.html#cb2427-1" tabindex="-1"></a>life_exp_all</span></code></pre></div>
<pre><code># A tibble: 1,704 × 6
   country continent  year lifeExp      pop gdpPercap
   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 Algeria Africa     1952    43.1  9279525     2449.
 2 Algeria Africa     1957    45.7 10270856     3014.
 3 Algeria Africa     1962    48.3 11000948     2551.
 4 Algeria Africa     1967    51.4 12760499     3247.
 5 Algeria Africa     1972    54.5 14760787     4183.
 6 Algeria Africa     1977    58.0 17152804     4910.
 7 Algeria Africa     1982    61.4 20033753     5745.
 8 Algeria Africa     1987    65.8 23254956     5681.
 9 Algeria Africa     1992    67.7 26298373     5023.
10 Algeria Africa     1997    69.2 29072015     4797.
# ℹ 1,694 more rows</code></pre>
<p>이 데이터에서 2007 년도 데이터만 추출하여 일인당GDP, 기대수명, 인구수(pop)을 이용하여 버블 차트를 그려보자. 대륙별로 다른 색상의 버블이 되도록 하였고, 일인당GDP는 로그 스케일로 변환하였다.</p>
<div class="sourceCode" id="cb2429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2429-1"><a href="ch-R-import.html#cb2429-1" tabindex="-1"></a><span class="fu">filter</span>(life_exp_all, year<span class="sc">==</span><span class="dv">2007</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2429-2"><a href="ch-R-import.html#cb2429-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gdpPercap, lifeExp)) <span class="sc">+</span></span>
<span id="cb2429-3"><a href="ch-R-import.html#cb2429-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size=</span>pop, <span class="at">color=</span>continent)) <span class="sc">+</span></span>
<span id="cb2429-4"><a href="ch-R-import.html#cb2429-4" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label=</span>country), <span class="at">size=</span><span class="dv">2</span>, <span class="at">nudge_y=</span><span class="dv">1</span>, <span class="at">check_overlap=</span>T) <span class="sc">+</span> </span>
<span id="cb2429-5"><a href="ch-R-import.html#cb2429-5" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans=</span><span class="st">&quot;log10&quot;</span>) <span class="sc">+</span></span>
<span id="cb2429-6"><a href="ch-R-import.html#cb2429-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;일인당 GDP&quot;</span>, <span class="at">y=</span><span class="st">&quot;기대수명&quot;</span>, <span class="at">size=</span><span class="st">&quot;인구&quot;</span>, <span class="at">color=</span><span class="st">&quot;대륙&quot;</span>) <span class="sc">+</span></span>
<span id="cb2429-7"><a href="ch-R-import.html#cb2429-7" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="Rimport_files/figure-html/unnamed-chunk-60-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>마지막으로 한국 데이터만 필터링 하여 시간에 따라 어떻게 변화하였는지를 시각화해 보자.</p>
<div class="sourceCode" id="cb2430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2430-1"><a href="ch-R-import.html#cb2430-1" tabindex="-1"></a>life_exp_korea <span class="ot">&lt;-</span> life_exp_all <span class="sc">%&gt;%</span> </span>
<span id="cb2430-2"><a href="ch-R-import.html#cb2430-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Korea, Rep.&quot;</span>)</span>
<span id="cb2430-3"><a href="ch-R-import.html#cb2430-3" tabindex="-1"></a>life_exp_korea</span></code></pre></div>
<pre><code># A tibble: 12 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 Korea, Rep. Asia       1952    47.5 20947571     1031.
 2 Korea, Rep. Asia       1957    52.7 22611552     1488.
 3 Korea, Rep. Asia       1962    55.3 26420307     1536.
 4 Korea, Rep. Asia       1967    57.7 30131000     2029.
 5 Korea, Rep. Asia       1972    62.6 33505000     3031.
 6 Korea, Rep. Asia       1977    64.8 36436000     4657.
 7 Korea, Rep. Asia       1982    67.1 39326000     5623.
 8 Korea, Rep. Asia       1987    69.8 41622000     8533.
 9 Korea, Rep. Asia       1992    72.2 43805450    12104.
10 Korea, Rep. Asia       1997    74.6 46173816    15994.
11 Korea, Rep. Asia       2002    77.0 47969150    19234.
12 Korea, Rep. Asia       2007    78.6 49044790    23348.</code></pre>
<div class="sourceCode" id="cb2432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2432-1"><a href="ch-R-import.html#cb2432-1" tabindex="-1"></a><span class="fu">ggplot</span>(life_exp_korea, <span class="fu">aes</span>(gdpPercap, lifeExp)) <span class="sc">+</span></span>
<span id="cb2432-2"><a href="ch-R-import.html#cb2432-2" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color=</span>year)) <span class="sc">+</span></span>
<span id="cb2432-3"><a href="ch-R-import.html#cb2432-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size=</span>pop, <span class="at">color=</span>year)) <span class="sc">+</span></span>
<span id="cb2432-4"><a href="ch-R-import.html#cb2432-4" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;일인당 GDP&quot;</span>, <span class="at">y=</span><span class="st">&quot;기대수명&quot;</span>, <span class="at">size=</span><span class="st">&quot;인구&quot;</span>, <span class="at">color=</span><span class="st">&quot;조사년도&quot;</span>) <span class="sc">+</span></span>
<span id="cb2432-5"><a href="ch-R-import.html#cb2432-5" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="Rimport_files/figure-html/unnamed-chunk-62-1.png" width="60%" style="display: block; margin: auto;" /></p>
</div>
<div id="google-sheets에-데이터-쓰기" class="section level4 unnumbered hasAnchor">
<h4>Google Sheets에 데이터 쓰기<a href="ch-R-import.html#google-sheets에-데이터-쓰기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Google Sheets 문서에 데이터를 쓰려면 인증 절차를 거쳐야 한다.</p>
<ol style="list-style-type: decimal">
<li><code>gs4_auth()</code> 함수를 사용하여 인증을 시작한다.</li>
</ol>
<div class="sourceCode" id="cb2433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2433-1"><a href="ch-R-import.html#cb2433-1" tabindex="-1"></a><span class="fu">gs4_auth</span>()</span></code></pre></div>
<pre><code>! Using an auto-discovered, cached token.</code></pre>
<pre><code>  To suppress this message, modify your code or options to clearly consent to
  the use of a cached token.</code></pre>
<pre><code>  See gargle&#39;s &quot;Non-interactive auth&quot; vignette for more details:</code></pre>
<pre><code>  &lt;https://gargle.r-lib.org/articles/non-interactive-auth.html&gt;</code></pre>
<pre><code>ℹ The googlesheets4 package is using a cached token for &#39;mgmthw@gmail.com&#39;.</code></pre>
<ol start="2" style="list-style-type: decimal">
<li><code>gs4_auth()</code>를 실행하면 다음과 같은 메시지가 출력된다. (메시지는 버전에 따라 조금씩 다를 수 있다.)
OAuth 인증을 캐시 폴더에 저장하여 다음 번 실행 시에는 인증을 생략할지를 묻는 질문이다.</li>
</ol>
<pre><code>Is it OK to cache OAuth access credentials in the folder ~/.cache/gargle between R sessions?
1: Yes
2: No
Selection:</code></pre>
<p><code>Selection:</code>에 1을 입력하여 저장하든지, 2를 입력하여 항상 인증을 할지를 결정한다.</p>
<ol start="3" style="list-style-type: decimal">
<li><p>사용할 Google 계정을 선택하거나 아직 로그인이 되어 있지 않으면 Google 이메일 계정과 암호를 입력하여 인증을 진행한다. 이 과정은 Google에서 직접 수행되는 것으로 <strong>R</strong>에는 관련 정보가 저장되지 않는다. 로그인된 Google 계정이 오직 하나이면 이 과정은 생략될 수 있다.</p></li>
<li><p><code>Tidyverse API Packages 서비스 로그인</code>이 내 계정에 접근할 수 있는 권한을 줄 것인지를 묻는다. <code>계속</code>을 클릭하여 진행한다.</p></li>
<li><p><code>Tidyverse API Packages</code>가 내 계정의 Google Sheets의 문서를 수정하고 생성할 권한을 줄지를 묻는다. <code>write_sheet()</code> 함수가 여러분의 계정에 워크시트를 생성하거나 수정하려면 이 권한을 부여하여야 한다. 체크박스를 체크한 후 <code>계속</code>을 클릭한다.</p></li>
<li><p>그러면 인증이 끝났고 <strong>R</strong>로 돌아가라는 안내 페이지가 나타난다.</p></li>
</ol>
<p><code>write_sheet()</code> 함수는 데이터프레임의 데이터를 새로운 Google Sheets 문서의 워크시트에 저장하거나 기존의 워크시트의 내용을 덮어쓰기한다. <code>sheet_write()</code> 함수라고도 한다. 두 함수는 동일한 함수이다.</p>
<ul>
<li><code>data</code> 인수: 첫 번째 인수로 저장할 데이터프레임이 지정된다.</li>
<li><code>ss</code> 인수: Google Sheets 문서의 URL이나 문서 ID 등이 지정된다. 디폴트 값은 <code>NULL</code>로 임의로 파일 이름으로 데이터를 저장한 새로운 Google Sheets 문서가 생성된다.<br />
</li>
<li><code>sheet</code> 인수: Google Sheets 문서의 어느 워크시트에 데이터를 저장할지 지정한다. 워크시트의 이름이나 위치로 지정한다.</li>
</ul>
<p><code>write_sheet()</code> 함수는 자신이 데이터를 저장한 문서의 ID를 반환한다.
Gapmider의 데이터 중에서 한국 데이터만 새로운 Google Sheets 문서에 저장해보자.
가장 단순한 방법은 임의의 이름으로 새로운 Google Sheets 문서를 만들어 저장하는 것이다.</p>
<div class="sourceCode" id="cb2440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2440-1"><a href="ch-R-import.html#cb2440-1" tabindex="-1"></a>ss <span class="ot">&lt;-</span> <span class="fu">write_sheet</span>(life_exp_korea)</span></code></pre></div>
<pre><code>✔ Creating new Sheet: &quot;jovial-seagull&quot;.</code></pre>
<p>저장된 문서의 메타정보를 확인해 보자.</p>
<div class="sourceCode" id="cb2442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2442-1"><a href="ch-R-import.html#cb2442-1" tabindex="-1"></a><span class="fu">gs4_get</span>(ss)</span></code></pre></div>
<pre><code>
── &lt;googlesheets4_spreadsheet&gt; ─────────────────────────────────────────────────
Spreadsheet name: &quot;jovial-seagull&quot;                            
              ID: 1QtFJ9asNhXoZGHZ5txBpyeR_H-zvEAOv8c0hFAb-hm0
          Locale: ko_KR                                       
       Time zone: Etc/GMT                                     
     # of sheets: 1                                           

── &lt;sheets&gt; ────────────────────────────────────────────────────────────────────
    (Sheet name): (Nominal extent in rows x columns)
&#39;life_exp_korea&#39;: 13 x 6</code></pre>
<p>임의의 문서 이름이 부여되어 있고, 워크시트의 이름으로 데이터프레임의 변수명이 사용되었음을 볼 수 있다.
여러분의 구글 드라이브에 가보면 이 Google Sheets 문서를 확인할 수 있다.
여기서는 워크시트를 읽어서 데이터가 제대로 저장되었는지 확인해 보자.</p>
<div class="sourceCode" id="cb2444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2444-1"><a href="ch-R-import.html#cb2444-1" tabindex="-1"></a><span class="fu">read_sheet</span>(ss)</span></code></pre></div>
<pre><code>✔ Reading from &quot;jovial-seagull&quot;.</code></pre>
<pre><code>✔ Range &#39;life_exp_korea&#39;.</code></pre>
<pre><code># A tibble: 12 × 6
   country     continent  year lifeExp      pop gdpPercap
   &lt;chr&gt;       &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
 1 Korea, Rep. Asia       1952    47.5 20947571     1031.
 2 Korea, Rep. Asia       1957    52.7 22611552     1488.
 3 Korea, Rep. Asia       1962    55.3 26420307     1536.
 4 Korea, Rep. Asia       1967    57.7 30131000     2029.
 5 Korea, Rep. Asia       1972    62.6 33505000     3031.
 6 Korea, Rep. Asia       1977    64.8 36436000     4657.
 7 Korea, Rep. Asia       1982    67.1 39326000     5623.
 8 Korea, Rep. Asia       1987    69.8 41622000     8533.
 9 Korea, Rep. Asia       1992    72.2 43805450    12104.
10 Korea, Rep. Asia       1997    74.6 46173816    15994.
11 Korea, Rep. Asia       2002    77.0 47969150    19234.
12 Korea, Rep. Asia       2007    78.6 49044790    23348.</code></pre>
<p>임의의 문서명과 워크시트명이 아니라 원하는 이름으로 Google Sheets 문서를 만드려면 <code>gs4_create()</code> 함수를 사용한다.
<code>name</code> 인수에 문서명을 <code>sheets</code> 인수에 워크시트명을 지정한다.
(워크시트의 이름을 지정하는 인수가 지금까지 사용했던 <code>sheet</code>가 아니라 <code>sheets</code>임에 주의한다. 여러 워크시트 명을 전달할 수 있기 때문에 복수형으로 인수 이름이 지어졌다.)</p>
<div class="sourceCode" id="cb2448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2448-1"><a href="ch-R-import.html#cb2448-1" tabindex="-1"></a>ss <span class="ot">&lt;-</span> <span class="fu">gs4_create</span>(<span class="at">name=</span><span class="st">&quot;기대수명&quot;</span>, <span class="at">sheets=</span><span class="st">&quot;Korea&quot;</span>)</span></code></pre></div>
<pre><code>✔ Creating new Sheet: &quot;기대수명&quot;.</code></pre>
<p>새로 만들어진 문서에 한국 데이터를 저장해 보자.</p>
<div class="sourceCode" id="cb2450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2450-1"><a href="ch-R-import.html#cb2450-1" tabindex="-1"></a><span class="fu">write_sheet</span>(life_exp_korea, <span class="at">ss=</span>ss, <span class="at">sheet=</span><span class="st">&quot;Korea&quot;</span>)</span></code></pre></div>
<pre><code>✔ Writing to &quot;기대수명&quot;.</code></pre>
<pre><code>✔ Writing to sheet &#39;Korea&#39;.</code></pre>
<p>이 외에도 워크시트에 행을 추가하거나 복사할 수 있으며, 워크시트와 범위를 지우는 등의 다양한 작업을 할 수 있다.
관련된 내용은 도움말이나 <a href="https://googlesheets4.tidyverse.org/reference/index.html"><code>googlesheets4</code> 문서</a>를 참조한다.</p>
</div>
</div>
</div>
<div id="sec-import-databse" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> 데이터베이스에서 데이터 가져오기<a href="ch-R-import.html#sec-import-databse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>추후 공개 예정</p>
</div>
<div id="sec-web-scrapping" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> 웹 스크래핑 (web scrapping): 웹 사이트에서 데이터 가져오기<a href="ch-R-import.html#sec-web-scrapping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>웹 스크래핑은 웹 페이지에서 필요한 정보를 추출하는 것을 의미한다.
일부 웹 사이트는 공개 API(Application Programming Interface)를 이용하여 웹 사이트의 데이터를 JSON이나 XML 등의 구조화된 형식으로 제공하기도 한다.
공개 API를 사용하여 웹 사이트에서 정보를 획득하는 방법은 <a href="ch-R-import.html#sec-public-api">12.5</a> 절에서 다룰 것이다.
그러나 대부분의 웹 사이트는 별도의 API를 제공하지 않으므로 웹 페이지에 나타난 정보를 웹 스크래핑 방법을 사용하여 직접 추출해야 한다.</p>
<div id="웹-스크래핑-시-주의-사항" class="section level4 unnumbered hasAnchor">
<h4>웹 스크래핑 시 주의 사항<a href="ch-R-import.html#웹-스크래핑-시-주의-사항" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>타인의 웹 사이트에서 데이터를 수집하는 행위는 윤리적, 법적 문제를 만들 수 있다.
공개되어 있고, 개인정보가 아니고, 사실과 관련된 데이터를 수집하는 것은 일반적으로 법적 문제에 결부될 확률을 낮춘다.
특히 학술, 비영리적 목적으로 위와 같은 정보를 수집하는 것은 대부분 법적인 문제의 소지가 낮다.
그러나 이는 어디까지나 일반적인 지침이지 확립된 규칙은 아니다.
만약 데이터 수집이 법적, 윤리적 문제를 발생시킬 가능성이 있다고 판단된다면 전문가의 확인을 받는 것이 좋다.
특히 공개되지 않고 로그인이 필요한 서비스에서의 데이터 수집이나, 개인정보가 포함된 정보의 수집, 저작권에 위배될 만한 수준의 정보의 수집하여 이용하고자 할 때는, 사이트의 운영 방침 등을 확인하는 것이 좋다.</p>
<p>또한 웹 스크래핑을 할 때 웹 사이트의 운영에 최대한 피해를 주지 않아야 한다.
다량의 웹 페이지에서 데이터를 수집하는 것은 웹 사이트에 많은 부하를 줄 수 있다.
그러므로 연속적으로 여러 웹 페이지에서 데이터를 수집할 때는, 수집 사이에 일정한 시간 간격으로 수집을 중지하는 시간이 필요하다.</p>
</div>
<div id="rvest-패키지" class="section level4 unnumbered hasAnchor">
<h4><code>rvest</code> 패키지<a href="ch-R-import.html#rvest-패키지" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>rvest</code> 패키지는 웹페이지에서 데이터를 스크래핑하게 도와준다.
<code>tidyverse</code> 패키지를 설치하였으면 이 패키지가 이미 설치되었을 것이다.
만약 설치되어 있지 않다면 다음 명령으로 설치를 한다.</p>
<div class="sourceCode" id="cb2453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2453-1"><a href="ch-R-import.html#cb2453-1" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;rvest&quot;</span>)</span></code></pre></div>
<p><code>rvest</code> 패키지는 <code>tidyverse</code>의 핵심 패키지가 아니므로 <code>tidyverse</code> 패키지와는 별도로 메모리에 적재해야 한다.</p>
<div class="sourceCode" id="cb2454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2454-1"><a href="ch-R-import.html#cb2454-1" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code></pre></div>
<pre><code>
다음의 패키지를 부착합니다: &#39;rvest&#39;</code></pre>
<pre><code>The following object is masked from &#39;package:readr&#39;:

    guess_encoding</code></pre>
</div>
<div id="html-기초" class="section level4 unnumbered hasAnchor">
<h4>HTML 기초<a href="ch-R-import.html#html-기초" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>모든 웹 페이지는 HTML(HyperText Markup Language)이라는 언어로 만들어진다.
다음은 매우 단순한 웹 페이지를 표현하는 HTML 문서를 보여준다.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;초간단 웹페이지&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1 id=&quot;first&quot;&gt;단순한 웹 페이지&lt;/h1&gt;
    &lt;p class=&quot;plain&quot;&gt;
      요즘에는 이렇게 간단한 웹 페이지는 &lt;b&gt;실습&lt;/b&gt; 아니면 만들지 않는다.
      다음 그림은 &lt;i&gt;Copilot&lt;/i&gt;에서 생성한 &lt;b&gt;HTML&lt;/b&gt; 관련 이미지이다.
    &lt;/p&gt;
    &lt;img src=&quot;img/html.png&quot; width=300 height=250&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><a href="http://scrap-examples.netlify.app/simple.html" target="_blank">이 HTML 문서로 구현된 웹 페이지</a>를 확인하려면 링크를 클릭한다.</p>
<p>HTML 문서는 다음 구조를 가진다.</p>
<ul>
<li>HTML 문서는 태그(tags) 또는 요소(elements) 또는 노드(nodes)들로 계층적으로 구성된다.</li>
<li>태그는 <code>&lt;태그명&gt;</code>으로 시작하여 <code>&lt;\태그명&gt;</code>으로 끝난다.
<ul>
<li>위의 예에서 최상위 요소는 <code>&lt;html&gt;</code>요소이다.</li>
<li><code>&lt;html&gt;</code> 요소는 <code>&lt;head&gt;</code>와 <code>&lt;body&gt;</code>라는 두 자식 요소(하위 요소)를 가진다.</li>
<li><code>&lt;head&gt;</code> 요소는 HTML 문서에 대한 메타정보를 저장한다. 대표적인 예가 브라우저 상단에 표시되는 웹 문서의 제목과 동적인 웹 문서를 만들기 위해서 사용되는 자바스크립트 등이 포함된다.</li>
<li><code>&lt;body&gt;</code> 요소에는 웹 브라우저에서 표현되는 컨텐츠들이 포함된다.</li>
</ul></li>
<li><code>&lt;body&gt;</code> 요소 아래에는 웹 문서에 볼 수 있는 다양한 블록 요소들이 정의된다.
<ul>
<li>위의 예에서는 <code>&lt;body&gt;</code> 요소는 제목을 나타내는 <code>&lt;h1&gt;</code> 요소, 문단을 나타내는 <code>&lt;p&gt;</code> 요소를 자식 요소로 포함한다.</li>
<li>블록 요소 아래에 또 다른 블록 요소들이 포함될 수 있으며, <code>&lt;b&gt;</code>, <code>&lt;i&gt;</code>, <code>&lt;a&gt;</code> 처럼 텍스트의 형식을 등을 지정하는 인라인(inline) 요소들도 포함될 수 있다.</li>
<li>블록 요소들은 새로운 블록이 시작될 때 새로운 줄에서 시작되지만 인라인 요소들은 줄바꿈 되지 않는다.</li>
</ul></li>
<li>태그들은 태그의 시작과 끝 사이에 텍스트 등의 컨텐츠를 포함할 수 있다.</li>
<li>태그에는 속성(attributes)가 정의될 수 있다.
<ul>
<li>속성은 시작 태그에 <code>속성이름=속성값</code>의 형식으로 정의된다.</li>
<li>위의 예에서는 <code>&lt;h1&gt;</code> 태그에 <code>id</code>라는 속성이, <code>&lt;img&gt;</code> 태그에 <code>src</code> 등의 속성이 정의되어 있다.</li>
</ul></li>
<li><code>id</code>와 <code>class</code> 속성은 매우 중요한 속성인데, 웹 페이지의 스타일을 지정하는 CSS(Cascading Style Sheets)를 사용하여 특정 <code>id</code>와 <code>class</code>의 요소의 스타일을 지정할 수 있기 때문이다.
<ul>
<li><code>id</code> 속성은 요소에 유일한 값이 지정된다. 모든 요소에 <code>id</code> 속성이 지정되는 것은 아니다.</li>
<li><code>class</code> 속성은 동일한 종류의 스타일을 공유하는 여러 요소들에게 같은 값이 지정된다. 모든 요소에 <code>class</code> 속성이 지정되는 것은 아니다.</li>
</ul></li>
</ul>
</div>
<div id="html-문서-가져오기" class="section level4 unnumbered hasAnchor">
<h4>HTML 문서 가져오기<a href="ch-R-import.html#html-문서-가져오기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><code>rvest</code> 패키지의 <code>read_html()</code> 함수는 웹 페이지를 <strong>R</strong>로 가져온다.
첫 번째 인수로 웹 페이지의 유일한 주소인 URL을 지정해 준다.
URL은 웹 브라우저의 주소창에 나타나는 문자열이다.
앞의 단순한 웹 페이지의 URL로 페이지를 가져오자.</p>
<div class="sourceCode" id="cb2458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2458-1"><a href="ch-R-import.html#cb2458-1" tabindex="-1"></a>html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;https://scrap-examples.netlify.app/simple.html&quot;</span>)</span>
<span id="cb2458-2"><a href="ch-R-import.html#cb2458-2" tabindex="-1"></a>html</span></code></pre></div>
<pre><code>{html_document}
&lt;html&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8 ...
[2] &lt;body&gt;\r\n    &lt;h1 id=&quot;first&quot;&gt;단순한 웹 페이지&lt;/h1&gt;\r\n    &lt;p class=&quot;plain&quot;&gt;\r\n  ...</code></pre>
<p><code>read_html()</code> 함수는 <code>xml_document</code> 객체로 HTML 문서의 정보를 반환한다. <code>xml_document</code> 클래스는 <code>rvest</code>가 의존하고 있는 <code>xml2</code> 패키지에 정의된 자료형이다.
반환된 정보에서 <code>&lt;html&gt;</code> 요소가 이 문서의 최상위 요소임을 보여준다.
그리고 그 아래 두 요소가 있고 각각 <code>&lt;head&gt;</code>와 <code>&lt;body&gt;</code> 요소라는 것을 보여준다.</p>
</div>
<div id="html-요소-찾기" class="section level4 unnumbered hasAnchor">
<h4>HTML 요소 찾기<a href="ch-R-import.html#html-요소-찾기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>일반적으로 HTML 문서는 매우 복잡한 계층 구조를 가지고 있으므로 내가 원하는 정보를 가지고 있는 요소만 뽑아내는 것이 쉽지 않다.
웹 스크래핑에서는 특정한 요소를 지정하기 위하여 CSS 선택자(selectors)를 사용한다.
CSS 선택자는 원래 웹 페이지의 특정 요소를 지정하여 특정한 스타일을 적용하기 위해 사용된다.
매우 정밀하게 페이지 내의 요소를 정의해야 하기 때문에 CSS 선택자를 잘 사용하면 대부분의 경우 내가 원하는 요소를 정확하게 지정할 수 있다.</p>
<p>CSS 선택자는 핵심적으로 다음 세 가지 방식으로 특정한 요소를 지정한다.</p>
<ul>
<li><code>태그명</code>으로 요소 지정: 예를 들어 <code>p</code>는 <code>&lt;p&gt;</code> 요소를 지정하기 위하여</li>
<li><code>.클래스명</code>으로 요소 지정: 예를 들어 <code>.plain</code>는 <code>class=plain</code> 속성을 가진 모든 요소를 지정하기 위하여 사용된다.</li>
<li><code>#ID</code>로 요소 지정: 예를 들어 <code>#first</code>는 <code>id=first</code> 속성을 가진 요소를 지정하기 위하여 사용된다.</li>
</ul>
<p>CSS 선택자는 이 세가지 방식을 자유롭게 조합하여 정밀하게 특정한 요소를 지정할 수 있다.
이에 대해서는 나중에 논의하기로 한다.</p>
<p><code>html_elements()</code>는 CSS 선택자와 매칭되는 모든 요소를 반환한다.
다음은 최상위의 <code>&lt;html&gt;</code> 요소 아래에 있는 모든 <code>&lt;p&gt;</code> 요소를 찾는 예이다.</p>
<div class="sourceCode" id="cb2460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2460-1"><a href="ch-R-import.html#cb2460-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;p&quot;</span>)</span></code></pre></div>
<pre><code>{xml_nodeset (1)}
[1] &lt;p class=&quot;plain&quot;&gt;\r\n      요즘에는 이렇게 간단한 웹 페이지는 &lt;b&gt;실습&lt;/b&gt; 아니면 만들지 않는다.\r\n ...</code></pre>
<p>다음은 최상위의 <code>&lt;html&gt;</code> 요소 아래에 있는 모든 <code>&lt;b&gt;</code> 요소를 찾는 예이다.</p>
<div class="sourceCode" id="cb2462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2462-1"><a href="ch-R-import.html#cb2462-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;b&quot;</span>)</span></code></pre></div>
<pre><code>{xml_nodeset (2)}
[1] &lt;b&gt;실습&lt;/b&gt;
[2] &lt;b&gt;HTML&lt;/b&gt;</code></pre>
<p>이번에는 <code>class</code> 속성이 <code>"plain"</code>인 모든 요소를 찾는 예이다.</p>
<div class="sourceCode" id="cb2464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2464-1"><a href="ch-R-import.html#cb2464-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;.plain&quot;</span>)</span></code></pre></div>
<pre><code>{xml_nodeset (1)}
[1] &lt;p class=&quot;plain&quot;&gt;\r\n      요즘에는 이렇게 간단한 웹 페이지는 &lt;b&gt;실습&lt;/b&gt; 아니면 만들지 않는다.\r\n ...</code></pre>
<p>마지막으로 <code>id</code> 속성이 <code>"first"</code>인 모든 요소를 찾는 예이다.</p>
<div class="sourceCode" id="cb2466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2466-1"><a href="ch-R-import.html#cb2466-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;#first&quot;</span>)</span></code></pre></div>
<pre><code>{xml_nodeset (1)}
[1] &lt;h1 id=&quot;first&quot;&gt;단순한 웹 페이지&lt;/h1&gt;</code></pre>
<p><code>html_elements()</code>와는 조금 다른 기능을 하는 <code>html_element()</code>라는 함수도 있다. (복수를 의미하는 s가 없다.)
이 함수는 최상위 노드에서 매칭되는 요소를 오직 하나만 반환한다.
만약 매칭되는 요소가 여러 개가 있으면 첫 번째로 매칭되는 요소를 반환한다.</p>
<div class="sourceCode" id="cb2468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2468-1"><a href="ch-R-import.html#cb2468-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">&quot;b&quot;</span>)</span></code></pre></div>
<pre><code>{html_node}
&lt;b&gt;</code></pre>
<p>만약 최상위 요소가 여러 개이면 <code>html_element()</code>는 입력된 최상위 요소별로 매칭되는 하나의 요소를 반환하다.
만약 매칭되는 요소가 없으면 <code>NA</code>라는 결측치를 반환한다.
다음은 단순한 웹 페이지에는 포함되지 않은 순서 없는 목록을 나타내는 <code>&lt;ul&gt;</code> 요소를 <code>html_element()</code>로 찾는 예이다.</p>
<div class="sourceCode" id="cb2470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2470-1"><a href="ch-R-import.html#cb2470-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">&quot;ul&quot;</span>)</span></code></pre></div>
<pre><code>{xml_missing}
&lt;NA&gt;</code></pre>
<p><code>html_elements()</code>는 어떠한 요소도 매칭이 되지 않으면 무엇을 반환할까?</p>
<div class="sourceCode" id="cb2472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2472-1"><a href="ch-R-import.html#cb2472-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;ul&quot;</span>)</span></code></pre></div>
<pre><code>{xml_nodeset (0)}</code></pre>
<p>해당되는 요소가 없으면 <code>html_elements()</code> 함수는 길이가 0인 벡터를 반환한다.
두 함수의 이러한 차이는 여러 요소에서 데이터를 추출할 때 매우 중요한 차이를 만든다.
이 두 함수의 쓰임새의 차이를 확인하기 위하여 다음 예를 살펴보자.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;목록 웹페이지&lt;/title&gt;
    &lt;link href=&quot;css/scrap.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;/&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;목록이 있는 웹페이지&lt;/h1&gt;
    &lt;p&gt;다음은 최근 대한민국의 4 명의 대통령에 대한 목록이다.&lt;/p&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;b&gt;이명박&lt;/b&gt; &lt;i&gt;17대&lt;/i&gt; 대통령의 재임기간은 &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;이다.&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;박근혜&lt;/b&gt; &lt;i&gt;18대&lt;/i&gt; 대통령의 재임기간은 &lt;span class=&quot;period&quot;&gt;1475일&lt;/span&gt;이다.&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;문재인&lt;/b&gt; &lt;i&gt;19대&lt;/i&gt; 대통령의 재임기간은 &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;이다.&lt;/li&gt;
      &lt;li&gt;&lt;b&gt;윤석열&lt;/b&gt; &lt;i&gt;20대&lt;/i&gt; 대통령은 현재 재임 중이다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
<p><a href="http://scrap-examples.netlify.app/list.html" target="_blank">이 HTML 문서로 구현된 웹 페이지</a>를 확인하려면 링크를 클릭한다.</p>
<p>이 웹 페이지는 목록을 가지고 있고 목록의 내용 중 <code>class=period</code>인 요소에 다음과 같은 CSS 스타일이 적용되어 있다.</p>
<pre><code>.period {
  color: purple;
  background-color: lightyellow;
}</code></pre>
<p>먼저 이 웹 페이지를 가져온 후 목록의 항목을 나타내는 <code>&lt;li&gt;</code> 요소를 모두 추출해 보자.</p>
<div class="sourceCode" id="cb2476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2476-1"><a href="ch-R-import.html#cb2476-1" tabindex="-1"></a>html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(<span class="st">&quot;http://scrap-examples.netlify.app/list.html&quot;</span>)  </span>
<span id="cb2476-2"><a href="ch-R-import.html#cb2476-2" tabindex="-1"></a>presidents <span class="ot">&lt;-</span> html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;li&quot;</span>)</span>
<span id="cb2476-3"><a href="ch-R-import.html#cb2476-3" tabindex="-1"></a>presidents</span></code></pre></div>
<pre><code>{xml_nodeset (4)}
[1] &lt;li&gt;\n&lt;b&gt;이명박&lt;/b&gt; &lt;i&gt;17대&lt;/i&gt; 대통령의 재임기간은 &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;이 ...
[2] &lt;li&gt;\n&lt;b&gt;박근혜&lt;/b&gt; &lt;i&gt;18대&lt;/i&gt; 대통령의 재임기간은 &lt;span class=&quot;period&quot;&gt;1475일&lt;/span&gt;이 ...
[3] &lt;li&gt;\n&lt;b&gt;문재인&lt;/b&gt; &lt;i&gt;19대&lt;/i&gt; 대통령의 재임기간은 &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;이 ...
[4] &lt;li&gt;\n&lt;b&gt;윤석렬&lt;/b&gt; &lt;i&gt;20대&lt;/i&gt; 대통령은 현재 재임 중이다.&lt;/li&gt;</code></pre>
<p>목록 항목에서 대통령의 이름을 추출해 보자.
항목이 여러 개이고 항목별로 대통령의 이름을 하나씩 추출해야 하므로 <code>html_element()</code> 함수의 사용이 적절하다.</p>
<div class="sourceCode" id="cb2478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2478-1"><a href="ch-R-import.html#cb2478-1" tabindex="-1"></a>name <span class="ot">&lt;-</span> presidents <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">&quot;b&quot;</span>)</span>
<span id="cb2478-2"><a href="ch-R-import.html#cb2478-2" tabindex="-1"></a>name</span></code></pre></div>
<pre><code>{xml_nodeset (4)}
[1] &lt;b&gt;이명박&lt;/b&gt;
[2] &lt;b&gt;박근혜&lt;/b&gt;
[3] &lt;b&gt;문재인&lt;/b&gt;
[4] &lt;b&gt;윤석렬&lt;/b&gt;</code></pre>
<p>다음으로 대통령의 취임 순서와 재임기간 데이터를 추출해 보자.</p>
<div class="sourceCode" id="cb2480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2480-1"><a href="ch-R-import.html#cb2480-1" tabindex="-1"></a>orders <span class="ot">&lt;-</span> presidents <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">&quot;i&quot;</span>)</span>
<span id="cb2480-2"><a href="ch-R-import.html#cb2480-2" tabindex="-1"></a>orders</span></code></pre></div>
<pre><code>{xml_nodeset (4)}
[1] &lt;i&gt;17대&lt;/i&gt;
[2] &lt;i&gt;18대&lt;/i&gt;
[3] &lt;i&gt;19대&lt;/i&gt;
[4] &lt;i&gt;20대&lt;/i&gt;</code></pre>
<div class="sourceCode" id="cb2482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2482-1"><a href="ch-R-import.html#cb2482-1" tabindex="-1"></a>periods <span class="ot">&lt;-</span> presidents <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">&quot;.period&quot;</span>)</span>
<span id="cb2482-2"><a href="ch-R-import.html#cb2482-2" tabindex="-1"></a>periods</span></code></pre></div>
<pre><code>{xml_nodeset (4)}
[1] &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;
[2] &lt;span class=&quot;period&quot;&gt;1475일&lt;/span&gt;
[3] &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;
[4] NA</code></pre>
<p>현 대통령은 재임 중이므로 재임기간 정보가 없다. 그러므로 해당 요소가 없는 항목은 결측치(<code>NA</code>)로 처리되었다.
만약 이 경우에서 <code>html_elements()</code>를 사용하면 어떻게 될까?</p>
<div class="sourceCode" id="cb2484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2484-1"><a href="ch-R-import.html#cb2484-1" tabindex="-1"></a>presidents <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;.period&quot;</span>)</span></code></pre></div>
<pre><code>{xml_nodeset (3)}
[1] &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;
[2] &lt;span class=&quot;period&quot;&gt;1475일&lt;/span&gt;
[3] &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;</code></pre>
<p>위의 결과에서 보듯이 해당 요소가 없으면 추출되지 않는 것을 볼 수 있다. 만약 한 항목에 <code>class=period</code>인 요소가 2 개가 있었다면 이 두 요소가 모두 추출되었을 것이다.
그렇기 때문에 앞의 대통령의 이름과 취임순서와 개수와 순서가 맞지 않으므로 표 형식의 데이터로 정리하기 어려울 것이다.
그러므로 <code>html_eleents()</code>는 특정 조건에 맞는 모든 요소를 찾을 때 사용하고, <code>html_element()</code>는 추출된 최상위 요소에서 오직 한 개의 결과만을 얻고자 할 때 사용한다.</p>
</div>
<div id="텍스트-추출과-처리" class="section level4 hasAnchor" number="12.4.0.1">
<h4><span class="header-section-number">12.4.0.1</span> 텍스트 추출과 처리<a href="ch-R-import.html#텍스트-추출과-처리" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>앞의 예에서 HTML에서 추출된 요소들은 HTML 태그를 포함하고 있다.
HTML 요소에서 태그를 제외하고 텍스트만 추출하고자 하면 <code>html_text2()</code> 함수를 사용한다.
<code>html_text()</code> 함수도 텍스트를 추출하지만, 이 함수는 태그 안의 텍스트를 그대로 추출하는 반면, <code>html_text2()</code>는 태그 안의 하위 태그들을 고려하여 적절한 텍스트 형식으로 변환하여 추출해 준다.
그렇기 때문에 <code>html_text2()</code>는 <code>html_text()</code>보다 처리시간이 더 길지만 일반적으로 사용자가 원하는 형태로 텍스트를 추출해 준다.</p>
<div class="sourceCode" id="cb2486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2486-1"><a href="ch-R-import.html#cb2486-1" tabindex="-1"></a>name <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>()</span></code></pre></div>
<pre><code>[1] &quot;이명박&quot; &quot;박근혜&quot; &quot;문재인&quot; &quot;윤석렬&quot;</code></pre>
<div class="sourceCode" id="cb2488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2488-1"><a href="ch-R-import.html#cb2488-1" tabindex="-1"></a>orders <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>()</span></code></pre></div>
<pre><code>[1] &quot;17대&quot; &quot;18대&quot; &quot;19대&quot; &quot;20대&quot;</code></pre>
<div class="sourceCode" id="cb2490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2490-1"><a href="ch-R-import.html#cb2490-1" tabindex="-1"></a>periods <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>()</span></code></pre></div>
<pre><code>[1] &quot;1827일&quot; &quot;1475일&quot; &quot;1827일&quot; NA      </code></pre>
<p>추출된 텍스트로 <code>tibble</code> 형식의 데이터프레임을 만들어 보자.</p>
<div class="sourceCode" id="cb2492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2492-1"><a href="ch-R-import.html#cb2492-1" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb2492-2"><a href="ch-R-import.html#cb2492-2" tabindex="-1"></a>  <span class="at">name=</span>name <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb2492-3"><a href="ch-R-import.html#cb2492-3" tabindex="-1"></a>  <span class="at">n=</span>orders <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb2492-4"><a href="ch-R-import.html#cb2492-4" tabindex="-1"></a>  <span class="at">period=</span>periods <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>()</span>
<span id="cb2492-5"><a href="ch-R-import.html#cb2492-5" tabindex="-1"></a>)</span></code></pre></div>
<pre><code># A tibble: 4 × 3
  name   n     period
  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; 
1 이명박 17대  1827일
2 박근혜 18대  1475일
3 문재인 19대  1827일
4 윤석렬 20대  &lt;NA&gt;  </code></pre>
<p>그런데 이 데이터는 취임순서와 재임기간이 모두 문자로 처리되어 있기 때문에, 수치로서 처리할 수 없으므로 평균 등을 구할 수 없다.</p>
<p><code>tidyverse</code>에 포함되어 있는 <code>readr</code> 패키지는 문자열을 다양한 자료형으로 변환하는 함수를 가지고 있다.
<a href="ch-R-import.html#sec-read-csv">12.1</a> 절에서 파일을 읽을 때 열의 자료형을 지정하여 열의 데이터를 적절한 자료형으로 변환할 수 있다고 하였다.
사실 이 변환 작업에는 다음과 같은 함수들이 이용된다.</p>
<ul>
<li><code>parse_number()</code>: 텍스트에서 숫자만 추출하여 수치형으로 변환한다.</li>
<li><code>parse_logical()</code>: 텍스트를 논리값으로 변환한다.</li>
<li><code>parse_factor()</code>: 텍스트에서 유일한 값만 추출하여 요소(factors)로 변환한다.</li>
<li><code>parse_date(), parse_time(), parse_datetime()</code>: 텍스트를 날짜, 시간, 날짜와 시간 형식으로 변환한다. 텍스트에 표현된 날짜와 시간 형식을 지정할 수 있다.</li>
</ul>
<div class="sourceCode" id="cb2494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2494-1"><a href="ch-R-import.html#cb2494-1" tabindex="-1"></a>orders <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>() <span class="sc">%&gt;%</span> <span class="fu">parse_number</span>()</span></code></pre></div>
<pre><code>[1] 17 18 19 20</code></pre>
<p>그러므로 다음처럼 텍스트를 수치로 변환하여 데이터프레임을 만들 수 있다.</p>
<div class="sourceCode" id="cb2496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2496-1"><a href="ch-R-import.html#cb2496-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb2496-2"><a href="ch-R-import.html#cb2496-2" tabindex="-1"></a>  <span class="at">name=</span>name <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb2496-3"><a href="ch-R-import.html#cb2496-3" tabindex="-1"></a>  <span class="at">n=</span>orders <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>() <span class="sc">%&gt;%</span> <span class="fu">parse_number</span>(),</span>
<span id="cb2496-4"><a href="ch-R-import.html#cb2496-4" tabindex="-1"></a>  <span class="at">period=</span>periods <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>() <span class="sc">%&gt;%</span> <span class="fu">parse_number</span>()</span>
<span id="cb2496-5"><a href="ch-R-import.html#cb2496-5" tabindex="-1"></a>)</span>
<span id="cb2496-6"><a href="ch-R-import.html#cb2496-6" tabindex="-1"></a>df</span></code></pre></div>
<pre><code># A tibble: 4 × 3
  name       n period
  &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 이명박    17   1827
2 박근혜    18   1475
3 문재인    19   1827
4 윤석렬    20     NA</code></pre>
<p>재임기간이 수치로 저장되었기 때문에 다음처럼 재임기간의 평균을 구할 수 있다.</p>
<div class="sourceCode" id="cb2498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2498-1"><a href="ch-R-import.html#cb2498-1" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>period, <span class="at">na.rm=</span>T)</span></code></pre></div>
<pre><code>[1] 1709.667</code></pre>
</div>
<div id="복잡-선택자로-웹-문서에서-요소-지정하기" class="section level4 unnumbered hasAnchor">
<h4>복잡 선택자로 웹 문서에서 요소 지정하기<a href="ch-R-import.html#복잡-선택자로-웹-문서에서-요소-지정하기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>현실의 웹 문서는 지금까지 보았던 단순한 형식보다 훨씬 더 복잡하다.
동일한 태그, 클래스가 여러 군데에서 다른 의미로 사용될 수 있다.
그러므로 내가 원하는 정보만 정확하게 지정하는 것이 쉬운 일이 아니다.</p>
<p>복잡한 웹 문서에서 원하는 요소만 지정하려면 CSS 선택자에 대한 더 심화된 이해와 관련된 도구의 사용법을 학습하여야 한다.</p>
<p>지금까지 <code>태그</code>, <code>.클래스</code>, <code>#ID</code> 등의 기본 선택자를 사용하여 요소를 지정하는 방법을 살펴보았다.
이 외에도 요소를 지정하는 두 가지 기본 선택자가 더 있다.</p>
<ul>
<li><code>[속성]</code> 선택자는 특정 속성이 있는 요소만 매칭한다.
<ul>
<li><code>[속성=값]</code>을 사용하여 특정 속성이 특정 값인 요소만 매칭한다.</li>
<li>또는 특정 속성이 특정 값으로 시작하거나 특정 값을 포함하는 요소를 매칭할 수도 있다.</li>
</ul></li>
<li><code>:의사클래스</code> 선택자는 특정 상태에 있는 요소만 매칭한다. 예를 들어 특정 태그 요소 중에 맨 처음인 요소, 맨 마지막 요소, 마우스가 머물러 있는 요소 등을 지정할 수 있다.</li>
</ul>
<p>이러한 기본 선택자들은 공백 없이 결합되어 모든 조건을 만족하는 특정 요소를 선택할 수 있다.
예로, <code>태그.클래스</code>, <code>.클래스1.클래스2</code>, <code>태그[속성]</code>, <code>태그:의사클래스</code> 등의 결합이 있을 수 있다.</p>
<p>CSS 선택자는 태그, 클래스, ID, 속성, 의사클래스 등의 기본 선택자를 조합하여 원하는 요소를 매우 정교하게 지정하도록 구성할 수 있다.</p>
<ul>
<li>그룹 선택자: <code>선택자1, 선택자2, ..., 선택자n</code>
<ul>
<li>나열된 선택자 중 하나 이상과 매칭되는 요소를 선택</li>
</ul></li>
<li>자식 선택자: <code>부모선택자 &gt; 자식선택자</code>
<ul>
<li>부모 선택자와 매칭되는 요소들의 자식 요소 중에서 자식선택자와 매칭되는 요소를 선택<br />
</li>
</ul></li>
<li>후손 선택자: <code>상위선택자 하위선택자</code>
<ul>
<li>상위선택자와 매칭되는 요소의 하위 요소 중에서서 하위선택자와 매칭되는 요소를 선택<br />
</li>
</ul></li>
<li>인접 형제 선택자: <code>선택자1 + 선택자2</code>
<ul>
<li>선택자1과 매칭되는 요소와 동일 계층에 있는 다음 요소 중에서 선택자2를 만족하는 요소를 선택</li>
</ul></li>
<li>일반 형제 선택자: <code>선택자1 ~ 선택자1</code>
<ul>
<li>선택자1과 매칭되는 요소와 동일 계층에 있는 형재 요소 중에서 선택자2를 만족하는 요소를 선택</li>
</ul></li>
</ul>
<p>다음 표는 다양한 기본 선택자와 조합 선택자를 보여준다.</p>
<table>
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">선택자</th>
<th align="left">Desc</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">a</td>
<td align="left">a 태그 요소를 추출</td>
</tr>
<tr class="even">
<td align="left">div, a</td>
<td align="left">div 태그와 a 태그 요소를 추출</td>
</tr>
<tr class="odd">
<td align="left">div a</td>
<td align="left">div 태그 하위의 a 태그 요소를 추출</td>
</tr>
<tr class="even">
<td align="left">div + a</td>
<td align="left">div 태그 바로 다음에 나타나는 a 태그 요소를 추출</td>
</tr>
<tr class="odd">
<td align="left">.cls</td>
<td align="left">요소의 class 속성이 cls인 모든 요소를 추출</td>
</tr>
<tr class="even">
<td align="left">.cls1.cls2</td>
<td align="left">요소의 class 속성이 cls1과 cls2를 모두 가진 요소를 추출</td>
</tr>
<tr class="odd">
<td align="left">.cls1 .cls2</td>
<td align="left">class 속성이 cls1인 요소의 후손 중 class 속성이 cls2인 요소를 추출</td>
</tr>
<tr class="even">
<td align="left"><code>#myid</code></td>
<td align="left">id 속성이 myid인 요소를 추출</td>
</tr>
<tr class="odd">
<td align="left">a.cls</td>
<td align="left">a 태그 요소 중 class 속성이 cls인 모든 요소 추출</td>
</tr>
<tr class="even">
<td align="left">a.cls1.cls2</td>
<td align="left">a 태그 요소 중 class 속성이 cls1과 cls2를 모두 가진 요소를 추출</td>
</tr>
<tr class="odd">
<td align="left">a.cls1.cls2</td>
<td align="left">a 태그 요소 중 class 속성이 cls1과 cls2를 모두 가진 요소를 추출</td>
</tr>
</tbody>
</table>
<p>CSS 선택자에 대한 자세한 설명은 <a href="https://developer.mozilla.org/ko/docs/Learn/Getting_started_with_the_web/CSS_basics">CSS 기초를 다루는 MDN 사이트</a>를 참조하기 바란다.</p>
<p>복잡한 웹 문서에서 내가 원하는 요소의 CSS 선택자를 탐색할 때 사용할 수 있는 유용한 도구가 두 가지가 있다.</p>
<ul>
<li>Chrome 브라우저의 <code>검사</code> 메뉴</li>
<li>Chrome의 SelectorGadget 확장 프로그램</li>
</ul>
<p>Chrome 브라우저에서 웹 문서에서 추출하고자 하는 부분에 마우스를 위치한 후 컨텍스트 메뉴에서 <code>검사(inspect)</code> 를 선택해 보자.
그러면 개발자 도구가 나타나며, 현재의 웹 페이지의 HTML 문서와 마우스로 선택한 요소의 HTML 태그 부분이 강조되어 표시된다.
강조된 HTML 부분에 마우스를 가져가면 웹 페이지에 이 요소를 추출하기 위한 CSS 선택자가 툴팁으로 표시된다.</p>
<p><img src="img/chrome-inspect.png" width="100%" style="display: block; margin: auto;" />
툴팁의 CSS 실렉터로 요소를 추출해 보자.
결과에서 보듯이 선택된 요소가 추출되지만, 동일한 CSS 선택자에 매칭되는 다른 요소들도 선택되는 경우가 자주 있다.</p>
<div class="sourceCode" id="cb2500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2500-1"><a href="ch-R-import.html#cb2500-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;span.period&quot;</span>)</span></code></pre></div>
<pre><code>{xml_nodeset (3)}
[1] &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;
[2] &lt;span class=&quot;period&quot;&gt;1475일&lt;/span&gt;
[3] &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;</code></pre>
</div>
<div id="selectorgadget을-이용한-css-선택자-추출" class="section level4 unnumbered hasAnchor">
<h4>SelectorGadget을 이용한 CSS 선택자 추출<a href="ch-R-import.html#selectorgadget을-이용한-css-선택자-추출" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>추출하고자 하는 요소의 CSS 선택자를 쉽게 추출하는 방법은 Chrome의 확장 프로그램인 SelectorGadget을 사용하는 것이다.</p>
<p>SelectorGadget을 설치하는 방법은 다음과 같다.</p>
<ol style="list-style-type: decimal">
<li>Chrome 메뉴에서 [확장 프로그램]-[Chrom 웹 스토어 방문하기]를 선택한다.</li>
<li>SelectorGadget을 검색하여 확장 프로그램으로 추가한다.</li>
<li>설치 후 브라우저 메뉴바에 나타나는 확장 프로그램 아이콘을 클릭한 후 SelectGadget을 메뉴 바에 고정한다.</li>
</ol>
<p>데이터를 추출하려는 웹 페이지로 이동한 후 Chrome 메뉴 바의 SelectorGadget을 클릭하여 실행한다.
그러면 다음 그림처럼 웹 페이지 하단에 SelectorGadget 메뉴창이 나타난다.</p>
<p><img src="img/selectorGadget.png" width="100%" style="display: block; margin: auto;" /></p>
<p>SelectorGadget에서 원하는 요소에 대한 CSS 선택자를 추출하는 절차는 다음과 같다.</p>
<ul>
<li>웹 페이지에서 추출할 요소 선택
<ul>
<li>SelectorGadget이 실행된 상태에서 추출한 요소를 마우스로 클릭한다. 그러면 선택된 요소는 녹색으로 변경된다.<br />
</li>
<li>선택된 요소를 지정하는 CSS 선택자가 웹 페이지 하단의 SelectorGadget 메뉴창에 나타난다.</li>
<li>현재의 CSS 선택자로 추출되는 모든 요소가 노란색으로 표현된다.</li>
</ul></li>
<li>웹 페이지에서 추출할 요소를 추가 선택
<ul>
<li>현재의 CSS 선택자로 아직 선택이 안된가 있으면 마우스로 요소를 클릭한다.</li>
<li>그러면 현재 선택된 요소뿐 아니라 새롭게 클릭된 요소를 포함하도록 CSS 선택자가 변경된다.</li>
<li>새롭게 변경된 CSS 선택자로 추출되는 모든 요소가 노란색으로 표현된다.</li>
</ul></li>
<li>웹 페이지에서 요소 선택 해제
<ul>
<li>선택된 요소를 해제하려면 다시 마우스로 클릭한다. 선택된 요소는 빨간색으로 변경된다.</li>
<li>이 요소가 선택되지 않도록 CSS 선택자가 변경된다.</li>
<li>새롭게 변경된 CSS 선택자로 추출되는 모든 요소가 노란색으로 표현된다.</li>
</ul></li>
<li>모든 선택 해제
<ul>
<li>처음부터 다시 시작하려면 SelectorGadget 메뉴창에서 <code>Clear</code>를 선택한다.</li>
</ul></li>
<li>원하는 요소의 조합을 얻었으면 SelectorGadet 메뉴창에 나타나는 CSS 선택자를 복사하여 요소를 추출한다.</li>
<li>SelectorGadget을 중지하려면 SelecorGadget 메뉴창에서 <code>X</code>를 선택한다.</li>
</ul>
<p>SelectorGadget에 대한 자세한 사용법은 <a href="https://rvest.tidyverse.org/articles/selectorgadget.html">rvest 홈페이지의 SelectorGadget 글</a>을 참조한다.</p>
<p>다음은 SelectorGadget을 사용하여 목록의 첫 번째 재임기간만 선택하는 CSS 선택자를 얻은 후 실행한 결과이다.</p>
<p><img src="img/selectorGadget2.png" width="100%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb2502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2502-1"><a href="ch-R-import.html#cb2502-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;li:nth-child(1) .period&quot;</span>)</span></code></pre></div>
<pre><code>{xml_nodeset (1)}
[1] &lt;span class=&quot;period&quot;&gt;1827일&lt;/span&gt;</code></pre>
<p>일반적으로 웹 페이지의 동일한 요소들을 여러 개의 다른 CSS 선택자로 추출할 수 있다.
그러므로 선택하고자 하는 요소와 제외하고자 하는 요소를 클릭하는 순서 등에 따라 동일한 요소의 CSS 선택자가 다르게 출력될 수 있다.</p>
</div>
<div id="영화-순위-페이지-스크래핑" class="section level4 unnumbered hasAnchor">
<h4>영화 순위 페이지 스크래핑<a href="ch-R-import.html#영화-순위-페이지-스크래핑" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>현재 다음과 네이버는 영화 서비스를 중단한 상태이다.
여기서는 과거 웹 페이지를 저장하는 web.archive.org에서 <a href="https://web.archive.org/web/20230208141058/https://movie.daum.net/ranking/boxoffice/yearly">2023년 다음 영화 페이지</a>를 가져오도록 한다.
이 페이지는 2023년 2월 중의 박스오피스 순위 정보 페이지이다.</p>
<div class="sourceCode" id="cb2504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2504-1"><a href="ch-R-import.html#cb2504-1" tabindex="-1"></a>target <span class="ot">&lt;-</span> <span class="st">&quot;https://web.archive.org/web/20230208141058/https://movie.daum.net/ranking/boxoffice/yearly&quot;</span></span>
<span id="cb2504-2"><a href="ch-R-import.html#cb2504-2" tabindex="-1"></a>html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(target)</span>
<span id="cb2504-3"><a href="ch-R-import.html#cb2504-3" tabindex="-1"></a>html</span></code></pre></div>
<pre><code>{html_document}
&lt;html lang=&quot;ko&quot;&gt;
[1] &lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8 ...
[2] &lt;body class=&quot;&quot;&gt; \n    &lt;div class=&quot;direct-link&quot;&gt; \n        &lt;a href=&quot;#mainC ...</code></pre>
<p>박스오피스에 있는 영화 이름을 추출해보자.</p>
<ul>
<li>SelectGadget을 구동한 후 ‘다음’ 영화 랭킹 페이지에서 영화 이름을 클릭한다.</li>
<li>영화 이름뿐 아니라 페이지 마지막의 요소도 선택된다. 이 요소들을 클릭하여 제외시킨다.</li>
<li>페이지의 영화 이름만 노란색으로 선택되고 다른 요소는 선택되지 않았는지를 확인한다.</li>
<li>SelectGadget에 나타난 정보를 <code>html_elements()</code>에 문자열 인수로 제공하여 영화 이름을 추출한다.</li>
</ul>
<div class="sourceCode" id="cb2506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2506-1"><a href="ch-R-import.html#cb2506-1" tabindex="-1"></a>title <span class="ot">&lt;-</span> html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;#mainContent .link_txt&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>()</span>
<span id="cb2506-2"><a href="ch-R-import.html#cb2506-2" tabindex="-1"></a>title</span></code></pre></div>
<pre><code> [1] &quot;범죄도시2&quot;                                           
 [2] &quot;탑건: 매버릭&quot;                                        
 [3] &quot;아바타: 물의 길&quot;                                     
 [4] &quot;한산: 용의 출현&quot;                                     
 [5] &quot;공조2: 인터내셔날&quot;                                   
 [6] &quot;닥터 스트레인지: 대혼돈의 멀티버스&quot;                  
 [7] &quot;헌트&quot;                                                
 [8] &quot;올빼미&quot;                                              
 [9] &quot;쥬라기 월드: 도미니언&quot;                               
[10] &quot;마녀(魔女) Part2. The Other One&quot;                     
[11] &quot;토르: 러브 앤 썬더&quot;                                  
[12] &quot;미니언즈2&quot;                                           
[13] &quot;블랙 팬서: 와칸다 포에버&quot;                            
[14] &quot;비상선언&quot;                                            
[15] &quot;스파이더맨: 노 웨이 홈&quot;                              
[16] &quot;육사오(6/45)&quot;                                        
[17] &quot;헤어질 결심&quot;                                         
[18] &quot;외계+인 1부&quot;                                         
[19] &quot;영웅&quot;                                                
[20] &quot;해적: 도깨비 깃발&quot;                                   
[21] &quot;브로커&quot;                                              
[22] &quot;신비한 동물들과 덤블도어의 비밀&quot;                     
[23] &quot;인생은 아름다워&quot;                                     
[24] &quot;더 배트맨&quot;                                           
[25] &quot;데시벨&quot;                                              
[26] &quot;정직한 후보2&quot;                                        
[27] &quot;씽2게더&quot;                                             
[28] &quot;극장판 짱구는 못말려: 수수께끼! 꽃피는 천하떡잎학교&quot; 
[29] &quot;블랙 아담&quot;                                           
[30] &quot;킹메이커&quot;                                            
[31] &quot;자백&quot;                                                
[32] &quot;언차티드&quot;                                            
[33] &quot;경관의 피&quot;                                           
[34] &quot;오늘 밤, 세계에서 이 사랑이 사라진다 해도&quot;           
[35] &quot;극장판 주술회전 0&quot;                                   
[36] &quot;압꾸정&quot;                                              
[37] &quot;극장판 포켓몬스터DP: 기라티나와 하늘의 꽃다발 쉐이미&quot;
[38] &quot;이상한 나라의 수학자&quot;                                
[39] &quot;명탐정 코난: 할로윈의 신부&quot;                          
[40] &quot;동감&quot;                                                
[41] &quot;모비우스&quot;                                            
[42] &quot;늑대사냥&quot;                                            
[43] &quot;뽀로로 극장판 드래곤캐슬 대모험&quot;                     
[44] &quot;특송&quot;                                                
[45] &quot;니 부모 얼굴이 보고 싶다&quot;                            
[46] &quot;놉&quot;                                                  
[47] &quot;리멤버&quot;                                              
[48] &quot;킹스맨: 퍼스트 에이전트&quot;                             
[49] &quot;배드 가이즈&quot;                                         
[50] &quot;뜨거운 피&quot;                                           </code></pre>
<p>이번에는 영화 개봉일 데이터를 추출해 보자.</p>
<ul>
<li><code>Clear</code> 단추를 사용하여 현재 선택된 내용을 삭제한다.</li>
<li>웹 페이지에서 개봉일만 선택되도록 클릭한다.</li>
<li>원하는 요소만 선택되었는지 확인한다.</li>
<li>SelectGadget에 나타난 정보를 <code>html_elements()</code>에 문자열 인수로 제공하여 정보를 추출한다.</li>
</ul>
<div class="sourceCode" id="cb2508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2508-1"><a href="ch-R-import.html#cb2508-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;.txt_num&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2508-2"><a href="ch-R-import.html#cb2508-2" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2508-3"><a href="ch-R-import.html#cb2508-3" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>[1] &quot;22.05.18&quot; &quot;22.06.22&quot; &quot;22.12.14&quot; &quot;22.07.27&quot; &quot;22.09.07&quot; &quot;22.05.04&quot;</code></pre>
<p>개봉일은 날짜 정보이므로 <code>parse_date()</code>로 이를 날짜 형식으로 변환한다.
날짜 형식에 사용되는 포맷 문자는 <code>parse_date</code>의 도움말에서 확인할 수 있다.</p>
<div class="sourceCode" id="cb2510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2510-1"><a href="ch-R-import.html#cb2510-1" tabindex="-1"></a>release <span class="ot">&lt;-</span> html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;.txt_num&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2510-2"><a href="ch-R-import.html#cb2510-2" tabindex="-1"></a>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2510-3"><a href="ch-R-import.html#cb2510-3" tabindex="-1"></a>  <span class="fu">parse_date</span>(<span class="at">format=</span><span class="st">&quot;%y.%m.%d&quot;</span>)</span>
<span id="cb2510-4"><a href="ch-R-import.html#cb2510-4" tabindex="-1"></a>release</span></code></pre></div>
<pre><code> [1] &quot;2022-05-18&quot; &quot;2022-06-22&quot; &quot;2022-12-14&quot; &quot;2022-07-27&quot; &quot;2022-09-07&quot;
 [6] &quot;2022-05-04&quot; &quot;2022-08-10&quot; &quot;2022-11-23&quot; &quot;2022-06-01&quot; &quot;2022-06-15&quot;
[11] &quot;2022-07-06&quot; &quot;2022-07-20&quot; &quot;2022-11-09&quot; &quot;2022-08-03&quot; &quot;2021-12-15&quot;
[16] &quot;2022-08-24&quot; &quot;2022-06-29&quot; &quot;2022-07-20&quot; &quot;2022-12-21&quot; &quot;2022-01-26&quot;
[21] &quot;2022-06-08&quot; &quot;2022-04-13&quot; &quot;2022-09-28&quot; &quot;2022-03-01&quot; &quot;2022-11-16&quot;
[26] &quot;2022-09-28&quot; &quot;2022-01-05&quot; &quot;2022-09-28&quot; &quot;2022-10-19&quot; &quot;2022-01-26&quot;
[31] &quot;2022-10-26&quot; &quot;2022-02-16&quot; &quot;2022-01-05&quot; &quot;2022-11-30&quot; &quot;2022-02-17&quot;
[36] &quot;2022-11-30&quot; &quot;2022-06-01&quot; &quot;2022-03-09&quot; &quot;2022-07-13&quot; &quot;2022-11-16&quot;
[41] &quot;2022-03-30&quot; &quot;2022-09-21&quot; &quot;2022-07-28&quot; &quot;2022-01-12&quot; &quot;2022-04-27&quot;
[46] &quot;2022-08-17&quot; &quot;2022-10-26&quot; &quot;2021-12-22&quot; &quot;2022-05-04&quot; &quot;2022-03-23&quot;</code></pre>
<p>영화 관객수를 추출해 보자.</p>
<ul>
<li><code>Clear</code> 단추를 사용하여 현재 선택된 내용을 삭제한다.</li>
<li>웹 페이지에서 관객수 클릭하면 개봉일 정보도 같이 선택된다.</li>
<li>개봉일을 클릭하면 빨간 색으로 바뀌면서 관객수 정보만 선택되는 것을 확인한다.</li>
<li>SelectGadget에 나타난 정보를 <code>html_elements()</code>에 문자열 인수로 제공하여 정보를 추출한다.</li>
</ul>
<div class="sourceCode" id="cb2512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2512-1"><a href="ch-R-import.html#cb2512-1" tabindex="-1"></a>html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;.info_txt+ .info_txt&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2512-2"><a href="ch-R-import.html#cb2512-2" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>[1] &quot;관객수12,693,415명&quot; &quot;관객수8,177,452명&quot;  &quot;관객수10,581,515명&quot;
[4] &quot;관객수7,264,934명&quot;  &quot;관객수6,982,940명&quot;  &quot;관객수5,884,595명&quot; </code></pre>
<p>관객수는 수치이므로 텍스트에서 숫자만 추출한다.</p>
<ul>
<li><code>parse_number()</code> 함수로 문자를 숫자로 변환</li>
<li>숫자의 자릿수 형식을 지정하기 위해 <code>locale()</code> 함수 사용</li>
</ul>
<div class="sourceCode" id="cb2514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2514-1"><a href="ch-R-import.html#cb2514-1" tabindex="-1"></a>audience <span class="ot">&lt;-</span> html <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">&quot;.info_txt+ .info_txt&quot;</span>) <span class="sc">%&gt;%</span>  <span class="fu">html_text</span>() <span class="sc">%&gt;%</span></span>
<span id="cb2514-2"><a href="ch-R-import.html#cb2514-2" tabindex="-1"></a>  <span class="fu">parse_number</span>(<span class="at">locale =</span> <span class="fu">locale</span>(<span class="at">grouping_mark =</span> <span class="st">&quot;,&quot;</span>))</span>
<span id="cb2514-3"><a href="ch-R-import.html#cb2514-3" tabindex="-1"></a>audience</span></code></pre></div>
<pre><code> [1] 12693415  8177452 10581515  7264934  6982940  5884595  4352407  3327105
 [9]  2837413  2806501  2716306  2269033  2105834  2058869  7551990  1980773
[17]  1895856  1539364  3154410  1339242  1261131  1195443  1171648   904238
[25]   901426   899684   885419   837647   779489   783567   738122   730847
[33]   684667  1051490   663158   608639   581223   534291   490869   490145
[41]   475928   458720   447777   444417   416524   415969   412836  1029365
[49]   400329   398105</code></pre>
<p>지금까지 추출된 정보를 이용하여 데이터프레임을 생성한다.</p>
<div class="sourceCode" id="cb2516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2516-1"><a href="ch-R-import.html#cb2516-1" tabindex="-1"></a>movies <span class="ot">&lt;-</span> <span class="fu">tibble</span>(title, release, audience)</span>
<span id="cb2516-2"><a href="ch-R-import.html#cb2516-2" tabindex="-1"></a>movies</span></code></pre></div>
<pre><code># A tibble: 50 × 3
   title                              release    audience
   &lt;chr&gt;                              &lt;date&gt;        &lt;dbl&gt;
 1 범죄도시2                          2022-05-18 12693415
 2 탑건: 매버릭                       2022-06-22  8177452
 3 아바타: 물의 길                    2022-12-14 10581515
 4 한산: 용의 출현                    2022-07-27  7264934
 5 공조2: 인터내셔날                  2022-09-07  6982940
 6 닥터 스트레인지: 대혼돈의 멀티버스 2022-05-04  5884595
 7 헌트                               2022-08-10  4352407
 8 올빼미                             2022-11-23  3327105
 9 쥬라기 월드: 도미니언              2022-06-01  2837413
10 마녀(魔女) Part2. The Other One    2022-06-15  2806501
# ℹ 40 more rows</code></pre>
<p>개봉일과 관객수의 분포를 시각화해 보자.</p>
<div class="sourceCode" id="cb2518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2518-1"><a href="ch-R-import.html#cb2518-1" tabindex="-1"></a><span class="fu">ggplot</span>(movies) <span class="sc">+</span></span>
<span id="cb2518-2"><a href="ch-R-import.html#cb2518-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(release), <span class="at">bins=</span><span class="dv">12</span>)</span></code></pre></div>
<p><img src="Rimport_files/figure-html/unnamed-chunk-107-1.png" width="60%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb2519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2519-1"><a href="ch-R-import.html#cb2519-1" tabindex="-1"></a><span class="fu">ggplot</span>(movies) <span class="sc">+</span></span>
<span id="cb2519-2"><a href="ch-R-import.html#cb2519-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(audience), <span class="at">bins=</span><span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb2519-3"><a href="ch-R-import.html#cb2519-3" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">trans=</span><span class="st">&quot;log10&quot;</span>)</span></code></pre></div>
<p><img src="Rimport_files/figure-html/unnamed-chunk-108-1.png" width="60%" style="display: block; margin: auto;" /></p>
<p>상영 기간이 서로 다른 영화들이므로 일일 평균 영화 관객수로 영화의 흥행도를 분석해 보자.</p>
<div class="sourceCode" id="cb2520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2520-1"><a href="ch-R-import.html#cb2520-1" tabindex="-1"></a>movies <span class="sc">%&gt;%</span> </span>
<span id="cb2520-2"><a href="ch-R-import.html#cb2520-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2520-3"><a href="ch-R-import.html#cb2520-3" tabindex="-1"></a>    <span class="at">days =</span> <span class="fu">as.Date</span>(<span class="st">&quot;20230206&quot;</span>, <span class="st">&quot;%Y%m%d&quot;</span>) <span class="sc">-</span> release,</span>
<span id="cb2520-4"><a href="ch-R-import.html#cb2520-4" tabindex="-1"></a>    <span class="at">aud_per_day =</span> audience <span class="sc">/</span> <span class="fu">as.numeric</span>(days, <span class="at">units=</span><span class="st">&quot;days&quot;</span>)</span>
<span id="cb2520-5"><a href="ch-R-import.html#cb2520-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb2520-6"><a href="ch-R-import.html#cb2520-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(aud_per_day))</span></code></pre></div>
<pre><code># A tibble: 50 × 5
   title                              release    audience days     aud_per_day
   &lt;chr&gt;                              &lt;date&gt;        &lt;dbl&gt; &lt;drtn&gt;         &lt;dbl&gt;
 1 아바타: 물의 길                    2022-12-14 10581515  54 days     195954.
 2 영웅                               2022-12-21  3154410  47 days      67115.
 3 범죄도시2                          2022-05-18 12693415 264 days      48081.
 4 공조2: 인터내셔날                  2022-09-07  6982940 152 days      45940.
 5 올빼미                             2022-11-23  3327105  75 days      44361.
 6 한산: 용의 출현                    2022-07-27  7264934 194 days      37448.
 7 탑건: 매버릭                       2022-06-22  8177452 229 days      35709.
 8 헌트                               2022-08-10  4352407 180 days      24180.
 9 블랙 팬서: 와칸다 포에버           2022-11-09  2105834  89 days      23661.
10 닥터 스트레인지: 대혼돈의 멀티버스 2022-05-04  5884595 278 days      21168.
# ℹ 40 more rows</code></pre>
</div>
<div id="웹-페이지의-표-데이터-수집하기" class="section level4 unnumbered hasAnchor">
<h4>웹 페이지의 표 데이터 수집하기<a href="ch-R-import.html#웹-페이지의-표-데이터-수집하기" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>네이버 SPORTS의 배구 섹션의 <a href="https://sports.news.naver.com/volleyball/record/index">기록/순위</a> 페이지에서 여자부 선수들의 기록을 수집해 보자.</p>
<ul>
<li>배구 섹션의 순위 페이지에서 [여자부]를 선택한다.</li>
<li>기록을 가져올 시즌을 선택한다. [2023-2024] 시즌을 선택해 보자.</li>
<li>페이지의 URL 브라우저에서 확인 후 R 스크립트에 복사한다.</li>
</ul>
<div class="sourceCode" id="cb2522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2522-1"><a href="ch-R-import.html#cb2522-1" tabindex="-1"></a>target <span class="ot">&lt;-</span> <span class="st">&quot;https://sports.news.naver.com/volleyball/record/index?category=wkovo&amp;year=2022&quot;</span></span>
<span id="cb2522-2"><a href="ch-R-import.html#cb2522-2" tabindex="-1"></a>html <span class="ot">&lt;-</span> <span class="fu">read_html</span>(target)</span></code></pre></div>
<p>웹 페이지의 표는 <code>&lt;table&gt;</code> 태그로 되어 있고, rvest는 웹 문서의 표를 데이터프레임으로 추출할 수 있다.</p>
<p><img src="img/kovo-stats1.png" width="100%" style="display: block; margin: auto;" /></p>
<ol start="4" style="list-style-type: decimal">
<li><code>html_table()</code> 함수를 사용하면 HTML 또는 특정 노드 아래에 있는 모든 table을 추출이 가능하다.</li>
</ol>
<ul>
<li>각 table은 tibble로 저장된다.</li>
<li>여러 개의 table이 있는 경우 리스트로 저장된다.</li>
</ul>
<div class="sourceCode" id="cb2523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2523-1"><a href="ch-R-import.html#cb2523-1" tabindex="-1"></a>tables <span class="ot">&lt;-</span> html <span class="sc">%&gt;%</span>  </span>
<span id="cb2523-2"><a href="ch-R-import.html#cb2523-2" tabindex="-1"></a>  <span class="fu">html_table</span>()</span>
<span id="cb2523-3"><a href="ch-R-import.html#cb2523-3" tabindex="-1"></a><span class="fu">length</span>(tables)</span></code></pre></div>
<pre><code>[1] 2</code></pre>
<div class="sourceCode" id="cb2525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2525-1"><a href="ch-R-import.html#cb2525-1" tabindex="-1"></a>tables[[<span class="dv">1</span>]]  <span class="co"># 첫 번째 테이블블</span></span></code></pre></div>
<div class="sourceCode" id="cb2526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2526-1"><a href="ch-R-import.html#cb2526-1" tabindex="-1"></a>tables[[<span class="dv">2</span>]] <span class="co">#  두 번째 테이블블</span></span></code></pre></div>
<p>웹 페이지에 표가 여러 개 있는 경우에 표 하나를 특정하여 데이터를 수집할 수도 있다.</p>
<ol style="list-style-type: decimal">
<li>웹 페이지에서 선택하고자 하는 표를 선택한 후 컨텍스트 메뉴에서 <code>검사</code>를 선택한다.</li>
<li>개발자 도구의 HTML 문서에서 데이터를 수집하려는 표에 상응하는
<table>
태그를 찾아서 우클릭하여 [Copy]-[Copy Xpath]를 복사한다.</li>
</ol>
<ul>
<li>Xpath는 웹 페이지에서 각 요소를 유일하게 지정하는 방법이다.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><code>html_element()</code> 함수의 <code>xpath</code> 인수에 복사한 Xpath 값을 설정한다.</li>
</ol>
<ul>
<li>Xpath에 큰따옴표가 포함되어 있는 경우가 많다. 그러므로 <code>xpath</code> 인수에 설정할 때 작은 따옴표로 감싸준다.</li>
</ul>
<ol start="4" style="list-style-type: decimal">
<li><code>html_element()</code>의 결과에 <code>html_table()</code>을 적용하여 데이터프레임으로 추출한다.</li>
</ol>
<div class="sourceCode" id="cb2527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2527-1"><a href="ch-R-import.html#cb2527-1" tabindex="-1"></a>players <span class="ot">&lt;-</span> html <span class="sc">%&gt;%</span>  </span>
<span id="cb2527-2"><a href="ch-R-import.html#cb2527-2" tabindex="-1"></a>  <span class="fu">html_element</span>(<span class="at">xpath=</span><span class="st">&#39;//*[@id=&quot;content&quot;]/div[3]/div/div[4]/table&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2527-3"><a href="ch-R-import.html#cb2527-3" tabindex="-1"></a>  <span class="fu">html_table</span>()</span>
<span id="cb2527-4"><a href="ch-R-import.html#cb2527-4" tabindex="-1"></a>players </span></code></pre></div>
<pre><code># A tibble: 20 × 9
      X1 X2                         X3    X4    X5    X6    X7    X8    X9
   &lt;int&gt; &lt;chr&gt;                   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1     1 엘리자벳(KGC인삼공사)    1015  43.0  0.28  0.54  2.13  0.09   0  
 2     2 모마(GS칼텍스)            879  43.7  0.25  0.36  2.42  0.09   0  
 3     3 옐레나(흥국생명)          821  42.8  0.25  0.49  3.08  0.17   0  
 4     4 니아 리드(페퍼저축은행)   717  36.2  0.06  0.46  2.89  0.05  12.5
 5     5 김연경(흥국생명)          669  45.8  0.16  0.3   5.53  0.4   46.8
 6     6 산타나(IBK기업은행)       606  38.4  0.13  0.3   6.44  0.13  49.0
 7     7 표승주(IBK기업은행)       529  34.8  0.09  0.36  6.83  0.21  36.4
......</code></pre>
<p>추출된 표의 열 이름이 제대로 설정되지 않은 경우에는 직접 열 이름 설정한다.</p>
<div class="sourceCode" id="cb2529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2529-1"><a href="ch-R-import.html#cb2529-1" tabindex="-1"></a><span class="fu">names</span>(players) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;rank&quot;</span>, <span class="st">&quot;player&quot;</span>, <span class="st">&quot;score&quot;</span>, <span class="st">&quot;attack&quot;</span>, <span class="st">&quot;serve&quot;</span>, </span>
<span id="cb2529-2"><a href="ch-R-import.html#cb2529-2" tabindex="-1"></a>                    <span class="st">&quot;blocking&quot;</span>, <span class="st">&quot;defence&quot;</span>, <span class="st">&quot;sets&quot;</span>, <span class="st">&quot;receive&quot;</span>)</span>
<span id="cb2529-3"><a href="ch-R-import.html#cb2529-3" tabindex="-1"></a>players</span></code></pre></div>
<pre><code># A tibble: 20 × 9
    rank player                score attack serve blocking defence  sets receive
   &lt;int&gt; &lt;chr&gt;                 &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1     1 엘리자벳(KGC인삼공사)  1015   43.0  0.28     0.54    2.13  0.09     0  
 2     2 모마(GS칼텍스)          879   43.7  0.25     0.36    2.42  0.09     0  
 3     3 옐레나(흥국생명)        821   42.8  0.25     0.49    3.08  0.17     0  
 4     4 니아 리드(페퍼저축은…   717   36.2  0.06     0.46    2.89  0.05    12.5
 5     5 김연경(흥국생명)        669   45.8  0.16     0.3     5.53  0.4     46.8
 6     6 산타나(IBK기업은행)     606   38.4  0.13     0.3     6.44  0.13    49.0
 7     7 표승주(IBK기업은행)     529   34.8  0.09     0.36    6.83  0.21    36.4
......</code></pre>
</div>
<div id="반응형-웹-페이지" class="section level4 unnumbered hasAnchor">
<h4>반응형 웹 페이지<a href="ch-R-import.html#반응형-웹-페이지" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>예전의 웹 페이지들은 사용자의 시스템, 브라우저에 상관없이 동일한 웹 페이지를 제공하였다.
최근에는 모바일 환경이 가속화되고 다양한 웹 브라우저들이 사용되어서 하나의 웹 페이지를 여러 버전으로 제공하는 것이 바람직한다.
예를 들어 PC로 접속하는 사용자와 스마트폰으로 접속하는 사용자에게 서로 다른 버전의 웹 페이지를 제공하면 훨씬 사용자 환경에 적합한 서비스를 제공할 수 있다.</p>
<p>반응형 웹은 자바스크립를 사용하여 사용자의 환경을 감지하여 사용자에 적절한 웹 페이지를 동적으로 생성하는 기술이다.
그러므로 반응형 웹 기술이 사용된 페이지를 스크래핑 하려면 실제 사용자와 동일한 브라우저를 페이지에 접속해야만 생성된 페이지에서 데이터를 수집할 수 있다.
그렇기 때문에 반응형 웹 페이지를 스크래핑할 때는 <code>RSelenium</code>이나 <code>chromote</code> 패키지 등을 사용하는데, 이 패키지들은 <strong>R</strong>에서 웹 브라우저를 제어하게 하여 페이지를 동적으로 생성해 가며 데이터를 수집할 수 있게 해 준다.</p>
</div>
</div>
<div id="sec-public-api" class="section level2 hasAnchor" number="12.5">
<h2><span class="header-section-number">12.5</span> 공개 API에서 데이터 가져오기<a href="ch-R-import.html#sec-public-api" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>추후 공개 예정</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ch-R-OOP.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ch-R-documents.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-programming-3rd.pdf", "R-programming-3rd.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
