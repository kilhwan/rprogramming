<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 dplyr을 이용한 데이터 변환 | R 프로그래밍 (개정판)</title>
  <meta name="description" content="이 책은 경영정보시스템실습의 주교재로 사용되기 위해 개발되었습니다." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 dplyr을 이용한 데이터 변환 | R 프로그래밍 (개정판)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="이 책은 경영정보시스템실습의 주교재로 사용되기 위해 개발되었습니다." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 dplyr을 이용한 데이터 변환 | R 프로그래밍 (개정판)" />
  
  <meta name="twitter:description" content="이 책은 경영정보시스템실습의 주교재로 사용되기 위해 개발되었습니다." />
  

<meta name="author" content="Kilhwan Kim" />


<meta name="date" content="2020-08-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ch-R-Data-Frame.html"/>
<link rel="next" href="chap-visulaize.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-176754989-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-176754989-1');
</script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R 프로그래밍</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#판-서문"><i class="fa fa-check"></i>1판 서문</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#판-서문-1"><i class="fa fa-check"></i>2판 서문</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="ch-intro.html"><a href="ch-intro.html"><i class="fa fa-check"></i><b>1</b> R 설치 및 시작</a><ul>
<li class="chapter" data-level="1.1" data-path="ch-intro.html"><a href="ch-intro.html#sec:Rintro"><i class="fa fa-check"></i><b>1.1</b> R 소개</a></li>
<li class="chapter" data-level="1.2" data-path="ch-intro.html"><a href="ch-intro.html#sec:installation"><i class="fa fa-check"></i><b>1.2</b> R 설치하기</a><ul>
<li class="chapter" data-level="1.2.1" data-path="ch-intro.html"><a href="ch-intro.html#r-배포판-내려받기"><i class="fa fa-check"></i><b>1.2.1</b> R 배포판 내려받기</a></li>
<li class="chapter" data-level="1.2.2" data-path="ch-intro.html"><a href="ch-intro.html#설치에-앞서-주의할-사항"><i class="fa fa-check"></i><b>1.2.2</b> 설치에 앞서 주의할 사항</a></li>
<li class="chapter" data-level="1.2.3" data-path="ch-intro.html"><a href="ch-intro.html#r-설치하기"><i class="fa fa-check"></i><b>1.2.3</b> R 설치하기</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="ch-intro.html"><a href="ch-intro.html#sec:RStudio"><i class="fa fa-check"></i><b>1.3</b> RStudio</a><ul>
<li class="chapter" data-level="1.3.1" data-path="ch-intro.html"><a href="ch-intro.html#rstudio-설치"><i class="fa fa-check"></i><b>1.3.1</b> RStudio 설치</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="ch-intro.html"><a href="ch-intro.html#sec:R_start"><i class="fa fa-check"></i><b>1.4</b> RStudio로 R 시작하기</a><ul>
<li class="chapter" data-level="1.4.1" data-path="ch-intro.html"><a href="ch-intro.html#r-콘솔과-프롬프트"><i class="fa fa-check"></i><b>1.4.1</b> R 콘솔과 프롬프트</a></li>
<li class="chapter" data-level="1.4.2" data-path="ch-intro.html"><a href="ch-intro.html#r-콘솔-사용과-관련된-몇-가지-팁"><i class="fa fa-check"></i><b>1.4.2</b> R 콘솔 사용과 관련된 몇 가지 팁</a></li>
<li class="chapter" data-level="1.4.3" data-path="ch-intro.html"><a href="ch-intro.html#r-스크립트-파일-만들기"><i class="fa fa-check"></i><b>1.4.3</b> R 스크립트 파일 만들기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html"><i class="fa fa-check"></i><b>2</b> R 데이터 기초</a><ul>
<li class="chapter" data-level="2.1" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#단순한-데이터-형태"><i class="fa fa-check"></i><b>2.1</b> 단순한 데이터 형태</a></li>
<li class="chapter" data-level="2.2" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#단순-연산"><i class="fa fa-check"></i><b>2.2</b> 단순 연산</a></li>
<li class="chapter" data-level="2.3" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#변수와-할당"><i class="fa fa-check"></i><b>2.3</b> 변수와 할당</a></li>
<li class="chapter" data-level="2.4" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#함수를-이용한-연산"><i class="fa fa-check"></i><b>2.4</b> 함수를 이용한 연산</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html"><i class="fa fa-check"></i><b>3</b> R 벡터</a><ul>
<li class="chapter" data-level="3.1" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#숫자-벡터"><i class="fa fa-check"></i><b>3.1</b> 숫자 벡터</a><ul>
<li class="chapter" data-level="3.1.1" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#c-함수를-이용한-숫자-벡터-만들기"><i class="fa fa-check"></i><b>3.1.1</b> c() 함수를 이용한 숫자 벡터 만들기</a></li>
<li class="chapter" data-level="3.1.2" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#패턴을-이용한-숫자-벡터-만들기"><i class="fa fa-check"></i><b>3.1.2</b> 패턴을 이용한 숫자 벡터 만들기</a></li>
<li class="chapter" data-level="3.1.3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#숫자-벡터의-연산"><i class="fa fa-check"></i><b>3.1.3</b> 숫자 벡터의 연산</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#논리-벡터"><i class="fa fa-check"></i><b>3.2</b> 논리 벡터</a></li>
<li class="chapter" data-level="3.3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#문자-벡터"><i class="fa fa-check"></i><b>3.3</b> 문자 벡터</a></li>
<li class="chapter" data-level="3.4" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#결측치-missing-values"><i class="fa fa-check"></i><b>3.4</b> 결측치 (Missing Values)</a></li>
<li class="chapter" data-level="3.5" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#인덱스-벡터와-필터링"><i class="fa fa-check"></i><b>3.5</b> 인덱스 벡터와 필터링</a><ul>
<li class="chapter" data-level="3.5.1" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#자연수-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.1</b> 자연수 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.2" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#음의-정수-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.2</b> 음의 정수 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#논리-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.3</b> 논리 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.4" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#이름-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.4</b> 이름 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.5" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#인덱스-벡터를-이용해-벡터-요소에-값-할당하기"><i class="fa fa-check"></i><b>3.5.5</b> 인덱스 벡터를 이용해 벡터 요소에 값 할당하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html"><i class="fa fa-check"></i><b>4</b> R 행렬</a><ul>
<li class="chapter" data-level="4.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬-만들기"><i class="fa fa-check"></i><b>4.1</b> 행렬 만들기</a></li>
<li class="chapter" data-level="4.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#벡터를-결합하여-행렬-만들기"><i class="fa fa-check"></i><b>4.2</b> 벡터를 결합하여 행렬 만들기</a></li>
<li class="chapter" data-level="4.3" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-필터링"><i class="fa fa-check"></i><b>4.3</b> 행렬의 필터링</a></li>
<li class="chapter" data-level="4.4" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-연산"><i class="fa fa-check"></i><b>4.4</b> 행렬의 연산</a></li>
<li class="chapter" data-level="4.5" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬과-함수"><i class="fa fa-check"></i><b>4.5</b> 행렬과 함수</a><ul>
<li class="chapter" data-level="4.5.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬을-인수로-하는-함수들"><i class="fa fa-check"></i><b>4.5.1</b> 행렬을 인수로 하는 함수들</a></li>
<li class="chapter" data-level="4.5.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-행별-또는-열별로-함수를-적용하는-방법"><i class="fa fa-check"></i><b>4.5.2</b> 행렬의 행별 또는 열별로 함수를 적용하는 방법</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#sec:RMatrix-array"><i class="fa fa-check"></i><b>4.6</b> 배열</a><ul>
<li class="chapter" data-level="4.6.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#배열의-생성"><i class="fa fa-check"></i><b>4.6.1</b> 배열의 생성</a></li>
<li class="chapter" data-level="4.6.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#배열도-결국-벡터"><i class="fa fa-check"></i><b>4.6.2</b> 배열도 결국 벡터</a></li>
<li class="chapter" data-level="4.6.3" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#배열의-연산과-필터링"><i class="fa fa-check"></i><b>4.6.3</b> 배열의 연산과 필터링</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#sec:RMatrix-operation-advanced"><i class="fa fa-check"></i><b>4.7</b> 행렬과 배열의 고급 연산</a><ul>
<li class="chapter" data-level="4.7.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-곱"><i class="fa fa-check"></i><b>4.7.1</b> 행렬의 곱</a></li>
<li class="chapter" data-level="4.7.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-주대각선-요소와-대각행렬"><i class="fa fa-check"></i><b>4.7.2</b> 행렬의 주대각선 요소와 대각행렬</a></li>
<li class="chapter" data-level="4.7.3" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#연립-일차-방정식과-역행렬"><i class="fa fa-check"></i><b>4.7.3</b> 연립 일차 방정식과 역행렬</a></li>
<li class="chapter" data-level="4.7.4" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#고유치eigenvalues와-고유벡터eigenvectors"><i class="fa fa-check"></i><b>4.7.4</b> 고유치(eigenvalues)와 고유벡터(eigenvectors)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ch-R-List.html"><a href="ch-R-List.html"><i class="fa fa-check"></i><b>5</b> R 리스트</a><ul>
<li class="chapter" data-level="5.1" data-path="ch-R-List.html"><a href="ch-R-List.html#객체-객체의-타입-객체의-속성"><i class="fa fa-check"></i><b>5.1</b> 객체, 객체의 타입, 객체의 속성</a></li>
<li class="chapter" data-level="5.2" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트의-생성-및-필터링"><i class="fa fa-check"></i><b>5.2</b> 리스트의 생성 및 필터링</a></li>
<li class="chapter" data-level="5.3" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트의-변경-및-연결"><i class="fa fa-check"></i><b>5.3</b> 리스트의 변경 및 연결</a></li>
<li class="chapter" data-level="5.4" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트에-함수-적용하기"><i class="fa fa-check"></i><b>5.4</b> 리스트에 함수 적용하기</a><ul>
<li class="chapter" data-level="5.4.1" data-path="ch-R-List.html"><a href="ch-R-List.html#lapply-함수"><i class="fa fa-check"></i><b>5.4.1</b> lapply() 함수</a></li>
<li class="chapter" data-level="5.4.2" data-path="ch-R-List.html"><a href="ch-R-List.html#sapply-함수"><i class="fa fa-check"></i><b>5.4.2</b> sapply() 함수</a></li>
<li class="chapter" data-level="5.4.3" data-path="ch-R-List.html"><a href="ch-R-List.html#mapply-함수"><i class="fa fa-check"></i><b>5.4.3</b> mapply() 함수</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트-활용-분야"><i class="fa fa-check"></i><b>5.5</b> 리스트 활용 분야</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html"><i class="fa fa-check"></i><b>6</b> R 데이터 프레임</a><ul>
<li class="chapter" data-level="6.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#범주형-데이터와-요인-factors"><i class="fa fa-check"></i><b>6.1</b> 범주형 데이터와 요인 (Factors)</a><ul>
<li class="chapter" data-level="6.1.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#명목형-변수와-요인"><i class="fa fa-check"></i><b>6.1.1</b> 명목형 변수와 요인</a></li>
<li class="chapter" data-level="6.1.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#순서형-변수와-요인"><i class="fa fa-check"></i><b>6.1.2</b> 순서형 변수와 요인</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임-만들기"><i class="fa fa-check"></i><b>6.2</b> 데이터 프레임 만들기</a></li>
<li class="chapter" data-level="6.3" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임-각-열의-지정"><i class="fa fa-check"></i><b>6.3</b> 데이터 프레임 각 열의 지정</a></li>
<li class="chapter" data-level="6.4" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임의-필터링"><i class="fa fa-check"></i><b>6.4</b> 데이터 프레임의 필터링</a><ul>
<li class="chapter" data-level="6.4.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#리스트-형식으로-필터링"><i class="fa fa-check"></i><b>6.4.1</b> 리스트 형식으로 필터링</a></li>
<li class="chapter" data-level="6.4.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#행렬-형식으로-필터링"><i class="fa fa-check"></i><b>6.4.2</b> 행렬 형식으로 필터링</a></li>
<li class="chapter" data-level="6.4.3" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#subset을-이용한-필터링"><i class="fa fa-check"></i><b>6.4.3</b> subset()을 이용한 필터링</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임에-함수-적용하기"><i class="fa fa-check"></i><b>6.5</b> 데이터 프레임에 함수 적용하기</a></li>
<li class="chapter" data-level="6.6" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#파일에서-데이터-읽어오기"><i class="fa fa-check"></i><b>6.6</b> 파일에서 데이터 읽어오기</a><ul>
<li class="chapter" data-level="6.6.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#텍스트-파일에서-데이터-읽어오기"><i class="fa fa-check"></i><b>6.6.1</b> 텍스트 파일에서 데이터 읽어오기</a></li>
<li class="chapter" data-level="6.6.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#excel-파일에서-데이터-읽어오기"><i class="fa fa-check"></i><b>6.6.2</b> Excel 파일에서 데이터 읽어오기</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#파일에-데이터-프레임-쓰기"><i class="fa fa-check"></i><b>6.7</b> 파일에 데이터 프레임 쓰기</a></li>
<li class="chapter" data-level="6.8" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임의-열을-변수처럼-이용하는-방법"><i class="fa fa-check"></i><b>6.8</b> 데이터 프레임의 열을 변수처럼 이용하는 방법</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html"><i class="fa fa-check"></i><b>7</b> dplyr을 이용한 데이터 변환</a><ul>
<li class="chapter" data-level="7.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:tidyData"><i class="fa fa-check"></i><b>7.1</b> 정돈 데이터 (tidy data)</a><ul>
<li class="chapter" data-level="7.1.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#정돈-데이터-형식의-조건"><i class="fa fa-check"></i><b>7.1.1</b> 정돈 데이터 형식의 조건</a></li>
<li class="chapter" data-level="7.1.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#비정돈-데이터-형식"><i class="fa fa-check"></i><b>7.1.2</b> 비정돈 데이터 형식</a></li>
<li class="chapter" data-level="7.1.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#정돈-데이터를-사용하는-이유"><i class="fa fa-check"></i><b>7.1.3</b> 정돈 데이터를 사용하는 이유</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#tidyverse-패키지"><i class="fa fa-check"></i><b>7.2</b> <code>tidyverse</code> 패키지</a><ul>
<li class="chapter" data-level="7.2.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#tidyverse-패키지-설치"><i class="fa fa-check"></i><b>7.2.1</b> <code>tidyverse</code> 패키지 설치</a></li>
<li class="chapter" data-level="7.2.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#tidyverse-패키지-적재"><i class="fa fa-check"></i><b>7.2.2</b> <code>tidyverse</code> 패키지 적재</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:dplyr"><i class="fa fa-check"></i><b>7.3</b> <code>dplyr</code> 패키지와 정돈 데이터의 변환</a><ul>
<li class="chapter" data-level="7.3.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#dplyr-패키지"><i class="fa fa-check"></i><b>7.3.1</b> <code>dplyr</code> 패키지</a></li>
<li class="chapter" data-level="7.3.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#정돈-데이터-변환의-종류"><i class="fa fa-check"></i><b>7.3.2</b> 정돈 데이터 변환의 종류</a></li>
<li class="chapter" data-level="7.3.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#mpg-데이터"><i class="fa fa-check"></i><b>7.3.3</b> <code>mpg</code> 데이터</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:filter"><i class="fa fa-check"></i><b>7.4</b> <code>filter()</code>로 행 선택하기</a><ul>
<li class="chapter" data-level="7.4.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#선택-조건이-하나인-경우"><i class="fa fa-check"></i><b>7.4.1</b> 선택 조건이 하나인 경우</a></li>
<li class="chapter" data-level="7.4.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#여러-조건을-만족하는-행-추출하기"><i class="fa fa-check"></i><b>7.4.2</b> 여러 조건을 만족하는 행 추출하기</a></li>
<li class="chapter" data-level="7.4.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#논리-연산자로-복합-조건-만들기"><i class="fa fa-check"></i><b>7.4.3</b> 논리 연산자로 복합 조건 만들기</a></li>
<li class="chapter" data-level="7.4.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#결측치가-있는-경우"><i class="fa fa-check"></i><b>7.4.4</b> 결측치가 있는 경우</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:arrange"><i class="fa fa-check"></i><b>7.5</b> <code>arrange()</code>로 행 정렬하기</a><ul>
<li class="chapter" data-level="7.5.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#desc를-이용하여-내림차순으로-정렬하기"><i class="fa fa-check"></i><b>7.5.1</b> <code>desc()</code>를 이용하여 내림차순으로 정렬하기</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:select"><i class="fa fa-check"></i><b>7.6</b> <code>select()</code>를 이용하여 변수 이름으로 열 선택하기</a><ul>
<li class="chapter" data-level="7.6.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름을-나열하여-선택하기"><i class="fa fa-check"></i><b>7.6.1</b> 변수 이름을 나열하여 선택하기</a></li>
<li class="chapter" data-level="7.6.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름으로-변수-범위를-선택하기"><i class="fa fa-check"></i><b>7.6.2</b> 변수 이름으로 변수 범위를 선택하기</a></li>
<li class="chapter" data-level="7.6.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름을-매칭하여-선택하기"><i class="fa fa-check"></i><b>7.6.3</b> 변수 이름을 매칭하여 선택하기</a></li>
<li class="chapter" data-level="7.6.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름-바꾸기"><i class="fa fa-check"></i><b>7.6.4</b> 변수 이름 바꾸기</a></li>
<li class="chapter" data-level="7.6.5" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-순서-바꾸기"><i class="fa fa-check"></i><b>7.6.5</b> 변수 순서 바꾸기</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:mutate"><i class="fa fa-check"></i><b>7.7</b> <code>mutate()</code>로 새로운 변수 만들기</a><ul>
<li class="chapter" data-level="7.7.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#transmute로-새로운-변수만-남기기"><i class="fa fa-check"></i><b>7.7.1</b> <code>transmute()</code>로 새로운 변수만 남기기</a></li>
<li class="chapter" data-level="7.7.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#새로운-변수를-만들-때-사용할-수-있는-함수들"><i class="fa fa-check"></i><b>7.7.2</b> 새로운 변수를 만들 때 사용할 수 있는 함수들</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:summarize"><i class="fa fa-check"></i><b>7.8</b> <code>summarize()</code>로 변수 요약하기</a></li>
<li class="chapter" data-level="7.9" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:groupBy"><i class="fa fa-check"></i><b>7.9</b> <code>group_by()</code>로 그룹 별로 요약하기</a></li>
<li class="chapter" data-level="7.10" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:pipeOperator"><i class="fa fa-check"></i><b>7.10</b> <code>%&gt;%</code> 파이프 연산자</a><ul>
<li class="chapter" data-level="7.10.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#여러-단계를-거쳐-데이터를-변환할-때"><i class="fa fa-check"></i><b>7.10.1</b> 여러 단계를 거쳐 데이터를 변환할 때</a></li>
<li class="chapter" data-level="7.10.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#파이프-연산자"><i class="fa fa-check"></i><b>7.10.2</b> 파이프 연산자</a></li>
<li class="chapter" data-level="7.10.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#ungroup"><i class="fa fa-check"></i><b>7.10.3</b> <code>ungroup()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chap-visulaize.html"><a href="chap-visulaize.html"><i class="fa fa-check"></i><b>8</b> ggplot2를 이용한 데이터 시각화</a><ul>
<li class="chapter" data-level="8.1" data-path="chap-visulaize.html"><a href="chap-visulaize.html#sec:getStarted-ggplot2"><i class="fa fa-check"></i><b>8.1</b> ggplot2 시작하기</a><ul>
<li class="chapter" data-level="8.1.1" data-path="chap-visulaize.html"><a href="chap-visulaize.html#subsec:tryGgplot"><i class="fa fa-check"></i><b>8.1.1</b> ggplot2 그래프 그려보기</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="chap-visulaize.html"><a href="chap-visulaize.html#sec:aesMapping"><i class="fa fa-check"></i><b>8.2</b> 데이터의 열을 도형의 속성에 대응시키기 (aesthetic mapping)</a><ul>
<li class="chapter" data-level="8.2.1" data-path="chap-visulaize.html"><a href="chap-visulaize.html#색상color-속성"><i class="fa fa-check"></i><b>8.2.1</b> 색상(<code>color</code>) 속성</a></li>
<li class="chapter" data-level="8.2.2" data-path="chap-visulaize.html"><a href="chap-visulaize.html#모양shape-속성"><i class="fa fa-check"></i><b>8.2.2</b> 모양(<code>shape</code>) 속성</a></li>
<li class="chapter" data-level="8.2.3" data-path="chap-visulaize.html"><a href="chap-visulaize.html#크기size와-투명도alpha-속성"><i class="fa fa-check"></i><b>8.2.3</b> 크기(<code>size</code>)와 투명도(<code>alpha</code>) 속성</a></li>
<li class="chapter" data-level="8.2.4" data-path="chap-visulaize.html"><a href="chap-visulaize.html#데이터의-한-열을-도형의-여러-속성에-대응시키기"><i class="fa fa-check"></i><b>8.2.4</b> 데이터의 한 열을 도형의 여러 속성에 대응시키기</a></li>
<li class="chapter" data-level="8.2.5" data-path="chap-visulaize.html"><a href="chap-visulaize.html#도형의-속성에-대응시키기-vs.-도형의-속성-인수를-설정하기"><i class="fa fa-check"></i><b>8.2.5</b> 도형의 속성에 대응시키기 vs. 도형의 속성 인수를 설정하기</a></li>
<li class="chapter" data-level="8.2.6" data-path="chap-visulaize.html"><a href="chap-visulaize.html#group-속성"><i class="fa fa-check"></i><b>8.2.6</b> <code>group</code> 속성</a></li>
<li class="chapter" data-level="8.2.7" data-path="chap-visulaize.html"><a href="chap-visulaize.html#그룹으로-나누어-선-그래프-그리기"><i class="fa fa-check"></i><b>8.2.7</b> 그룹으로 나누어 선 그래프 그리기</a></li>
<li class="chapter" data-level="8.2.8" data-path="chap-visulaize.html"><a href="chap-visulaize.html#이산형-변수는-group-속성으로-자동-매핑된다."><i class="fa fa-check"></i><b>8.2.8</b> 이산형 변수는 <code>group</code> 속성으로 자동 매핑된다.</a></li>
<li class="chapter" data-level="8.2.9" data-path="chap-visulaize.html"><a href="chap-visulaize.html#geom_smooth-함수에서-group-속성"><i class="fa fa-check"></i><b>8.2.9</b> <code>geom_smooth()</code> 함수에서 <code>group</code> 속성</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="chap-visulaize.html"><a href="chap-visulaize.html#sec:commonProblems"><i class="fa fa-check"></i><b>8.3</b> ggplot 명령문을 입력할 때 자주 발생하는 문제들</a></li>
<li class="chapter" data-level="8.4" data-path="chap-visulaize.html"><a href="chap-visulaize.html#sec:facets"><i class="fa fa-check"></i><b>8.4</b> 측면(facets)으로 나누어 그리기</a><ul>
<li class="chapter" data-level="8.4.1" data-path="chap-visulaize.html"><a href="chap-visulaize.html#facet_wrap로-일차원-측면-그래프-그리기"><i class="fa fa-check"></i><b>8.4.1</b> <code>facet_wrap()</code>로 일차원 측면 그래프 그리기</a></li>
<li class="chapter" data-level="8.4.2" data-path="chap-visulaize.html"><a href="chap-visulaize.html#facet_grid로-이차원-측면-그래프-그리기"><i class="fa fa-check"></i><b>8.4.2</b> <code>facet_grid()</code>로 이차원 측면 그래프 그리기</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="chap-visulaize.html"><a href="chap-visulaize.html#sec:layerAndGeom"><i class="fa fa-check"></i><b>8.5</b> 그래프 계층(layers)과 도형(geoms)</a><ul>
<li class="chapter" data-level="8.5.1" data-path="chap-visulaize.html"><a href="chap-visulaize.html#geom-함수의-순서와-그래프-계층"><i class="fa fa-check"></i><b>8.5.1</b> geom 함수의 순서와 그래프 계층</a></li>
<li class="chapter" data-level="8.5.2" data-path="chap-visulaize.html"><a href="chap-visulaize.html#ggplot-함수는-좌표축을-자동-조정한다."><i class="fa fa-check"></i><b>8.5.2</b> <code>ggplot()</code> 함수는 좌표축을 자동 조정한다.</a></li>
<li class="chapter" data-level="8.5.3" data-path="chap-visulaize.html"><a href="chap-visulaize.html#여러-데이터를-사용하여-그래프-계층-만들기"><i class="fa fa-check"></i><b>8.5.3</b> 여러 데이터를 사용하여 그래프 계층 만들기</a></li>
<li class="chapter" data-level="8.5.4" data-path="chap-visulaize.html"><a href="chap-visulaize.html#다른-데이터-범위로-그래프-계층-만들기"><i class="fa fa-check"></i><b>8.5.4</b> 다른 데이터 범위로 그래프 계층 만들기</a></li>
<li class="chapter" data-level="8.5.5" data-path="chap-visulaize.html"><a href="chap-visulaize.html#subsec:commonDataMapping"><i class="fa fa-check"></i><b>8.5.5</b> 공통 <code>data</code>와 <code>mapping</code>의 설정</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="chap-visulaize.html"><a href="chap-visulaize.html#sec:ggplotStat"><i class="fa fa-check"></i><b>8.6</b> 통계 변환</a><ul>
<li class="chapter" data-level="8.6.1" data-path="chap-visulaize.html"><a href="chap-visulaize.html#subsec:statCategorical"><i class="fa fa-check"></i><b>8.6.1</b> 범주형 변수의 통계 요약</a></li>
<li class="chapter" data-level="8.6.2" data-path="chap-visulaize.html"><a href="chap-visulaize.html#subsec:statNumerical"><i class="fa fa-check"></i><b>8.6.2</b> 수치형 변수의 통계 요약</a></li>
<li class="chapter" data-level="8.6.3" data-path="chap-visulaize.html"><a href="chap-visulaize.html#subsec:statNumericalPerCategory"><i class="fa fa-check"></i><b>8.6.3</b> 수치형 변수의 범주별 통계요약</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="chap-visulaize.html"><a href="chap-visulaize.html#sec:position"><i class="fa fa-check"></i><b>8.7</b> 위치 조정</a></li>
<li class="chapter" data-level="8.8" data-path="chap-visulaize.html"><a href="chap-visulaize.html#sec:typeofgraph"><i class="fa fa-check"></i><b>8.8</b> ggplot2 그래프의 종류</a><ul>
<li class="chapter" data-level="8.8.1" data-path="chap-visulaize.html"><a href="chap-visulaize.html#basic-graph"><i class="fa fa-check"></i><b>8.8.1</b> 기본 그래픽 함수</a></li>
<li class="chapter" data-level="8.8.2" data-path="chap-visulaize.html"><a href="chap-visulaize.html#onecategory"><i class="fa fa-check"></i><b>8.8.2</b> 한 범주형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.3" data-path="chap-visulaize.html"><a href="chap-visulaize.html#onenumeric"><i class="fa fa-check"></i><b>8.8.3</b> 한 수치형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.4" data-path="chap-visulaize.html"><a href="chap-visulaize.html#twocategories"><i class="fa fa-check"></i><b>8.8.4</b> 두 범주형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.5" data-path="chap-visulaize.html"><a href="chap-visulaize.html#category-numeric"><i class="fa fa-check"></i><b>8.8.5</b> 범주형 변수와 수치형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.6" data-path="chap-visulaize.html"><a href="chap-visulaize.html#twonumeric"><i class="fa fa-check"></i><b>8.8.6</b> 두 수치형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.7" data-path="chap-visulaize.html"><a href="chap-visulaize.html#morethanthree"><i class="fa fa-check"></i><b>8.8.7</b> 세 변수 이상의 그래프</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="chap-visulaize.html"><a href="chap-visulaize.html#modification"><i class="fa fa-check"></i><b>8.9</b> 그래프의 외양 바꾸기</a><ul>
<li class="chapter" data-level="8.9.1" data-path="chap-visulaize.html"><a href="chap-visulaize.html#axes"><i class="fa fa-check"></i><b>8.9.1</b> 좌표축의 조정</a></li>
<li class="chapter" data-level="8.9.2" data-path="chap-visulaize.html"><a href="chap-visulaize.html#labelsmodification"><i class="fa fa-check"></i><b>8.9.2</b> 레이블 조정</a></li>
<li class="chapter" data-level="8.9.3" data-path="chap-visulaize.html"><a href="chap-visulaize.html#themes"><i class="fa fa-check"></i><b>8.9.3</b> 테마 변경</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="chap-visulaize.html"><a href="chap-visulaize.html#misc"><i class="fa fa-check"></i><b>8.10</b> 기타 유용한 팁들</a><ul>
<li class="chapter" data-level="8.10.1" data-path="chap-visulaize.html"><a href="chap-visulaize.html#combinegraph"><i class="fa fa-check"></i><b>8.10.1</b> 여러 그래프를 한 도표에 넣기</a></li>
<li class="chapter" data-level="8.10.2" data-path="chap-visulaize.html"><a href="chap-visulaize.html#savegraph"><i class="fa fa-check"></i><b>8.10.2</b> 그래프 저장하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html"><i class="fa fa-check"></i><b>9</b> R 고급 데이터 변환</a><ul>
<li class="chapter" data-level="9.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#데이터의-단순-결합"><i class="fa fa-check"></i><b>9.1</b> 데이터의 단순 결합</a><ul>
<li class="chapter" data-level="9.1.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#데이터를-행으로-결합하기"><i class="fa fa-check"></i><b>9.1.1</b> 데이터를 행으로 결합하기</a></li>
<li class="chapter" data-level="9.1.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#데이터를-열로-결합하기"><i class="fa fa-check"></i><b>9.1.2</b> 데이터를 열로 결합하기</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#관계형-데이터베이스처럼-데이터-결합하기"><i class="fa fa-check"></i><b>9.2</b> 관계형 데이터베이스처럼 데이터 결합하기</a><ul>
<li class="chapter" data-level="9.2.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#inner-join과-outer-join"><i class="fa fa-check"></i><b>9.2.1</b> Inner join과 outer join</a></li>
<li class="chapter" data-level="9.2.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#filtering-join"><i class="fa fa-check"></i><b>9.2.2</b> Filtering join</a></li>
<li class="chapter" data-level="9.2.3" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#join을-수행하는-다른-방법들"><i class="fa fa-check"></i><b>9.2.3</b> Join을 수행하는 다른 방법들</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#sec:tidyr"><i class="fa fa-check"></i><b>9.3</b> <code>tidyr</code> 패키지를 이용하여 정돈 데이터 형식으로 바꾸기</a><ul>
<li class="chapter" data-level="9.3.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#pivot_longer-여러-열에-걸친-한-변수의-데이터를-하나의-열로-길게-모으기"><i class="fa fa-check"></i><b>9.3.1</b> <code>pivot_longer</code>: 여러 열에 걸친 한 변수의 데이터를 하나의 열로 길게 모으기</a></li>
<li class="chapter" data-level="9.3.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#subsec:pivot-wider"><i class="fa fa-check"></i><b>9.3.2</b> <code>pivot_wider</code>: 여러 행에 걸쳐진 하나의 관측 데이터를 하나의 행으로 넓게 펼치기</a></li>
<li class="chapter" data-level="9.3.3" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#seperate-한-셀을-여러-셀로-분리하기"><i class="fa fa-check"></i><b>9.3.3</b> <code>seperate</code>: 한 셀을 여러 셀로 분리하기</a></li>
<li class="chapter" data-level="9.3.4" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#unite-여러-셀의-데이터를-하나의-셀로-병합하기"><i class="fa fa-check"></i><b>9.3.4</b> <code>unite</code>: 여러 셀의 데이터를 하나의 셀로 병합하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html"><i class="fa fa-check"></i><b>10</b> R 프로그래밍 구조</a><ul>
<li class="chapter" data-level="10.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-조건문"><i class="fa fa-check"></i><b>10.1</b> R 조건문</a><ul>
<li class="chapter" data-level="10.1.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#if-조건문"><i class="fa fa-check"></i><b>10.1.1</b> if 조건문</a></li>
<li class="chapter" data-level="10.1.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#switch-함수"><i class="fa fa-check"></i><b>10.1.2</b> switch 함수</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-반복문"><i class="fa fa-check"></i><b>10.2</b> R 반복문</a><ul>
<li class="chapter" data-level="10.2.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#for-반복문"><i class="fa fa-check"></i><b>10.2.1</b> for 반복문</a></li>
<li class="chapter" data-level="10.2.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#while-반복문"><i class="fa fa-check"></i><b>10.2.2</b> while 반복문</a></li>
<li class="chapter" data-level="10.2.3" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#repeat-반복문"><i class="fa fa-check"></i><b>10.2.3</b> repeat 반복문</a></li>
<li class="chapter" data-level="10.2.4" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#반복문의-제어-명령"><i class="fa fa-check"></i><b>10.2.4</b> 반복문의 제어 명령</a></li>
<li class="chapter" data-level="10.2.5" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r에서-반복문-사용의-주의점"><i class="fa fa-check"></i><b>10.2.5</b> R에서 반복문 사용의 주의점</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-함수"><i class="fa fa-check"></i><b>10.3</b> R 함수</a><ul>
<li class="chapter" data-level="10.3.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#함수의-생성과-호출"><i class="fa fa-check"></i><b>10.3.1</b> 함수의 생성과 호출</a></li>
<li class="chapter" data-level="10.3.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#함수-객체를-인수로-사용하기"><i class="fa fa-check"></i><b>10.3.2</b> 함수 객체를 인수로 사용하기</a></li>
<li class="chapter" data-level="10.3.3" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-연산자"><i class="fa fa-check"></i><b>10.3.3</b> R 연산자</a></li>
<li class="chapter" data-level="10.3.4" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#변수-범위"><i class="fa fa-check"></i><b>10.3.4</b> 변수 범위</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html"><i class="fa fa-check"></i><b>11</b> R 객체 지향 프로그래밍</a><ul>
<li class="chapter" data-level="11.1" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#객체-지향-프로그래밍"><i class="fa fa-check"></i><b>11.1</b> 객체 지향 프로그래밍</a></li>
<li class="chapter" data-level="11.2" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s3-클래스"><i class="fa fa-check"></i><b>11.2</b> S3 클래스</a><ul>
<li class="chapter" data-level="11.2.1" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s3-클래스-객체-만들기"><i class="fa fa-check"></i><b>11.2.1</b> S3 클래스 객체 만들기</a></li>
<li class="chapter" data-level="11.2.2" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#포괄-함수generic-functions"><i class="fa fa-check"></i><b>11.2.2</b> 포괄 함수(generic functions)</a></li>
<li class="chapter" data-level="11.2.3" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s3에서-상속성의-구현"><i class="fa fa-check"></i><b>11.2.3</b> S3에서 상속성의 구현</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s4-클래스"><i class="fa fa-check"></i><b>11.3</b> S4 클래스</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 프로그래밍 (개정판)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ch:dataTransformation" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> dplyr을 이용한 데이터 변환</h1>
<p>데이터를 분석하려면 데이터를 분석에 적절한 형식으로 변환하는 전처리가 필요하다. 또한 기본적인 분석을 위해서도 데이터를 요약하는 작업이 필요하다. 이 장에서는 정돈 형식의 데이터 프레임을 변환하는 방법을 배운다.</p>
<div id="sec:tidyData" class="section level2">
<h2><span class="header-section-number">7.1</span> 정돈 데이터 (tidy data)</h2>
<div id="정돈-데이터-형식의-조건" class="section level3">
<h3><span class="header-section-number">7.1.1</span> 정돈 데이터 형식의 조건</h3>
<p>정돈 데이터란 그림 <a href="ch-dataTransformation.html#fig:tidyData">7.1</a>처럼 다음의 조건을 만족하는 데이터 행렬(R에서는 데이터 프레임)의 형식을 의미한다.</p>
<ul>
<li>데이터 행렬의 각 행과 관측(대상)(observations)은 일대일의 관계이다.</li>
<li>데이터 행렬의 각 열과 변수(variables)는 일대일의 관계이다.</li>
<li>측정값(values)은 각 셀과 일대일의 관계이다.</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:tidyData"></span>
<img src="img/tidyData.png" alt="정돈 데이터" width="60%" />
<p class="caption">
Figure 7.1: 정돈 데이터
</p>
</div>
</div>
<div id="비정돈-데이터-형식" class="section level3">
<h3><span class="header-section-number">7.1.2</span> 비정돈 데이터 형식</h3>
<p>현실에서 만나는 많은 데이터가 정돈 데이터 형식이지만, 그렇지 않은 데이터도 자주 볼 수 있다. 그림 <a href="ch-dataTransformation.html#fig:untidyData">7.2</a>의 왼쪽 데이터는 어떤 가상의 감염병에 대해 세 나라의 발생 사례를 월별로 정리한 데이터이다. 이 데이터는 감염 사례라는 변수와 관련된 데이터가 3개의 열에 흩어져 있으므로 비정돈 형식이다. 월별, 년도별 매출처럼 시계열 데이터는 종종 이런 형식으로 데이터가 표현된다. 이러한 방식의 표현은 데이터를 매우 압축적인 방식으로 표현할 수 있고 같은 시간대의 데이터를 비교하기 쉬운 장점이 있다.</p>
<p>그림 <a href="ch-dataTransformation.html#fig:untidyData">7.2</a>의 오른쪽 데이터는 왼쪽 데이터를 정돈 형식으로 변환한 결과이다. 이러한 변환을 하는 방법에 대해서는 <a href="#ch:dataWrangle"><strong>??</strong></a> 장에서 다룰 것이다.</p>
<div class="figure" style="text-align: center"><span id="fig:untidyData"></span>
<img src="img/untidyData.png" alt="비정돈 데이터" width="60%" />
<p class="caption">
Figure 7.2: 비정돈 데이터
</p>
</div>
</div>
<div id="정돈-데이터를-사용하는-이유" class="section level3">
<h3><span class="header-section-number">7.1.3</span> 정돈 데이터를 사용하는 이유</h3>
<p>그림 <a href="ch-dataTransformation.html#fig:untidyData">7.2</a>를 보면 정돈 형식 데이터가 오히려 비효율적인 방식으로 보이며, 데이터를 한 눈에 비교하기도 어려워 보인다. 그럼에도 정돈 형식의 데이터를 사용하는 이유는 표준화된 데이터 변환 작업을 하기 위해서이다.</p>
<p>한 행이 하나의 관측 대상을, 한 열이 하나의 변수를, 한 셀이 한 값을 나타낸다는 가정이 성립하면, 데이터 변환이나 데이터를 이용한 그래픽 작업을 데이터의 내용에 무관하게 항상 일정한 형식으로 수행할 수 있다.</p>
</div>
</div>
<div id="tidyverse-패키지" class="section level2">
<h2><span class="header-section-number">7.2</span> <code>tidyverse</code> 패키지</h2>
<p><code>tidyverse</code> 패키지는 정돈 데이터 패러다임을 따른 R 패키지들을 한번에 설치하고 적재할 수 있도록 돕는 패키지이다.</p>
<div id="tidyverse-패키지-설치" class="section level3">
<h3><span class="header-section-number">7.2.1</span> <code>tidyverse</code> 패키지 설치</h3>
<p><code>tidyverse</code> 패키지를 설치하려면 다음 명령을 실행하면 된다. 패키지의 이름은 문자열이므로 따옴표 안에 기술해야 한다.</p>
<div class="sourceCode" id="cb1305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1305-1"><a href="ch-dataTransformation.html#cb1305-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>또는 RStudio의 Packages 탭에서 [Install]을 클릭한 후 tidyverse라고 입력을 하면 된다. 패키지 설치는 한 번만 수행하면 된다.</p>
</div>
<div id="tidyverse-패키지-적재" class="section level3">
<h3><span class="header-section-number">7.2.2</span> <code>tidyverse</code> 패키지 적재</h3>
<p><code>tidyverse</code> 패키지가 설치되었으면 패키지를 사용할 때마다 네임스페이스를 적재하고 검색 리스트에 패키지를 포함하는 작업이 필요하다.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> 다음은 <code>tidyverse</code> 패키지를 적재하는 명령어이다. 이번에는 패키지 이름에 따옴표가 없음에 주의한다.</p>
<div class="sourceCode" id="cb1306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1306-1"><a href="ch-dataTransformation.html#cb1306-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">library</span>(tidyverse)</span></code></pre></div>
<pre><code>-- Attaching packages ------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>√ ggplot2 3.3.2     √ purrr   0.3.4
√ tibble  3.0.3     √ dplyr   1.0.2
√ tidyr   1.1.1     √ stringr 1.4.0
√ readr   1.3.1     √ forcats 0.5.0</code></pre>
<pre><code>-- Conflicts ---------------------------- tidyverse_conflicts() --
x dplyr::filter() masks stats::filter()
x dplyr::lag()    masks stats::lag()</code></pre>
<p>앞의 명령을 실행하면 정돈 데이터 패러다임을 따르는 여러 개의 패키지가 동시에 적재된다. 그리고 R 기본 패키지와 정돈 데이터 패키지 중에서 이름이 충돌이 나는 것에 대해 보고를 한다. 만약 R 기본 패키지에서 이 함수를 사용하는 경우에는 <code>패키지이름::함수()</code> 형식으로만 사용할 수 있다. 자세한 내용은 R 관련 책을 참조하기 바란다.</p>
</div>
</div>
<div id="sec:dplyr" class="section level2">
<h2><span class="header-section-number">7.3</span> <code>dplyr</code> 패키지와 정돈 데이터의 변환</h2>
<div id="dplyr-패키지" class="section level3">
<h3><span class="header-section-number">7.3.1</span> <code>dplyr</code> 패키지</h3>
<p>정돈 데이터의 변환에는 <code>tidyverse</code> 패키지가 포함하고 있는 <code>dplyr</code> 패키지가 이용된다. 앞에서 <code>tidyverse</code>를 적재하였으면 이미 <code>dplyr</code>이 적재되어 있으므로 다시 적재할 필요가 없다.</p>
</div>
<div id="정돈-데이터-변환의-종류" class="section level3">
<h3><span class="header-section-number">7.3.2</span> 정돈 데이터 변환의 종류</h3>
<p>정돈 데이터의 변환은 크게 5가지 변환 작업이 있다.</p>
<ul>
<li><code>filter()</code>: 데이터에서 관측(대상)을 측정값을 기준으로 선택한다.</li>
<li><code>arrange()</code>: 관측(대상)을 기준으로 데이터를 정렬한다.</li>
<li><code>select()</code>: 변수이름으로 일부 변수만 데이터에서 선택한다.</li>
<li><code>mutate()</code>: 기존 변수를 사용하여 새로운 변수를 데이터에 추가한다.</li>
<li><code>summarize()</code>: 여러 측정치를 하나의 통계량으로 요약한다.</li>
</ul>
<p>그리고 위의 작업은 <code>group_by()</code> 함수와 같이 사용되어 전체 데이터에서 작업이 수행되는 것이 아니라 관측(대상)의 그룹별로 수행되도록 조정할 수 있다.</p>
<p>일반적으로 데이터의 변환 작업은 위의 6가지 작업이 여러 차례 순서대로 결합하여 진행된다.</p>
</div>
<div id="mpg-데이터" class="section level3">
<h3><span class="header-section-number">7.3.3</span> <code>mpg</code> 데이터</h3>
<p>이 장에서는 <code>ggplot2()</code> 패키지에서 제공하는 <code>mpg</code> 데이터를 이용하여 정돈 데이터를 변환하는 함수를 설명한다.</p>
<p>다음 명령을 이용하여 <code>mpg</code> 데이터를 출력해 보자. 화면의 크기에 따라 출력되는 내용이 책과는 조금 다를 수 있다.</p>
<div class="sourceCode" id="cb1310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1310-1"><a href="ch-dataTransformation.html#cb1310-1"></a><span class="op">&gt;</span><span class="st"> </span>mpg</span></code></pre></div>
<pre><code># A tibble: 234 x 11
   manufacturer model    displ  year   cyl trans   drv     cty   hwy fl    class
   &lt;chr&gt;        &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
 1 audi         a4         1.8  1999     4 auto(l~ f        18    29 p     comp~
 2 audi         a4         1.8  1999     4 manual~ f        21    29 p     comp~
 3 audi         a4         2    2008     4 manual~ f        20    31 p     comp~
 4 audi         a4         2    2008     4 auto(a~ f        21    30 p     comp~
 5 audi         a4         2.8  1999     6 auto(l~ f        16    26 p     comp~
 6 audi         a4         2.8  1999     6 manual~ f        18    26 p     comp~
 7 audi         a4         3.1  2008     6 auto(a~ f        18    27 p     comp~
 8 audi         a4 quat~   1.8  1999     4 manual~ 4        18    26 p     comp~
 9 audi         a4 quat~   1.8  1999     4 auto(l~ 4        16    25 p     comp~
10 audi         a4 quat~   2    2008     4 manual~ 4        20    28 p     comp~
# ... with 224 more rows</code></pre>
<p><code>mpg</code>는 1999년과 2008년에 미국 EPA에서 조사하여 발표한 자동차 주요 모델별 연비 데이터이다. 데이터는 234 개의 행이 있으며, 각 행은 다음과 같은 변수로 구성되어 있다.</p>
<ul>
<li>manufacturer: 자동차 제조사</li>
<li>model: 자동차 모델명</li>
<li>displ: 자동차 배기량</li>
<li>year: 제조년도</li>
<li>cyl: 엔진 실린더 수</li>
<li>trans: 자동차 트랜스미션 종류</li>
<li>drv: 자동차 구동 방식. f=전륜구동, r=후륜구동, 4=사륜구동</li>
<li>cty: 도심 연비 (마일/갤론)</li>
<li>hwy: 고속도로 연비 (마일/갤론)</li>
<li>fl: 연료 종류</li>
<li>class: 자동차 분류</li>
</ul>
</div>
</div>
<div id="sec:filter" class="section level2">
<h2><span class="header-section-number">7.4</span> <code>filter()</code>로 행 선택하기</h2>
<div id="선택-조건이-하나인-경우" class="section level3">
<h3><span class="header-section-number">7.4.1</span> 선택 조건이 하나인 경우</h3>
<p>선택 조건이 하나인 경우 다음 형식으로 <code>filter()</code>를 사용한다.</p>
<pre><code>filter(데이터프레임, 조건)</code></pre>
<p>’데이터프레임’에는 <code>filter()</code>를 적용할 데이터 프레임을 ’조건’에는 행 선택 조건을 기술한다. ’조건’은 논리값 벡터이어야 한다. 많은 경우 ’조건’은 다음처럼 변수와 어떤 값을 비교연산자로 비교한다.</p>
<div class="sourceCode" id="cb1313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1313-1"><a href="ch-dataTransformation.html#cb1313-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, manufacturer<span class="op">==</span><span class="st">&quot;hyundai&quot;</span>)</span></code></pre></div>
<pre><code># A tibble: 14 x 11
   manufacturer model  displ  year   cyl trans   drv     cty   hwy fl    class  
   &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
 1 hyundai      sonata   2.4  1999     4 auto(l~ f        18    26 r     midsize
 2 hyundai      sonata   2.4  1999     4 manual~ f        18    27 r     midsize
 3 hyundai      sonata   2.4  2008     4 auto(l~ f        21    30 r     midsize
 4 hyundai      sonata   2.4  2008     4 manual~ f        21    31 r     midsize
 5 hyundai      sonata   2.5  1999     6 auto(l~ f        18    26 r     midsize
 6 hyundai      sonata   2.5  1999     6 manual~ f        18    26 r     midsize
 7 hyundai      sonata   3.3  2008     6 auto(l~ f        19    28 r     midsize
 8 hyundai      tibur~   2    1999     4 auto(l~ f        19    26 r     subcom~
 9 hyundai      tibur~   2    1999     4 manual~ f        19    29 r     subcom~
10 hyundai      tibur~   2    2008     4 manual~ f        20    28 r     subcom~
11 hyundai      tibur~   2    2008     4 auto(l~ f        20    27 r     subcom~
12 hyundai      tibur~   2.7  2008     6 auto(l~ f        17    24 r     subcom~
13 hyundai      tibur~   2.7  2008     6 manual~ f        16    24 r     subcom~
14 hyundai      tibur~   2.7  2008     6 manual~ f        17    24 r     subcom~</code></pre>
<div class="sourceCode" id="cb1315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1315-1"><a href="ch-dataTransformation.html#cb1315-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, cty <span class="op">&gt;</span><span class="st"> </span><span class="dv">28</span>)</span></code></pre></div>
<pre><code># A tibble: 3 x 11
  manufacturer model   displ  year   cyl trans   drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 volkswagen   jetta     1.9  1999     4 manual~ f        33    44 d     compact
2 volkswagen   new be~   1.9  1999     4 manual~ f        35    44 d     subcom~
3 volkswagen   new be~   1.9  1999     4 auto(l~ f        29    41 d     subcom~</code></pre>
<div class="sourceCode" id="cb1317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1317-1"><a href="ch-dataTransformation.html#cb1317-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, cty <span class="op">&gt;=</span><span class="st"> </span><span class="dv">28</span>)</span></code></pre></div>
<pre><code># A tibble: 5 x 11
  manufacturer model   displ  year   cyl trans   drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 honda        civic     1.6  1999     4 manual~ f        28    33 r     subcom~
2 toyota       corolla   1.8  2008     4 manual~ f        28    37 r     compact
3 volkswagen   jetta     1.9  1999     4 manual~ f        33    44 d     compact
4 volkswagen   new be~   1.9  1999     4 manual~ f        35    44 d     subcom~
5 volkswagen   new be~   1.9  1999     4 auto(l~ f        29    41 d     subcom~</code></pre>
<p>조건을 서술할 때 자주 틀리는 부분이 등호 기호로 <code>=</code>를 사용하는 것이다. R에서 두 값이 같은지를 비교할 때는 <code>==</code>를 사용한다.</p>
<p>다음처럼 조건에 사용되는 변수에 대해 연산을 수행한 후에 그 결과를 비교할 수도 있다.</p>
<div class="sourceCode" id="cb1319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1319-1"><a href="ch-dataTransformation.html#cb1319-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, cty <span class="op">*</span><span class="st"> </span><span class="dv">2</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">60</span>)</span></code></pre></div>
<pre><code># A tibble: 2 x 11
  manufacturer model   displ  year   cyl trans   drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 volkswagen   jetta     1.9  1999     4 manual~ f        33    44 d     compact
2 volkswagen   new be~   1.9  1999     4 manual~ f        35    44 d     subcom~</code></pre>
<div class="sourceCode" id="cb1321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1321-1"><a href="ch-dataTransformation.html#cb1321-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, <span class="kw">sqrt</span>(cty) <span class="op">&lt;</span><span class="st"> </span><span class="fl">3.2</span>)</span></code></pre></div>
<pre><code># A tibble: 5 x 11
  manufacturer model      displ  year   cyl trans  drv     cty   hwy fl    class
  &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
1 dodge        dakota pi~   4.7  2008     8 auto(~ 4         9    12 e     pick~
2 dodge        durango 4~   4.7  2008     8 auto(~ 4         9    12 e     suv  
3 dodge        ram 1500 ~   4.7  2008     8 auto(~ 4         9    12 e     pick~
4 dodge        ram 1500 ~   4.7  2008     8 manua~ 4         9    12 e     pick~
5 jeep         grand che~   4.7  2008     8 auto(~ 4         9    12 e     suv  </code></pre>
</div>
<div id="여러-조건을-만족하는-행-추출하기" class="section level3">
<h3><span class="header-section-number">7.4.2</span> 여러 조건을 만족하는 행 추출하기</h3>
<p>두 개 이상의 조건을 모두 만족하는 행만 뽑아내려면 다음의 문법을 사용한다.</p>
<pre><code>filter(데이터프레임, 조건1, 조건2, ..., 조건n)</code></pre>
<p>다음은 현대에서 생산한 차 중 도심 연비가 20 마일 이상인 차만 추출한 결과이다.</p>
<div class="sourceCode" id="cb1324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1324-1"><a href="ch-dataTransformation.html#cb1324-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, manufacturer<span class="op">==</span><span class="st">&quot;hyundai&quot;</span>, cty <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>)</span></code></pre></div>
<pre><code># A tibble: 4 x 11
  manufacturer model  displ  year   cyl trans    drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 hyundai      sonata   2.4  2008     4 auto(l4) f        21    30 r     midsize
2 hyundai      sonata   2.4  2008     4 manual(~ f        21    31 r     midsize
3 hyundai      tibur~   2    2008     4 manual(~ f        20    28 r     subcom~
4 hyundai      tibur~   2    2008     4 auto(l4) f        20    27 r     subcom~</code></pre>
<p>앞의 조건에서 배기량이 2.4 이상인 차만 추출해 보자.</p>
<div class="sourceCode" id="cb1326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1326-1"><a href="ch-dataTransformation.html#cb1326-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, manufacturer<span class="op">==</span><span class="st">&quot;hyundai&quot;</span>, cty <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>, displ <span class="op">&gt;=</span><span class="st"> </span><span class="fl">2.4</span>)</span></code></pre></div>
<pre><code># A tibble: 2 x 11
  manufacturer model  displ  year   cyl trans     drv     cty   hwy fl    class 
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;     &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
1 hyundai      sonata   2.4  2008     4 auto(l4)  f        21    30 r     midsi~
2 hyundai      sonata   2.4  2008     4 manual(m~ f        21    31 r     midsi~</code></pre>
</div>
<div id="논리-연산자로-복합-조건-만들기" class="section level3">
<h3><span class="header-section-number">7.4.3</span> 논리 연산자로 복합 조건 만들기</h3>
<p>지금까지는 하나의 조건이나 여러 조건을 동시에 만족하는 행을 추출하는 방법을 보았다. 어떤 경우에는 여러 조건 중 하나라도 만족하면 그 행을 추출해야 할 경우가 있다. 이러한 경우에는 @ref(ch:R_Data_Basic) 장에서 배운 논리 연산자를 이용하여 복합 조건을 만들어야 한다.</p>
<p>다음은 OR 연자자인 <code>|</code>를 이용하여 두 조건 중 하나만 만족하여도 행이 추출되도록 하였다.</p>
<div class="sourceCode" id="cb1328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1328-1"><a href="ch-dataTransformation.html#cb1328-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, model<span class="op">==</span><span class="st">&quot;sonata&quot;</span> <span class="op">|</span><span class="st"> </span>cty <span class="op">&gt;=</span><span class="st"> </span><span class="dv">28</span>)</span></code></pre></div>
<pre><code># A tibble: 12 x 11
   manufacturer model   displ  year   cyl trans   drv     cty   hwy fl    class 
   &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
 1 honda        civic     1.6  1999     4 manual~ f        28    33 r     subco~
 2 hyundai      sonata    2.4  1999     4 auto(l~ f        18    26 r     midsi~
 3 hyundai      sonata    2.4  1999     4 manual~ f        18    27 r     midsi~
 4 hyundai      sonata    2.4  2008     4 auto(l~ f        21    30 r     midsi~
 5 hyundai      sonata    2.4  2008     4 manual~ f        21    31 r     midsi~
 6 hyundai      sonata    2.5  1999     6 auto(l~ f        18    26 r     midsi~
 7 hyundai      sonata    2.5  1999     6 manual~ f        18    26 r     midsi~
 8 hyundai      sonata    3.3  2008     6 auto(l~ f        19    28 r     midsi~
 9 toyota       corolla   1.8  2008     4 manual~ f        28    37 r     compa~
10 volkswagen   jetta     1.9  1999     4 manual~ f        33    44 d     compa~
11 volkswagen   new be~   1.9  1999     4 manual~ f        35    44 d     subco~
12 volkswagen   new be~   1.9  1999     4 auto(l~ f        29    41 d     subco~</code></pre>
<p>만약 위의 결과에서 2008년도 데이터만 추출하고 싶다면 어떻게 해야 할까? 다음처럼 두 조건식을 사용하여 첫 번째 조건과 두 번째 조건을 모두 만족하는 결과만 추출할 수도 있고, 하나의 조건식에 AND 연산자인 <code>&amp;</code>를 사용하여 복합 조건식을 사용하여 추출할 수도 있다.</p>
<div class="sourceCode" id="cb1330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1330-1"><a href="ch-dataTransformation.html#cb1330-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, model<span class="op">==</span><span class="st">&quot;sonata&quot;</span> <span class="op">|</span><span class="st"> </span>cty <span class="op">&gt;=</span><span class="st"> </span><span class="dv">28</span>, year<span class="op">==</span><span class="dv">2008</span>)</span></code></pre></div>
<pre><code># A tibble: 4 x 11
  manufacturer model   displ  year   cyl trans    drv     cty   hwy fl    class 
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
1 hyundai      sonata    2.4  2008     4 auto(l4) f        21    30 r     midsi~
2 hyundai      sonata    2.4  2008     4 manual(~ f        21    31 r     midsi~
3 hyundai      sonata    3.3  2008     6 auto(l5) f        19    28 r     midsi~
4 toyota       corolla   1.8  2008     4 manual(~ f        28    37 r     compa~</code></pre>
<div class="sourceCode" id="cb1332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1332-1"><a href="ch-dataTransformation.html#cb1332-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, (model<span class="op">==</span><span class="st">&quot;sonata&quot;</span> <span class="op">|</span><span class="st"> </span>cty <span class="op">&gt;=</span><span class="st"> </span><span class="dv">28</span>) <span class="op">&amp;</span><span class="st"> </span>year<span class="op">==</span><span class="dv">2008</span>)</span></code></pre></div>
<pre><code># A tibble: 4 x 11
  manufacturer model   displ  year   cyl trans    drv     cty   hwy fl    class 
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
1 hyundai      sonata    2.4  2008     4 auto(l4) f        21    30 r     midsi~
2 hyundai      sonata    2.4  2008     4 manual(~ f        21    31 r     midsi~
3 hyundai      sonata    3.3  2008     6 auto(l5) f        19    28 r     midsi~
4 toyota       corolla   1.8  2008     4 manual(~ f        28    37 r     compa~</code></pre>
<p>단, 복합 조건식에서 AND 연산이 OR 연산보다 우선순위가 있으므로 괄호를 사용하여 연산의 순서가 제대로 되도록 하여야 한다. 괄호가 없으면 AND가 수행된 후 OR가 수행되어 모든 소타나 자동차의 결과가 추출되었음을 볼 수 있다.</p>
<div class="sourceCode" id="cb1334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1334-1"><a href="ch-dataTransformation.html#cb1334-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(mpg, model<span class="op">==</span><span class="st">&quot;sonata&quot;</span> <span class="op">|</span><span class="st"> </span>cty <span class="op">&gt;=</span><span class="st"> </span><span class="dv">28</span> <span class="op">&amp;</span><span class="st"> </span>year<span class="op">==</span><span class="dv">2008</span>)</span></code></pre></div>
<pre><code># A tibble: 8 x 11
  manufacturer model   displ  year   cyl trans    drv     cty   hwy fl    class 
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
1 hyundai      sonata    2.4  1999     4 auto(l4) f        18    26 r     midsi~
2 hyundai      sonata    2.4  1999     4 manual(~ f        18    27 r     midsi~
3 hyundai      sonata    2.4  2008     4 auto(l4) f        21    30 r     midsi~
4 hyundai      sonata    2.4  2008     4 manual(~ f        21    31 r     midsi~
5 hyundai      sonata    2.5  1999     6 auto(l4) f        18    26 r     midsi~
6 hyundai      sonata    2.5  1999     6 manual(~ f        18    26 r     midsi~
7 hyundai      sonata    3.3  2008     6 auto(l5) f        19    28 r     midsi~
8 toyota       corolla   1.8  2008     4 manual(~ f        28    37 r     compa~</code></pre>
</div>
<div id="결측치가-있는-경우" class="section level3">
<h3><span class="header-section-number">7.4.4</span> 결측치가 있는 경우</h3>
<p>R에서는 데이터에 결측치가 있을 때 이를 <code>NA</code> 값으로 표시한다. 예를 들어 5 명의 학생의 키 데이터가 있는 데 마지막 학생의 데이터를 얻지 못하였다면, 그 학생의 데이터는 <code>NA</code>로 값을 입력한다.</p>
<p><code>is.na()</code> 함수를 이용하면 결측치의 포함 여부를 확인할 수 있다. na.omit() 함수를 이용하면 결측치를 제외한 벡터를 만들 수 있다.</p>
<div class="sourceCode" id="cb1336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1336-1"><a href="ch-dataTransformation.html#cb1336-1"></a><span class="op">&gt;</span><span class="st"> </span>z &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="ot">NA</span>)</span>
<span id="cb1336-2"><a href="ch-dataTransformation.html#cb1336-2"></a><span class="op">&gt;</span><span class="st"> </span>z</span></code></pre></div>
<pre><code>[1]  1  2  3 NA</code></pre>
<div class="sourceCode" id="cb1338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1338-1"><a href="ch-dataTransformation.html#cb1338-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">is.na</span>(z)</span></code></pre></div>
<pre><code>[1] FALSE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb1340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1340-1"><a href="ch-dataTransformation.html#cb1340-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">na.omit</span>(z)</span></code></pre></div>
<pre><code>[1] 1 2 3
attr(,&quot;na.action&quot;)
[1] 4
attr(,&quot;class&quot;)
[1] &quot;omit&quot;</code></pre>
<p>결측치가 있으면 sum()이나 mean() 같은 함수들의 결과는 NA가 출력된다. 결측치를 제외하고 이들 함수를 사용하려면 함수 인수에 na.rm=TRUE를 덧붙여야 한다. 그러면 결측치를 제외하고 결과를 계산하게 된다.</p>
<div class="sourceCode" id="cb1342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1342-1"><a href="ch-dataTransformation.html#cb1342-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">sum</span>(z)</span></code></pre></div>
<pre><code>[1] NA</code></pre>
<div class="sourceCode" id="cb1344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1344-1"><a href="ch-dataTransformation.html#cb1344-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">sum</span>(z, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>[1] 6</code></pre>
<p>조건에 사용되는 변수에 결측치가 있는 경우에 결측치가 있는 행을 추출하려면 <code>is.na()</code> 함수를 이용하여야 한다.</p>
</div>
</div>
<div id="sec:arrange" class="section level2">
<h2><span class="header-section-number">7.5</span> <code>arrange()</code>로 행 정렬하기</h2>
<p><code>arrange()</code>는 다음 문법을 사용하여 행을 정렬한다.</p>
<pre><code>arrange(데이터프레임, 첫번째 정렬 기준 변수, 두번째 정렬 기준 변수, ....)</code></pre>
<p><code>filter()</code>와 마찬가지로 첫 번재 인수로 정렬할 데이터 프레임을 전달 받는다. 그리고 두번재 인수부터 정렬의 기준이 되는 변수를 차례로 기술한다. 첫 번째 기준 변수의 값이 같으면, 두 번째 기준 변수를, 두 번째 기준 변수의 값까지 같으면 그 다음 변수를 기준으로 차례로 순서를 결정하여 정렬을 수행한다.</p>
<p>다음은 2008년도 현대의 자동차 모델만 <code>filter()</code>론 선택하여 <code>a</code>라는 변수에 저장한 후, 이 데이터에 대하여 여러 조건으로 정렬을 수행해본 예이다.</p>
<div class="sourceCode" id="cb1347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1347-1"><a href="ch-dataTransformation.html#cb1347-1"></a><span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span><span class="kw">filter</span>(mpg, manufacturer <span class="op">==</span><span class="st"> &quot;hyundai&quot;</span>, year <span class="op">==</span><span class="st"> </span><span class="dv">2008</span>)</span>
<span id="cb1347-2"><a href="ch-dataTransformation.html#cb1347-2"></a><span class="op">&gt;</span><span class="st"> </span>a</span></code></pre></div>
<pre><code># A tibble: 8 x 11
  manufacturer model  displ  year   cyl trans    drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 hyundai      sonata   2.4  2008     4 auto(l4) f        21    30 r     midsize
2 hyundai      sonata   2.4  2008     4 manual(~ f        21    31 r     midsize
3 hyundai      sonata   3.3  2008     6 auto(l5) f        19    28 r     midsize
4 hyundai      tibur~   2    2008     4 manual(~ f        20    28 r     subcom~
5 hyundai      tibur~   2    2008     4 auto(l4) f        20    27 r     subcom~
6 hyundai      tibur~   2.7  2008     6 auto(l4) f        17    24 r     subcom~
7 hyundai      tibur~   2.7  2008     6 manual(~ f        16    24 r     subcom~
8 hyundai      tibur~   2.7  2008     6 manual(~ f        17    24 r     subcom~</code></pre>
<div class="sourceCode" id="cb1349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1349-1"><a href="ch-dataTransformation.html#cb1349-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(a, cyl)</span></code></pre></div>
<pre><code># A tibble: 8 x 11
  manufacturer model  displ  year   cyl trans    drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 hyundai      sonata   2.4  2008     4 auto(l4) f        21    30 r     midsize
2 hyundai      sonata   2.4  2008     4 manual(~ f        21    31 r     midsize
3 hyundai      tibur~   2    2008     4 manual(~ f        20    28 r     subcom~
4 hyundai      tibur~   2    2008     4 auto(l4) f        20    27 r     subcom~
5 hyundai      sonata   3.3  2008     6 auto(l5) f        19    28 r     midsize
6 hyundai      tibur~   2.7  2008     6 auto(l4) f        17    24 r     subcom~
7 hyundai      tibur~   2.7  2008     6 manual(~ f        16    24 r     subcom~
8 hyundai      tibur~   2.7  2008     6 manual(~ f        17    24 r     subcom~</code></pre>
<div class="sourceCode" id="cb1351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1351-1"><a href="ch-dataTransformation.html#cb1351-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(a, cyl, cty)</span></code></pre></div>
<pre><code># A tibble: 8 x 11
  manufacturer model  displ  year   cyl trans    drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 hyundai      tibur~   2    2008     4 manual(~ f        20    28 r     subcom~
2 hyundai      tibur~   2    2008     4 auto(l4) f        20    27 r     subcom~
3 hyundai      sonata   2.4  2008     4 auto(l4) f        21    30 r     midsize
4 hyundai      sonata   2.4  2008     4 manual(~ f        21    31 r     midsize
5 hyundai      tibur~   2.7  2008     6 manual(~ f        16    24 r     subcom~
6 hyundai      tibur~   2.7  2008     6 auto(l4) f        17    24 r     subcom~
7 hyundai      tibur~   2.7  2008     6 manual(~ f        17    24 r     subcom~
8 hyundai      sonata   3.3  2008     6 auto(l5) f        19    28 r     midsize</code></pre>
<div class="sourceCode" id="cb1353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1353-1"><a href="ch-dataTransformation.html#cb1353-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(a, model, trans)</span></code></pre></div>
<pre><code># A tibble: 8 x 11
  manufacturer model  displ  year   cyl trans    drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 hyundai      sonata   2.4  2008     4 auto(l4) f        21    30 r     midsize
2 hyundai      sonata   3.3  2008     6 auto(l5) f        19    28 r     midsize
3 hyundai      sonata   2.4  2008     4 manual(~ f        21    31 r     midsize
4 hyundai      tibur~   2    2008     4 auto(l4) f        20    27 r     subcom~
5 hyundai      tibur~   2.7  2008     6 auto(l4) f        17    24 r     subcom~
6 hyundai      tibur~   2    2008     4 manual(~ f        20    28 r     subcom~
7 hyundai      tibur~   2.7  2008     6 manual(~ f        17    24 r     subcom~
8 hyundai      tibur~   2.7  2008     6 manual(~ f        16    24 r     subcom~</code></pre>
<div id="desc를-이용하여-내림차순으로-정렬하기" class="section level3">
<h3><span class="header-section-number">7.5.1</span> <code>desc()</code>를 이용하여 내림차순으로 정렬하기</h3>
<p>앞의 예에서 <code>arrange()</code>는 수치 변수는 올림차순으로 문자 변수는 알파벳 순으로 정렬하는 것을 볼 수 있다. 만약 위의 예에서 내림차순으로, 또는 알파벳 역순으로 정렬을 하고 싶으면 어떻게 하여야 할까? <code>dplyr</code> 패키지는 <code>desc()</code>를 이용하면 된다.</p>
<div class="sourceCode" id="cb1355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1355-1"><a href="ch-dataTransformation.html#cb1355-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(a, <span class="kw">desc</span>(cyl))</span></code></pre></div>
<pre><code># A tibble: 8 x 11
  manufacturer model  displ  year   cyl trans    drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 hyundai      sonata   3.3  2008     6 auto(l5) f        19    28 r     midsize
2 hyundai      tibur~   2.7  2008     6 auto(l4) f        17    24 r     subcom~
3 hyundai      tibur~   2.7  2008     6 manual(~ f        16    24 r     subcom~
4 hyundai      tibur~   2.7  2008     6 manual(~ f        17    24 r     subcom~
5 hyundai      sonata   2.4  2008     4 auto(l4) f        21    30 r     midsize
6 hyundai      sonata   2.4  2008     4 manual(~ f        21    31 r     midsize
7 hyundai      tibur~   2    2008     4 manual(~ f        20    28 r     subcom~
8 hyundai      tibur~   2    2008     4 auto(l4) f        20    27 r     subcom~</code></pre>
<div class="sourceCode" id="cb1357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1357-1"><a href="ch-dataTransformation.html#cb1357-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(a, <span class="kw">desc</span>(cyl), cty)</span></code></pre></div>
<pre><code># A tibble: 8 x 11
  manufacturer model  displ  year   cyl trans    drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 hyundai      tibur~   2.7  2008     6 manual(~ f        16    24 r     subcom~
2 hyundai      tibur~   2.7  2008     6 auto(l4) f        17    24 r     subcom~
3 hyundai      tibur~   2.7  2008     6 manual(~ f        17    24 r     subcom~
4 hyundai      sonata   3.3  2008     6 auto(l5) f        19    28 r     midsize
5 hyundai      tibur~   2    2008     4 manual(~ f        20    28 r     subcom~
6 hyundai      tibur~   2    2008     4 auto(l4) f        20    27 r     subcom~
7 hyundai      sonata   2.4  2008     4 auto(l4) f        21    30 r     midsize
8 hyundai      sonata   2.4  2008     4 manual(~ f        21    31 r     midsize</code></pre>
<div class="sourceCode" id="cb1359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1359-1"><a href="ch-dataTransformation.html#cb1359-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">arrange</span>(a, model, <span class="kw">desc</span>(trans))</span></code></pre></div>
<pre><code># A tibble: 8 x 11
  manufacturer model  displ  year   cyl trans    drv     cty   hwy fl    class  
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
1 hyundai      sonata   2.4  2008     4 manual(~ f        21    31 r     midsize
2 hyundai      sonata   3.3  2008     6 auto(l5) f        19    28 r     midsize
3 hyundai      sonata   2.4  2008     4 auto(l4) f        21    30 r     midsize
4 hyundai      tibur~   2.7  2008     6 manual(~ f        16    24 r     subcom~
5 hyundai      tibur~   2    2008     4 manual(~ f        20    28 r     subcom~
6 hyundai      tibur~   2.7  2008     6 manual(~ f        17    24 r     subcom~
7 hyundai      tibur~   2    2008     4 auto(l4) f        20    27 r     subcom~
8 hyundai      tibur~   2.7  2008     6 auto(l4) f        17    24 r     subcom~</code></pre>
<p><code>desc()</code>가 적용된 변수만 내림차순을 기준으로 정렬을 하는 것을 볼 수 있다.</p>
</div>
</div>
<div id="sec:select" class="section level2">
<h2><span class="header-section-number">7.6</span> <code>select()</code>를 이용하여 변수 이름으로 열 선택하기</h2>
<div id="변수-이름을-나열하여-선택하기" class="section level3">
<h3><span class="header-section-number">7.6.1</span> 변수 이름을 나열하여 선택하기</h3>
<p><code>select()</code> 함수는 다음처럼 변수 이름을 일일이 나열하여 원하는 열을 선택할 수 있다. R의 기본 문법을 알고 있는 사람들은 데이터 프레임의 인덱싱에서처럼 문자열로 이름을 나열하는 것이 아니라 변수를 사용하듯 따옴표 없이 이름을 나열하는 것에 주의한다.</p>
<pre><code>select(데이터프레임, 변수이름1, 변수이름 2, ....)</code></pre>
<div class="sourceCode" id="cb1362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1362-1"><a href="ch-dataTransformation.html#cb1362-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, model, year, cty, hwy)</span></code></pre></div>
<pre><code># A tibble: 8 x 4
  model    year   cty   hwy
  &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;
1 sonata   2008    21    30
2 sonata   2008    21    31
3 sonata   2008    19    28
4 tiburon  2008    20    28
5 tiburon  2008    20    27
6 tiburon  2008    17    24
7 tiburon  2008    16    24
8 tiburon  2008    17    24</code></pre>
</div>
<div id="변수-이름으로-변수-범위를-선택하기" class="section level3">
<h3><span class="header-section-number">7.6.2</span> 변수 이름으로 변수 범위를 선택하기</h3>
<p><code>select()</code> 함수는 다음처럼 변수 이름으로 선택할 변수의 범위를 지정할 수 있다.</p>
<pre><code>select(데이터프레임, 범위시작_변수이름:범위종료_변수이름, ...)</code></pre>
<div class="sourceCode" id="cb1365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1365-1"><a href="ch-dataTransformation.html#cb1365-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, model<span class="op">:</span>trans)</span></code></pre></div>
<pre><code># A tibble: 8 x 5
  model   displ  year   cyl trans     
  &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;     
1 sonata    2.4  2008     4 auto(l4)  
2 sonata    2.4  2008     4 manual(m5)
3 sonata    3.3  2008     6 auto(l5)  
4 tiburon   2    2008     4 manual(m5)
5 tiburon   2    2008     4 auto(l4)  
6 tiburon   2.7  2008     6 auto(l4)  
7 tiburon   2.7  2008     6 manual(m6)
8 tiburon   2.7  2008     6 manual(m5)</code></pre>
<div class="sourceCode" id="cb1367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1367-1"><a href="ch-dataTransformation.html#cb1367-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, model<span class="op">:</span>trans, cty<span class="op">:</span>hwy)</span></code></pre></div>
<pre><code># A tibble: 8 x 7
  model   displ  year   cyl trans        cty   hwy
  &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;int&gt; &lt;int&gt;
1 sonata    2.4  2008     4 auto(l4)      21    30
2 sonata    2.4  2008     4 manual(m5)    21    31
3 sonata    3.3  2008     6 auto(l5)      19    28
4 tiburon   2    2008     4 manual(m5)    20    28
5 tiburon   2    2008     4 auto(l4)      20    27
6 tiburon   2.7  2008     6 auto(l4)      17    24
7 tiburon   2.7  2008     6 manual(m6)    16    24
8 tiburon   2.7  2008     6 manual(m5)    17    24</code></pre>
<p>반대로 다음처럼 변수 이름으로 선택하지 않을 변수의 범위를 지정할 수 있다.</p>
<pre><code>select(데이터프레임, -(범위시작_변수이름:범위종료_변수이름), ...)</code></pre>
<div class="sourceCode" id="cb1370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1370-1"><a href="ch-dataTransformation.html#cb1370-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, <span class="op">-</span>(model<span class="op">:</span>trans))</span></code></pre></div>
<pre><code># A tibble: 8 x 6
  manufacturer drv     cty   hwy fl    class     
  &lt;chr&gt;        &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     
1 hyundai      f        21    30 r     midsize   
2 hyundai      f        21    31 r     midsize   
3 hyundai      f        19    28 r     midsize   
4 hyundai      f        20    28 r     subcompact
5 hyundai      f        20    27 r     subcompact
6 hyundai      f        17    24 r     subcompact
7 hyundai      f        16    24 r     subcompact
8 hyundai      f        17    24 r     subcompact</code></pre>
<div class="sourceCode" id="cb1372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1372-1"><a href="ch-dataTransformation.html#cb1372-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, <span class="op">-</span>(model<span class="op">:</span>trans), <span class="op">-</span>manufacturer)</span></code></pre></div>
<pre><code># A tibble: 8 x 5
  drv     cty   hwy fl    class     
  &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;     
1 f        21    30 r     midsize   
2 f        21    31 r     midsize   
3 f        19    28 r     midsize   
4 f        20    28 r     subcompact
5 f        20    27 r     subcompact
6 f        17    24 r     subcompact
7 f        16    24 r     subcompact
8 f        17    24 r     subcompact</code></pre>
</div>
<div id="변수-이름을-매칭하여-선택하기" class="section level3">
<h3><span class="header-section-number">7.6.3</span> 변수 이름을 매칭하여 선택하기</h3>
<p><code>dplyr</code> 패키지는 다양한 형태로 변수를 선택할 수 있도록 다음의 변수 이름 매칭 함수를 제공한다.</p>
<ul>
<li><code>starts_with("abs")</code>: abc로 이름이 시작하는 모든 변수</li>
<li><code>ends_with("abs")</code>: abc로 이름이 끝나는 모든 변수</li>
<li><code>contains("abs")</code>: abc를 이름에 포함하고 있는 모든 변수</li>
<li><code>matches("(.)\\1")</code>: 정규 표현식을 만족하는 이름을 가진 모든 변수</li>
<li><code>num_range("x", 1:3)</code>: “x1”, “x2”, “x3”이라는 이름의 변수</li>
</ul>
<div class="sourceCode" id="cb1374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1374-1"><a href="ch-dataTransformation.html#cb1374-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, <span class="kw">starts_with</span>(<span class="st">&quot;c&quot;</span>))</span></code></pre></div>
<pre><code># A tibble: 8 x 3
    cyl   cty class     
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;     
1     4    21 midsize   
2     4    21 midsize   
3     6    19 midsize   
4     4    20 subcompact
5     4    20 subcompact
6     6    17 subcompact
7     6    16 subcompact
8     6    17 subcompact</code></pre>
</div>
<div id="변수-이름-바꾸기" class="section level3">
<h3><span class="header-section-number">7.6.4</span> 변수 이름 바꾸기</h3>
<p><code>select()</code> 함수에서 변수 이름을 지정할 때, <code>(새로운 변수 이름)=(기존 변수 이름)</code> 형식으로 지정하면 변수의 이름을 바꿀 수 있다.</p>
<div class="sourceCode" id="cb1376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1376-1"><a href="ch-dataTransformation.html#cb1376-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, model, <span class="dt">city=</span>cty, <span class="dt">highway=</span>hwy)</span></code></pre></div>
<pre><code># A tibble: 8 x 3
  model    city highway
  &lt;chr&gt;   &lt;int&gt;   &lt;int&gt;
1 sonata     21      30
2 sonata     21      31
3 sonata     19      28
4 tiburon    20      28
5 tiburon    20      27
6 tiburon    17      24
7 tiburon    16      24
8 tiburon    17      24</code></pre>
<p>만약 전체 데이터를 유지한 상태에서 변수 이름만 변경하려면, <code>rename()</code> 함수를 이용한다. 문법은 <code>select()</code>와 같다.</p>
<div class="sourceCode" id="cb1378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1378-1"><a href="ch-dataTransformation.html#cb1378-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">rename</span>(a, <span class="dt">city=</span>cty, <span class="dt">highway=</span>hwy)</span></code></pre></div>
<pre><code># A tibble: 8 x 11
  manufacturer model  displ  year   cyl trans   drv    city highway fl    class 
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt;   &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
1 hyundai      sonata   2.4  2008     4 auto(l~ f        21      30 r     midsi~
2 hyundai      sonata   2.4  2008     4 manual~ f        21      31 r     midsi~
3 hyundai      sonata   3.3  2008     6 auto(l~ f        19      28 r     midsi~
4 hyundai      tibur~   2    2008     4 manual~ f        20      28 r     subco~
5 hyundai      tibur~   2    2008     4 auto(l~ f        20      27 r     subco~
6 hyundai      tibur~   2.7  2008     6 auto(l~ f        17      24 r     subco~
7 hyundai      tibur~   2.7  2008     6 manual~ f        16      24 r     subco~
8 hyundai      tibur~   2.7  2008     6 manual~ f        17      24 r     subco~</code></pre>
</div>
<div id="변수-순서-바꾸기" class="section level3">
<h3><span class="header-section-number">7.6.5</span> 변수 순서 바꾸기</h3>
<p><code>select()</code> 함수는 나열된 변수의 순서에 따라 새롭게 만들어진 데이터 프레임의 변수의 순서를 조정한다.</p>
<div class="sourceCode" id="cb1380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1380-1"><a href="ch-dataTransformation.html#cb1380-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, cty, hwy)</span></code></pre></div>
<pre><code># A tibble: 8 x 2
    cty   hwy
  &lt;int&gt; &lt;int&gt;
1    21    30
2    21    31
3    19    28
4    20    28
5    20    27
6    17    24
7    16    24
8    17    24</code></pre>
<div class="sourceCode" id="cb1382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1382-1"><a href="ch-dataTransformation.html#cb1382-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, hwy, cty)</span></code></pre></div>
<pre><code># A tibble: 8 x 2
    hwy   cty
  &lt;int&gt; &lt;int&gt;
1    30    21
2    31    21
3    28    19
4    28    20
5    27    20
6    24    17
7    24    16
8    24    17</code></pre>
<p>이러한 성질과 <code>everything()</code> 함수를 이용하면 변수의 순서를 쉽게 바꿀 수 있다. <code>everything()</code>은 이미 선택된 변수를 제외한 나머지 변수를 의미한다.</p>
<div class="sourceCode" id="cb1384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1384-1"><a href="ch-dataTransformation.html#cb1384-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">select</span>(a, cty, hwy, <span class="kw">everything</span>())</span></code></pre></div>
<pre><code># A tibble: 8 x 11
    cty   hwy manufacturer model  displ  year   cyl trans    drv   fl    class  
  &lt;int&gt; &lt;int&gt; &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  
1    21    30 hyundai      sonata   2.4  2008     4 auto(l4) f     r     midsize
2    21    31 hyundai      sonata   2.4  2008     4 manual(~ f     r     midsize
3    19    28 hyundai      sonata   3.3  2008     6 auto(l5) f     r     midsize
4    20    28 hyundai      tibur~   2    2008     4 manual(~ f     r     subcom~
5    20    27 hyundai      tibur~   2    2008     4 auto(l4) f     r     subcom~
6    17    24 hyundai      tibur~   2.7  2008     6 auto(l4) f     r     subcom~
7    16    24 hyundai      tibur~   2.7  2008     6 manual(~ f     r     subcom~
8    17    24 hyundai      tibur~   2.7  2008     6 manual(~ f     r     subcom~</code></pre>
</div>
</div>
<div id="sec:mutate" class="section level2">
<h2><span class="header-section-number">7.7</span> <code>mutate()</code>로 새로운 변수 만들기</h2>
<p><code>mutate()</code>는 기존 변수를 이용하여 새로운 변수를 만들어 데이터 프레임의 가장 마지막 열로 추가한다.</p>
<pre><code>mutate(데이터프레임, 새로운_변수=기존_변수_연산식, ....)</code></pre>
<p>다음은 도심 연비와 고속도로 연비의 합과, 평균, 그리고 고속도로 대비 도심 연비의 비율(%)을 계산하여 새로운 열을 만든 예이다.</p>
<div class="sourceCode" id="cb1387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1387-1"><a href="ch-dataTransformation.html#cb1387-1"></a><span class="op">&gt;</span><span class="st"> </span>b &lt;-<span class="st"> </span><span class="kw">select</span>(a, <span class="op">-</span>(cyl<span class="op">:</span>drv), <span class="op">-</span>(fl<span class="op">:</span>class))</span>
<span id="cb1387-2"><a href="ch-dataTransformation.html#cb1387-2"></a><span class="op">&gt;</span><span class="st"> </span>b</span></code></pre></div>
<pre><code># A tibble: 8 x 6
  manufacturer model   displ  year   cty   hwy
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1 hyundai      sonata    2.4  2008    21    30
2 hyundai      sonata    2.4  2008    21    31
3 hyundai      sonata    3.3  2008    19    28
4 hyundai      tiburon   2    2008    20    28
5 hyundai      tiburon   2    2008    20    27
6 hyundai      tiburon   2.7  2008    17    24
7 hyundai      tiburon   2.7  2008    16    24
8 hyundai      tiburon   2.7  2008    17    24</code></pre>
<div class="sourceCode" id="cb1389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1389-1"><a href="ch-dataTransformation.html#cb1389-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mutate</span>(b, <span class="dt">sum=</span>cty <span class="op">+</span><span class="st"> </span>hwy)</span></code></pre></div>
<pre><code># A tibble: 8 x 7
  manufacturer model   displ  year   cty   hwy   sum
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;
1 hyundai      sonata    2.4  2008    21    30    51
2 hyundai      sonata    2.4  2008    21    31    52
3 hyundai      sonata    3.3  2008    19    28    47
4 hyundai      tiburon   2    2008    20    28    48
5 hyundai      tiburon   2    2008    20    27    47
6 hyundai      tiburon   2.7  2008    17    24    41
7 hyundai      tiburon   2.7  2008    16    24    40
8 hyundai      tiburon   2.7  2008    17    24    41</code></pre>
<div class="sourceCode" id="cb1391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1391-1"><a href="ch-dataTransformation.html#cb1391-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mutate</span>(b, </span>
<span id="cb1391-2"><a href="ch-dataTransformation.html#cb1391-2"></a><span class="op">+</span><span class="st">        </span><span class="dt">sum=</span>cty <span class="op">+</span><span class="st"> </span>hwy, </span>
<span id="cb1391-3"><a href="ch-dataTransformation.html#cb1391-3"></a><span class="op">+</span><span class="st">        </span><span class="dt">mean=</span>(cty <span class="op">+</span><span class="st"> </span>hwy) <span class="op">/</span><span class="st"> </span><span class="dv">2</span>,</span>
<span id="cb1391-4"><a href="ch-dataTransformation.html#cb1391-4"></a><span class="op">+</span><span class="st">        </span><span class="dt">ratio=</span> cty <span class="op">/</span><span class="st"> </span>hwy <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span></code></pre></div>
<pre><code># A tibble: 8 x 9
  manufacturer model   displ  year   cty   hwy   sum  mean ratio
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1 hyundai      sonata    2.4  2008    21    30    51  25.5  70  
2 hyundai      sonata    2.4  2008    21    31    52  26    67.7
3 hyundai      sonata    3.3  2008    19    28    47  23.5  67.9
4 hyundai      tiburon   2    2008    20    28    48  24    71.4
5 hyundai      tiburon   2    2008    20    27    47  23.5  74.1
6 hyundai      tiburon   2.7  2008    17    24    41  20.5  70.8
7 hyundai      tiburon   2.7  2008    16    24    40  20    66.7
8 hyundai      tiburon   2.7  2008    17    24    41  20.5  70.8</code></pre>
<div id="transmute로-새로운-변수만-남기기" class="section level3">
<h3><span class="header-section-number">7.7.1</span> <code>transmute()</code>로 새로운 변수만 남기기</h3>
<p>만약 새롭게 만들어진 변수만 데이터에 남기려면 <code>mutate()</code> 대신 <code>transmute()</code>를 사용한다. 문법은 두 함수가 동일하다.</p>
<div class="sourceCode" id="cb1393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1393-1"><a href="ch-dataTransformation.html#cb1393-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">transmute</span>(b, </span>
<span id="cb1393-2"><a href="ch-dataTransformation.html#cb1393-2"></a><span class="op">+</span><span class="st">        </span><span class="dt">sum=</span>cty <span class="op">+</span><span class="st"> </span>hwy, </span>
<span id="cb1393-3"><a href="ch-dataTransformation.html#cb1393-3"></a><span class="op">+</span><span class="st">        </span><span class="dt">mean=</span>(cty <span class="op">+</span><span class="st"> </span>hwy) <span class="op">/</span><span class="st"> </span><span class="dv">2</span>,</span>
<span id="cb1393-4"><a href="ch-dataTransformation.html#cb1393-4"></a><span class="op">+</span><span class="st">        </span><span class="dt">ratio=</span> cty <span class="op">/</span><span class="st"> </span>hwy <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span></code></pre></div>
<pre><code># A tibble: 8 x 3
    sum  mean ratio
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1    51  25.5  70  
2    52  26    67.7
3    47  23.5  67.9
4    48  24    71.4
5    47  23.5  74.1
6    41  20.5  70.8
7    40  20    66.7
8    41  20.5  70.8</code></pre>
</div>
<div id="새로운-변수를-만들-때-사용할-수-있는-함수들" class="section level3">
<h3><span class="header-section-number">7.7.2</span> 새로운 변수를 만들 때 사용할 수 있는 함수들</h3>
<p>새로운 변수를 생성할 때, 기존 변수와 관련된 수치, 논리, 문자열 연산을 수행할 수 있다. 다음처럼 제조사와 모델을 하나로 합쳐서 새로운 변수를 만들수도 있고, 배기량이 3 이상인지 여부를 나타내는 변수도 만들 수 있다.</p>
<div class="sourceCode" id="cb1395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1395-1"><a href="ch-dataTransformation.html#cb1395-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mutate</span>(b, <span class="dt">newName=</span><span class="kw">paste</span>(manufacturer, model, <span class="dt">sep=</span><span class="st">&quot;-&quot;</span>), <span class="dt">dis3=</span>displ <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>)</span></code></pre></div>
<pre><code># A tibble: 8 x 8
  manufacturer model   displ  year   cty   hwy newName         dis3 
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;           &lt;lgl&gt;
1 hyundai      sonata    2.4  2008    21    30 hyundai-sonata  FALSE
2 hyundai      sonata    2.4  2008    21    31 hyundai-sonata  FALSE
3 hyundai      sonata    3.3  2008    19    28 hyundai-sonata  TRUE 
4 hyundai      tiburon   2    2008    20    28 hyundai-tiburon FALSE
5 hyundai      tiburon   2    2008    20    27 hyundai-tiburon FALSE
6 hyundai      tiburon   2.7  2008    17    24 hyundai-tiburon FALSE
7 hyundai      tiburon   2.7  2008    16    24 hyundai-tiburon FALSE
8 hyundai      tiburon   2.7  2008    17    24 hyundai-tiburon FALSE</code></pre>
<p>아울러 다음 함수가 새로운 변수를 만들 때 자주 사용된다.</p>
<ul>
<li><code>lead()</code>: 기존 변수를 한 행, 또는 여러 행 빠르게 시작하는 변수</li>
<li><code>rag()</code>: 기존 변수를 한 행, 또는 여러 행 늦게 시작하는 변수</li>
<li><code>cumsum()</code>, <code>cummean()</code>: 누적 합과 평균</li>
<li><code>min_rank()</code>: 가장 작은 것부터 차례대로 크기 순서로 등수를 매기는 함수. <code>desc()</code> 함수를 변수에 적용한 후 등수를 매기면 가장 큰 것부터 순서를 매길 수 있다.</li>
<li><code>dense_rank()</code>, <code>percent_rank()</code>, <code>cume_dist()</code>, <code>ntile()</code> 등도 사용될 수 있다. 자세한 내용은 도움말을 참조하기 바란다.</li>
</ul>
<div class="sourceCode" id="cb1397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1397-1"><a href="ch-dataTransformation.html#cb1397-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mutate</span>(b, <span class="dt">cty_rank=</span><span class="kw">min_rank</span>(cty), <span class="dt">hwy_rank=</span><span class="kw">min_rank</span>(<span class="kw">desc</span>(hwy)), <span class="dt">desc_hwy=</span><span class="kw">desc</span>(hwy))</span></code></pre></div>
<pre><code># A tibble: 8 x 9
  manufacturer model   displ  year   cty   hwy cty_rank hwy_rank desc_hwy
  &lt;chr&gt;        &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;    &lt;int&gt;    &lt;int&gt;
1 hyundai      sonata    2.4  2008    21    30        7        2      -30
2 hyundai      sonata    2.4  2008    21    31        7        1      -31
3 hyundai      sonata    3.3  2008    19    28        4        3      -28
4 hyundai      tiburon   2    2008    20    28        5        3      -28
5 hyundai      tiburon   2    2008    20    27        5        5      -27
6 hyundai      tiburon   2.7  2008    17    24        2        6      -24
7 hyundai      tiburon   2.7  2008    16    24        1        6      -24
8 hyundai      tiburon   2.7  2008    17    24        2        6      -24</code></pre>
</div>
</div>
<div id="sec:summarize" class="section level2">
<h2><span class="header-section-number">7.8</span> <code>summarize()</code>로 변수 요약하기</h2>
<pre><code>summarize(데이터프레임, 요약변수이름=요약함수(변수), ....)</code></pre>
<p><code>summarize()</code> 함수는 변수의 모든 값을 하나의 값으로 요약하는 함수를 이용하여 변수를 요약한다. 대표적인 요약 함수는 다음과 같다.</p>
<ul>
<li><code>n()</code>: 변수의 크기를 구한다.</li>
<li><code>sum()</code>: 수치 변수의 합을 구한다.</li>
<li><code>mean()</code>: 수치 변수의 균을 구한다.</li>
<li><code>median()</code>: 수치 변수의 중위수를 구한다.</li>
<li><code>sd()</code>: 수치 변수의 표준편차를 구한다.</li>
<li><code>var()</code>: 수치 변수의 분산을 구한다.</li>
<li><code>min()</code>: 수치 변수의 최소값을 구한다.</li>
<li><code>max()</code>: 수치 변수의 최대값을 구한다.</li>
<li><code>quantile(변수, probs):  수치 변수의</code>probs` 분위수를 구한다.</li>
</ul>
<p>다음은 도심 연비의 데이터 수, 평균, 중위수, 최소값, 최대값을 구한 결과이다.</p>
<div class="sourceCode" id="cb1400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1400-1"><a href="ch-dataTransformation.html#cb1400-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarize</span>(b, <span class="dt">count=</span><span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(cty), <span class="dt">med=</span><span class="kw">median</span>(cty), <span class="dt">min=</span><span class="kw">min</span>(cty), <span class="dt">max=</span><span class="kw">max</span>(cty))</span></code></pre></div>
<pre><code># A tibble: 1 x 5
  count  mean   med   min   max
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;
1     8  18.9  19.5    16    21</code></pre>
</div>
<div id="sec:groupBy" class="section level2">
<h2><span class="header-section-number">7.9</span> <code>group_by()</code>로 그룹 별로 요약하기</h2>
<pre><code>group_by(데이터프레임, 그룹기준변수1, 그룹기준변수2, ...)</code></pre>
<p><code>group_by()</code> 함수는 기준이 되는 변수의 구분되는 값에 따라 데이터를 그룹화한다. 그룹화된 결과를 <code>summarize()</code> 함수에 전달하면 그룹별로 요약된 결과를 출력한다.</p>
<div class="sourceCode" id="cb1403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1403-1"><a href="ch-dataTransformation.html#cb1403-1"></a><span class="op">&gt;</span><span class="st"> </span>byModel &lt;-<span class="st"> </span><span class="kw">group_by</span>(b, model)</span>
<span id="cb1403-2"><a href="ch-dataTransformation.html#cb1403-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarize</span>(byModel, <span class="dt">count=</span><span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(cty), <span class="dt">sd=</span><span class="kw">sd</span>(cty))</span></code></pre></div>
<pre><code>`summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code># A tibble: 2 x 4
  model   count  mean    sd
  &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
1 sonata      3  20.3  1.15
2 tiburon     5  18    1.87</code></pre>
<p>변수를 여러 개를 조합하여 그룹화를 할 수도 있다.</p>
<div class="sourceCode" id="cb1406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1406-1"><a href="ch-dataTransformation.html#cb1406-1"></a><span class="op">&gt;</span><span class="st"> </span>byModel &lt;-<span class="st"> </span><span class="kw">group_by</span>(a, model, cyl)</span>
<span id="cb1406-2"><a href="ch-dataTransformation.html#cb1406-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">summarize</span>(byModel, <span class="dt">count=</span><span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(cty))</span></code></pre></div>
<pre><code>`summarise()` regrouping output by &#39;model&#39; (override with `.groups` argument)</code></pre>
<pre><code># A tibble: 4 x 4
# Groups:   model [2]
  model     cyl count  mean
  &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
1 sonata      4     2  21  
2 sonata      6     1  19  
3 tiburon     4     2  20  
4 tiburon     6     3  16.7</code></pre>
</div>
<div id="sec:pipeOperator" class="section level2">
<h2><span class="header-section-number">7.10</span> <code>%&gt;%</code> 파이프 연산자</h2>
<div id="여러-단계를-거쳐-데이터를-변환할-때" class="section level3">
<h3><span class="header-section-number">7.10.1</span> 여러 단계를 거쳐 데이터를 변환할 때</h3>
<p><code>mpg</code> 데이터에서 조사 연도와 모델 별로 데이터 수와 도심 연비의 평균을 구한 후, 평균이 22 이상인 모델로 이루어진 행을 추출하려고 한다. 이를 수행하려면 다음처럼 변수를 이용하여 결과를 차례로 전달하거나, 함수를 결합하여 한 문장에 사용하여야 한다.</p>
<div class="sourceCode" id="cb1409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1409-1"><a href="ch-dataTransformation.html#cb1409-1"></a><span class="op">&gt;</span><span class="st"> </span>byModel &lt;-<span class="st"> </span><span class="kw">group_by</span>(mpg, model, year)</span>
<span id="cb1409-2"><a href="ch-dataTransformation.html#cb1409-2"></a><span class="op">&gt;</span><span class="st"> </span>meanCty &lt;-<span class="st"> </span><span class="kw">summarize</span>(byModel, <span class="dt">count=</span><span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(cty))</span></code></pre></div>
<pre><code>`summarise()` regrouping output by &#39;model&#39; (override with `.groups` argument)</code></pre>
<div class="sourceCode" id="cb1411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1411-1"><a href="ch-dataTransformation.html#cb1411-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(meanCty, mean <span class="op">&gt;=</span><span class="st"> </span><span class="dv">22</span>)</span></code></pre></div>
<pre><code># A tibble: 5 x 4
# Groups:   model [3]
  model       year count  mean
  &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
1 civic       1999     5  24.8
2 civic       2008     4  24  
3 corolla     1999     3  24.7
4 corolla     2008     2  27  
5 new beetle  1999     4  26  </code></pre>
<div class="sourceCode" id="cb1413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1413-1"><a href="ch-dataTransformation.html#cb1413-1"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">summarize</span>(<span class="kw">group_by</span>(mpg, model, year), <span class="dt">count=</span><span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(cty)), mean <span class="op">&gt;=</span><span class="st"> </span><span class="dv">22</span>)</span></code></pre></div>
<pre><code>`summarise()` regrouping output by &#39;model&#39; (override with `.groups` argument)</code></pre>
<pre><code># A tibble: 5 x 4
# Groups:   model [3]
  model       year count  mean
  &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
1 civic       1999     5  24.8
2 civic       2008     4  24  
3 corolla     1999     3  24.7
4 corolla     2008     2  27  
5 new beetle  1999     4  26  </code></pre>
<p>전자는 불피요하게 중간 결과를 저장할 변수를 만들어야 하고, 후자는 복잡하여 이 명령이 무엇을 하는 명령어인지 쉽게 파악하기 힘들다. 또한 중첩된 괄호 때문에 오류가 발생하기 쉽다.</p>
</div>
<div id="파이프-연산자" class="section level3">
<h3><span class="header-section-number">7.10.2</span> 파이프 연산자</h3>
<p>파이프 연산자는 데이터 변환이 여러 단계를 거칠 때 불필요한 변수의 생성 없이도 함수 간에 중간 데이터를 전달할 수 있게 해 준다.</p>
<p>파이프 연산자는 앞의 함수의 결과를 뒤 함수의 첫 번째 인수로 전달해 준다. 파이프 연산자를 사용할 때는 그러므로 첫 번째 인수는 생략하여 기술한다. 다음은 앞의 예와 동일한 예를 파이프 연산자를 사용하여 수행한 결과이다.</p>
<div class="sourceCode" id="cb1416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1416-1"><a href="ch-dataTransformation.html#cb1416-1"></a><span class="op">&gt;</span><span class="st"> </span>mpg <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(model, year) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1416-2"><a href="ch-dataTransformation.html#cb1416-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">count=</span><span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(cty)) <span class="op">%&gt;%</span></span>
<span id="cb1416-3"><a href="ch-dataTransformation.html#cb1416-3"></a><span class="op">+</span><span class="st">   </span><span class="kw">filter</span>(mean <span class="op">&gt;=</span><span class="st"> </span><span class="dv">22</span>)</span></code></pre></div>
<pre><code>`summarise()` regrouping output by &#39;model&#39; (override with `.groups` argument)</code></pre>
<pre><code># A tibble: 5 x 4
# Groups:   model [3]
  model       year count  mean
  &lt;chr&gt;      &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
1 civic       1999     5  24.8
2 civic       2008     4  24  
3 corolla     1999     3  24.7
4 corolla     2008     2  27  
5 new beetle  1999     4  26  </code></pre>
<p>불필요하게 데이터를 기술하는 부분이 사라져서 각 단계에서 수행하는 작업이 무엇인지 명확하게 들어나고 불필요한 중간 변수를 만들지 않아도 되므로 파이프 연산자는 매우 편리하다.</p>
<p>그런데 파이프 연산자를 사용하려면 앞의 함수의 결과가 뒤의 함수의 첫 인수로 사용하기 적절한 형태이어야 한다. <code>dplyr</code> 패키지의 주요 함수들은 정돈 데이터 형식으로 데이터의 결과를 반환하고, 첫 인수가 정돈 데이터 형식의 데이터로 간주한다.</p>
<p>파이프 연산자를 사용할 때 주의할 점은 여러 줄로 명령을 기술할 때, 파이프 연산자로 중간 문장이 종료되어야 한다는 것이다. 그래야 아직 문장이 완료되지 않았다는 것을 이해하여 다음 단계의 명령이 입력되기를 기다린다. 다음처럼 기술하면 R은 명령 입력이 중간에 완료된 것으로 보고 잘못된 결과를 출력한다.</p>
<div class="sourceCode" id="cb1419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1419-1"><a href="ch-dataTransformation.html#cb1419-1"></a><span class="op">&gt;</span><span class="st"> </span>b <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(model) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1419-2"><a href="ch-dataTransformation.html#cb1419-2"></a><span class="op">+</span><span class="st">   </span><span class="kw">summarize</span>(<span class="dt">count=</span><span class="kw">n</span>(), <span class="dt">mean=</span><span class="kw">mean</span>(cty)) </span>
<span id="cb1419-3"><a href="ch-dataTransformation.html#cb1419-3"></a><span class="op">+</span><span class="st">   </span><span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(mean <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>)</span></code></pre></div>
<pre><code>Error: &lt;text&gt;:3:3: 예기치 않은 SPECIAL입니다
2:   summarize(count=n(), mean=mean(cty)) 
3:   %&gt;%
     ^</code></pre>
</div>
<div id="ungroup" class="section level3">
<h3><span class="header-section-number">7.10.3</span> <code>ungroup()</code></h3>
<p>파이프 연산자를 사용하여 데이터를 전달하다 보면 데이터가 그룹화 된 것을 중간 단계에서 해제하고 싶을 때가 있다. 이 경우에는 <code>ungroup()</code> 명령을 사용한다.</p>
<div class="sourceCode" id="cb1421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1421-1"><a href="ch-dataTransformation.html#cb1421-1"></a><span class="op">&gt;</span><span class="st"> </span>byModel &lt;-<span class="st"> </span>b <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(model) </span>
<span id="cb1421-2"><a href="ch-dataTransformation.html#cb1421-2"></a><span class="op">&gt;</span><span class="st"> </span>byModel <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">count=</span><span class="kw">n</span>())</span></code></pre></div>
<pre><code>`summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<pre><code># A tibble: 2 x 2
  model   count
  &lt;chr&gt;   &lt;int&gt;
1 sonata      3
2 tiburon     5</code></pre>
<div class="sourceCode" id="cb1424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1424-1"><a href="ch-dataTransformation.html#cb1424-1"></a><span class="op">&gt;</span><span class="st"> </span>byModel <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarize</span>(<span class="dt">count=</span><span class="kw">n</span>())</span></code></pre></div>
<pre><code># A tibble: 1 x 1
  count
  &lt;int&gt;
1     8</code></pre>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="6">
<li id="fn6"><p>반드시 필요한 작업은 아니다. 그렇지만 실행하는 것이 작업할 때 매우 편리하므로 필수적인 작업으로 생각하는 것이 좋다.<a href="ch-dataTransformation.html#fnref6" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ch-R-Data-Frame.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chap-visulaize.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-programming-2nd.pdf", "R-programming-2nd.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
