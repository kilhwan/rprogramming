<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 R 데이터 프레임 | R 프로그래밍 (개정판)</title>
  <meta name="description" content="이 책은 경영정보시스템실습의 주교재로 사용되기 위해 개발되었습니다." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 R 데이터 프레임 | R 프로그래밍 (개정판)" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="이 책은 경영정보시스템실습의 주교재로 사용되기 위해 개발되었습니다." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 R 데이터 프레임 | R 프로그래밍 (개정판)" />
  
  <meta name="twitter:description" content="이 책은 경영정보시스템실습의 주교재로 사용되기 위해 개발되었습니다." />
  

<meta name="author" content="Kilhwan Kim" />


<meta name="date" content="2020-11-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ch-R-List.html"/>
<link rel="next" href="ch-dataTransformation.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-176754989-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-176754989-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R 프로그래밍</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#판-서문"><i class="fa fa-check"></i>1판 서문</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#판-서문-1"><i class="fa fa-check"></i>2판 서문</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="ch-intro.html"><a href="ch-intro.html"><i class="fa fa-check"></i><b>1</b> R 설치 및 시작</a>
<ul>
<li class="chapter" data-level="1.1" data-path="ch-intro.html"><a href="ch-intro.html#sec:Rintro"><i class="fa fa-check"></i><b>1.1</b> R 소개</a></li>
<li class="chapter" data-level="1.2" data-path="ch-intro.html"><a href="ch-intro.html#sec:installation"><i class="fa fa-check"></i><b>1.2</b> R 설치하기</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="ch-intro.html"><a href="ch-intro.html#r-배포판-내려받기"><i class="fa fa-check"></i><b>1.2.1</b> R 배포판 내려받기</a></li>
<li class="chapter" data-level="1.2.2" data-path="ch-intro.html"><a href="ch-intro.html#설치에-앞서-주의할-사항"><i class="fa fa-check"></i><b>1.2.2</b> 설치에 앞서 주의할 사항</a></li>
<li class="chapter" data-level="1.2.3" data-path="ch-intro.html"><a href="ch-intro.html#r-설치하기"><i class="fa fa-check"></i><b>1.2.3</b> R 설치하기</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="ch-intro.html"><a href="ch-intro.html#sec:RStudio"><i class="fa fa-check"></i><b>1.3</b> RStudio</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="ch-intro.html"><a href="ch-intro.html#rstudio-설치"><i class="fa fa-check"></i><b>1.3.1</b> RStudio 설치</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="ch-intro.html"><a href="ch-intro.html#sec:R_start"><i class="fa fa-check"></i><b>1.4</b> RStudio로 R 시작하기</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="ch-intro.html"><a href="ch-intro.html#r-콘솔과-프롬프트"><i class="fa fa-check"></i><b>1.4.1</b> R 콘솔과 프롬프트</a></li>
<li class="chapter" data-level="1.4.2" data-path="ch-intro.html"><a href="ch-intro.html#r-콘솔-사용과-관련된-몇-가지-팁"><i class="fa fa-check"></i><b>1.4.2</b> R 콘솔 사용과 관련된 몇 가지 팁</a></li>
<li class="chapter" data-level="1.4.3" data-path="ch-intro.html"><a href="ch-intro.html#r-스크립트-파일-만들기"><i class="fa fa-check"></i><b>1.4.3</b> R 스크립트 파일 만들기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html"><i class="fa fa-check"></i><b>2</b> R 데이터 기초</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#단순한-데이터-형태"><i class="fa fa-check"></i><b>2.1</b> 단순한 데이터 형태</a></li>
<li class="chapter" data-level="2.2" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#단순-연산"><i class="fa fa-check"></i><b>2.2</b> 단순 연산</a></li>
<li class="chapter" data-level="2.3" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#변수와-할당"><i class="fa fa-check"></i><b>2.3</b> 변수와 할당</a></li>
<li class="chapter" data-level="2.4" data-path="ch-R-Data-Basic.html"><a href="ch-R-Data-Basic.html#함수를-이용한-연산"><i class="fa fa-check"></i><b>2.4</b> 함수를 이용한 연산</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html"><i class="fa fa-check"></i><b>3</b> R 벡터</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#숫자-벡터"><i class="fa fa-check"></i><b>3.1</b> 숫자 벡터</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#c-함수를-이용한-숫자-벡터-만들기"><i class="fa fa-check"></i><b>3.1.1</b> c() 함수를 이용한 숫자 벡터 만들기</a></li>
<li class="chapter" data-level="3.1.2" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#패턴을-이용한-숫자-벡터-만들기"><i class="fa fa-check"></i><b>3.1.2</b> 패턴을 이용한 숫자 벡터 만들기</a></li>
<li class="chapter" data-level="3.1.3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#숫자-벡터의-연산"><i class="fa fa-check"></i><b>3.1.3</b> 숫자 벡터의 연산</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#논리-벡터"><i class="fa fa-check"></i><b>3.2</b> 논리 벡터</a></li>
<li class="chapter" data-level="3.3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#문자-벡터"><i class="fa fa-check"></i><b>3.3</b> 문자 벡터</a></li>
<li class="chapter" data-level="3.4" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#결측치-missing-values"><i class="fa fa-check"></i><b>3.4</b> 결측치 (Missing Values)</a></li>
<li class="chapter" data-level="3.5" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#인덱스-벡터와-필터링"><i class="fa fa-check"></i><b>3.5</b> 인덱스 벡터와 필터링</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#자연수-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.1</b> 자연수 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.2" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#음의-정수-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.2</b> 음의 정수 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.3" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#논리-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.3</b> 논리 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.4" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#이름-인덱스-벡터"><i class="fa fa-check"></i><b>3.5.4</b> 이름 인덱스 벡터</a></li>
<li class="chapter" data-level="3.5.5" data-path="ch-R-Vectors.html"><a href="ch-R-Vectors.html#인덱스-벡터를-이용해-벡터-요소에-값-할당하기"><i class="fa fa-check"></i><b>3.5.5</b> 인덱스 벡터를 이용해 벡터 요소에 값 할당하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html"><i class="fa fa-check"></i><b>4</b> R 행렬</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬-만들기"><i class="fa fa-check"></i><b>4.1</b> 행렬 만들기</a></li>
<li class="chapter" data-level="4.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#벡터를-결합하여-행렬-만들기"><i class="fa fa-check"></i><b>4.2</b> 벡터를 결합하여 행렬 만들기</a></li>
<li class="chapter" data-level="4.3" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-필터링"><i class="fa fa-check"></i><b>4.3</b> 행렬의 필터링</a></li>
<li class="chapter" data-level="4.4" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-연산"><i class="fa fa-check"></i><b>4.4</b> 행렬의 연산</a></li>
<li class="chapter" data-level="4.5" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬과-함수"><i class="fa fa-check"></i><b>4.5</b> 행렬과 함수</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬을-인수로-하는-함수들"><i class="fa fa-check"></i><b>4.5.1</b> 행렬을 인수로 하는 함수들</a></li>
<li class="chapter" data-level="4.5.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-행별-또는-열별로-함수를-적용하는-방법"><i class="fa fa-check"></i><b>4.5.2</b> 행렬의 행별 또는 열별로 함수를 적용하는 방법</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#sec:RMatrix-array"><i class="fa fa-check"></i><b>4.6</b> 배열</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#배열의-생성"><i class="fa fa-check"></i><b>4.6.1</b> 배열의 생성</a></li>
<li class="chapter" data-level="4.6.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#배열도-결국-벡터"><i class="fa fa-check"></i><b>4.6.2</b> 배열도 결국 벡터</a></li>
<li class="chapter" data-level="4.6.3" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#배열의-연산과-필터링"><i class="fa fa-check"></i><b>4.6.3</b> 배열의 연산과 필터링</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#sec:RMatrix-operation-advanced"><i class="fa fa-check"></i><b>4.7</b> 행렬과 배열의 고급 연산</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-곱"><i class="fa fa-check"></i><b>4.7.1</b> 행렬의 곱</a></li>
<li class="chapter" data-level="4.7.2" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#행렬의-주대각선-요소와-대각행렬"><i class="fa fa-check"></i><b>4.7.2</b> 행렬의 주대각선 요소와 대각행렬</a></li>
<li class="chapter" data-level="4.7.3" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#연립-일차-방정식과-역행렬"><i class="fa fa-check"></i><b>4.7.3</b> 연립 일차 방정식과 역행렬</a></li>
<li class="chapter" data-level="4.7.4" data-path="ch-R-Matrix.html"><a href="ch-R-Matrix.html#고유치eigenvalues와-고유벡터eigenvectors"><i class="fa fa-check"></i><b>4.7.4</b> 고유치(eigenvalues)와 고유벡터(eigenvectors)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ch-R-List.html"><a href="ch-R-List.html"><i class="fa fa-check"></i><b>5</b> R 리스트</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ch-R-List.html"><a href="ch-R-List.html#객체-객체의-타입-객체의-속성"><i class="fa fa-check"></i><b>5.1</b> 객체, 객체의 타입, 객체의 속성</a></li>
<li class="chapter" data-level="5.2" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트의-생성-및-필터링"><i class="fa fa-check"></i><b>5.2</b> 리스트의 생성 및 필터링</a></li>
<li class="chapter" data-level="5.3" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트의-변경-및-연결"><i class="fa fa-check"></i><b>5.3</b> 리스트의 변경 및 연결</a></li>
<li class="chapter" data-level="5.4" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트에-함수-적용하기"><i class="fa fa-check"></i><b>5.4</b> 리스트에 함수 적용하기</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="ch-R-List.html"><a href="ch-R-List.html#lapply-함수"><i class="fa fa-check"></i><b>5.4.1</b> lapply() 함수</a></li>
<li class="chapter" data-level="5.4.2" data-path="ch-R-List.html"><a href="ch-R-List.html#sapply-함수"><i class="fa fa-check"></i><b>5.4.2</b> sapply() 함수</a></li>
<li class="chapter" data-level="5.4.3" data-path="ch-R-List.html"><a href="ch-R-List.html#mapply-함수"><i class="fa fa-check"></i><b>5.4.3</b> mapply() 함수</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="ch-R-List.html"><a href="ch-R-List.html#리스트-활용-분야"><i class="fa fa-check"></i><b>5.5</b> 리스트 활용 분야</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html"><i class="fa fa-check"></i><b>6</b> R 데이터 프레임</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#범주형-데이터와-요인-factors"><i class="fa fa-check"></i><b>6.1</b> 범주형 데이터와 요인 (Factors)</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#명목형-변수와-요인"><i class="fa fa-check"></i><b>6.1.1</b> 명목형 변수와 요인</a></li>
<li class="chapter" data-level="6.1.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#순서형-변수와-요인"><i class="fa fa-check"></i><b>6.1.2</b> 순서형 변수와 요인</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임-만들기"><i class="fa fa-check"></i><b>6.2</b> 데이터 프레임 만들기</a></li>
<li class="chapter" data-level="6.3" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임-각-열의-지정"><i class="fa fa-check"></i><b>6.3</b> 데이터 프레임 각 열의 지정</a></li>
<li class="chapter" data-level="6.4" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임의-필터링"><i class="fa fa-check"></i><b>6.4</b> 데이터 프레임의 필터링</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#리스트-형식으로-필터링"><i class="fa fa-check"></i><b>6.4.1</b> 리스트 형식으로 필터링</a></li>
<li class="chapter" data-level="6.4.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#행렬-형식으로-필터링"><i class="fa fa-check"></i><b>6.4.2</b> 행렬 형식으로 필터링</a></li>
<li class="chapter" data-level="6.4.3" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#subset을-이용한-필터링"><i class="fa fa-check"></i><b>6.4.3</b> subset()을 이용한 필터링</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임에-함수-적용하기"><i class="fa fa-check"></i><b>6.5</b> 데이터 프레임에 함수 적용하기</a></li>
<li class="chapter" data-level="6.6" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#파일에서-데이터-읽어오기"><i class="fa fa-check"></i><b>6.6</b> 파일에서 데이터 읽어오기</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#텍스트-파일에서-데이터-읽어오기"><i class="fa fa-check"></i><b>6.6.1</b> 텍스트 파일에서 데이터 읽어오기</a></li>
<li class="chapter" data-level="6.6.2" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#excel-파일에서-데이터-읽어오기"><i class="fa fa-check"></i><b>6.6.2</b> Excel 파일에서 데이터 읽어오기</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#파일에-데이터-프레임-쓰기"><i class="fa fa-check"></i><b>6.7</b> 파일에 데이터 프레임 쓰기</a></li>
<li class="chapter" data-level="6.8" data-path="ch-R-Data-Frame.html"><a href="ch-R-Data-Frame.html#데이터-프레임의-열을-변수처럼-이용하는-방법"><i class="fa fa-check"></i><b>6.8</b> 데이터 프레임의 열을 변수처럼 이용하는 방법</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html"><i class="fa fa-check"></i><b>7</b> dplyr을 이용한 데이터 변환</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:tidyData"><i class="fa fa-check"></i><b>7.1</b> 정돈 데이터 (tidy data)</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#정돈-데이터-형식의-조건"><i class="fa fa-check"></i><b>7.1.1</b> 정돈 데이터 형식의 조건</a></li>
<li class="chapter" data-level="7.1.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#비정돈-데이터-형식"><i class="fa fa-check"></i><b>7.1.2</b> 비정돈 데이터 형식</a></li>
<li class="chapter" data-level="7.1.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#정돈-데이터를-사용하는-이유"><i class="fa fa-check"></i><b>7.1.3</b> 정돈 데이터를 사용하는 이유</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#tidyverse-패키지"><i class="fa fa-check"></i><b>7.2</b> <code>tidyverse</code> 패키지</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#tidyverse-패키지-설치"><i class="fa fa-check"></i><b>7.2.1</b> <code>tidyverse</code> 패키지 설치</a></li>
<li class="chapter" data-level="7.2.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#tidyverse-패키지-적재"><i class="fa fa-check"></i><b>7.2.2</b> <code>tidyverse</code> 패키지 적재</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:dplyr"><i class="fa fa-check"></i><b>7.3</b> <code>dplyr</code> 패키지와 정돈 데이터의 변환</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#dplyr-패키지"><i class="fa fa-check"></i><b>7.3.1</b> <code>dplyr</code> 패키지</a></li>
<li class="chapter" data-level="7.3.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#정돈-데이터-변환의-종류"><i class="fa fa-check"></i><b>7.3.2</b> 정돈 데이터 변환의 종류</a></li>
<li class="chapter" data-level="7.3.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#dplyr-패키지-vs.-r의-기본-기능"><i class="fa fa-check"></i><b>7.3.3</b> <code>dplyr</code> 패키지 vs. R의 기본 기능</a></li>
<li class="chapter" data-level="7.3.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#mpg-데이터"><i class="fa fa-check"></i><b>7.3.4</b> <code>mpg</code> 데이터</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:filter"><i class="fa fa-check"></i><b>7.4</b> <code>filter()</code>로 행 선택하기</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#선택-조건이-하나인-경우"><i class="fa fa-check"></i><b>7.4.1</b> 선택 조건이 하나인 경우</a></li>
<li class="chapter" data-level="7.4.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#여러-조건을-만족하는-행-추출하기"><i class="fa fa-check"></i><b>7.4.2</b> 여러 조건을 만족하는 행 추출하기</a></li>
<li class="chapter" data-level="7.4.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#논리-연산자로-복합-조건-만들기"><i class="fa fa-check"></i><b>7.4.3</b> 논리 연산자로 복합 조건 만들기</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:arrange"><i class="fa fa-check"></i><b>7.5</b> <code>arrange()</code>로 행 정렬하기</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#desc를-이용하여-내림차순으로-정렬하기"><i class="fa fa-check"></i><b>7.5.1</b> <code>desc()</code>를 이용하여 내림차순으로 정렬하기</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:select"><i class="fa fa-check"></i><b>7.6</b> <code>select()</code>를 이용하여 변수 이름으로 열 선택하기</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름을-나열하여-선택하기"><i class="fa fa-check"></i><b>7.6.1</b> 변수 이름을 나열하여 선택하기</a></li>
<li class="chapter" data-level="7.6.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름으로-변수-범위를-선택하기"><i class="fa fa-check"></i><b>7.6.2</b> 변수 이름으로 변수 범위를 선택하기</a></li>
<li class="chapter" data-level="7.6.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름을-매칭하여-선택하기"><i class="fa fa-check"></i><b>7.6.3</b> 변수 이름을 매칭하여 선택하기</a></li>
<li class="chapter" data-level="7.6.4" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-이름-바꾸기"><i class="fa fa-check"></i><b>7.6.4</b> 변수 이름 바꾸기</a></li>
<li class="chapter" data-level="7.6.5" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#변수-순서-바꾸기"><i class="fa fa-check"></i><b>7.6.5</b> 변수 순서 바꾸기</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:mutate"><i class="fa fa-check"></i><b>7.7</b> <code>mutate()</code>로 새로운 변수 만들기</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#transmute로-새로운-변수만-남기기"><i class="fa fa-check"></i><b>7.7.1</b> <code>transmute()</code>로 새로운 변수만 남기기</a></li>
<li class="chapter" data-level="7.7.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#새로운-변수를-만들-때-사용할-수-있는-함수들"><i class="fa fa-check"></i><b>7.7.2</b> 새로운 변수를 만들 때 사용할 수 있는 함수들</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:summarize"><i class="fa fa-check"></i><b>7.8</b> <code>summarize()</code>로 변수 요약하기</a></li>
<li class="chapter" data-level="7.9" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:groupBy"><i class="fa fa-check"></i><b>7.9</b> <code>group_by()</code>로 그룹 별로 요약하기</a></li>
<li class="chapter" data-level="7.10" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#sec:pipeOperator"><i class="fa fa-check"></i><b>7.10</b> <code>%&gt;%</code> 파이프 연산자</a>
<ul>
<li class="chapter" data-level="7.10.1" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#여러-단계를-거쳐-데이터를-변환할-때"><i class="fa fa-check"></i><b>7.10.1</b> 여러 단계를 거쳐 데이터를 변환할 때</a></li>
<li class="chapter" data-level="7.10.2" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#파이프-연산자"><i class="fa fa-check"></i><b>7.10.2</b> 파이프 연산자</a></li>
<li class="chapter" data-level="7.10.3" data-path="ch-dataTransformation.html"><a href="ch-dataTransformation.html#ungroup"><i class="fa fa-check"></i><b>7.10.3</b> <code>ungroup()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ch-visualization.html"><a href="ch-visualization.html"><i class="fa fa-check"></i><b>8</b> ggplot2를 이용한 데이터 시각화</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ch-visualization.html"><a href="ch-visualization.html#sec:getStarted-ggplot2"><i class="fa fa-check"></i><b>8.1</b> ggplot2 시작하기</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec:tryGgplot"><i class="fa fa-check"></i><b>8.1.1</b> ggplot2 그래프 그려보기</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="ch-visualization.html"><a href="ch-visualization.html#sec:aesMapping"><i class="fa fa-check"></i><b>8.2</b> 도형의 속성에 데이터 열을 대응시키기 (aesthetic mapping)</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="ch-visualization.html"><a href="ch-visualization.html#색상color-속성"><i class="fa fa-check"></i><b>8.2.1</b> 색상(<code>color</code>) 속성</a></li>
<li class="chapter" data-level="8.2.2" data-path="ch-visualization.html"><a href="ch-visualization.html#모양shape-속성"><i class="fa fa-check"></i><b>8.2.2</b> 모양(<code>shape</code>) 속성</a></li>
<li class="chapter" data-level="8.2.3" data-path="ch-visualization.html"><a href="ch-visualization.html#크기size와-투명도alpha-속성"><i class="fa fa-check"></i><b>8.2.3</b> 크기(<code>size</code>)와 투명도(<code>alpha</code>) 속성</a></li>
<li class="chapter" data-level="8.2.4" data-path="ch-visualization.html"><a href="ch-visualization.html#도형의-여러-속성에-데이터-열을-대응시키기"><i class="fa fa-check"></i><b>8.2.4</b> 도형의 여러 속성에 데이터 열을 대응시키기</a></li>
<li class="chapter" data-level="8.2.5" data-path="ch-visualization.html"><a href="ch-visualization.html#도형-속성에-데이터-열을-매핑하기---예제"><i class="fa fa-check"></i><b>8.2.5</b> 도형 속성에 데이터 열을 매핑하기 - 예제</a></li>
<li class="chapter" data-level="8.2.6" data-path="ch-visualization.html"><a href="ch-visualization.html#도형의-속성에-대응시키기-vs.-도형의-속성-인수를-설정하기"><i class="fa fa-check"></i><b>8.2.6</b> 도형의 속성에 대응시키기 vs. 도형의 속성 인수를 설정하기</a></li>
<li class="chapter" data-level="8.2.7" data-path="ch-visualization.html"><a href="ch-visualization.html#group-속성"><i class="fa fa-check"></i><b>8.2.7</b> <code>group</code> 속성</a></li>
<li class="chapter" data-level="8.2.8" data-path="ch-visualization.html"><a href="ch-visualization.html#그룹으로-나누어-선-그래프-그리기"><i class="fa fa-check"></i><b>8.2.8</b> 그룹으로 나누어 선 그래프 그리기</a></li>
<li class="chapter" data-level="8.2.9" data-path="ch-visualization.html"><a href="ch-visualization.html#이산형-변수는-group-속성으로-자동-매핑된다."><i class="fa fa-check"></i><b>8.2.9</b> 이산형 변수는 <code>group</code> 속성으로 자동 매핑된다.</a></li>
<li class="chapter" data-level="8.2.10" data-path="ch-visualization.html"><a href="ch-visualization.html#geom_smooth-함수에서-group-속성"><i class="fa fa-check"></i><b>8.2.10</b> <code>geom_smooth()</code> 함수에서 <code>group</code> 속성</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="ch-visualization.html"><a href="ch-visualization.html#sec:commonProblems"><i class="fa fa-check"></i><b>8.3</b> ggplot 명령문을 입력할 때 자주 발생하는 문제들</a></li>
<li class="chapter" data-level="8.4" data-path="ch-visualization.html"><a href="ch-visualization.html#sec:facets"><i class="fa fa-check"></i><b>8.4</b> 측면(facets)으로 나누어 그리기</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="ch-visualization.html"><a href="ch-visualization.html#facet_wrap로-일차원-측면-그래프-그리기"><i class="fa fa-check"></i><b>8.4.1</b> <code>facet_wrap()</code>로 일차원 측면 그래프 그리기</a></li>
<li class="chapter" data-level="8.4.2" data-path="ch-visualization.html"><a href="ch-visualization.html#facet_grid로-이차원-측면-그래프-그리기"><i class="fa fa-check"></i><b>8.4.2</b> <code>facet_grid()</code>로 이차원 측면 그래프 그리기</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="ch-visualization.html"><a href="ch-visualization.html#sec:layerAndGeom"><i class="fa fa-check"></i><b>8.5</b> 그래프 계층(layers)과 도형(geoms)</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="ch-visualization.html"><a href="ch-visualization.html#geom-함수의-순서와-그래프-계층"><i class="fa fa-check"></i><b>8.5.1</b> geom 함수의 순서와 그래프 계층</a></li>
<li class="chapter" data-level="8.5.2" data-path="ch-visualization.html"><a href="ch-visualization.html#ggplot-함수는-좌표축을-자동-조정한다."><i class="fa fa-check"></i><b>8.5.2</b> <code>ggplot()</code> 함수는 좌표축을 자동 조정한다.</a></li>
<li class="chapter" data-level="8.5.3" data-path="ch-visualization.html"><a href="ch-visualization.html#여러-데이터를-사용하여-그래프-계층-만들기"><i class="fa fa-check"></i><b>8.5.3</b> 여러 데이터를 사용하여 그래프 계층 만들기</a></li>
<li class="chapter" data-level="8.5.4" data-path="ch-visualization.html"><a href="ch-visualization.html#다른-데이터-범위로-그래프-계층-만들기"><i class="fa fa-check"></i><b>8.5.4</b> 다른 데이터 범위로 그래프 계층 만들기</a></li>
<li class="chapter" data-level="8.5.5" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec:commonDataMapping"><i class="fa fa-check"></i><b>8.5.5</b> 공통 <code>data</code>와 <code>mapping</code>의 설정</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="ch-visualization.html"><a href="ch-visualization.html#sec:ggplotStat"><i class="fa fa-check"></i><b>8.6</b> 통계 변환</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec:statCategorical"><i class="fa fa-check"></i><b>8.6.1</b> 범주형 변수의 통계 요약</a></li>
<li class="chapter" data-level="8.6.2" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec:statNumerical"><i class="fa fa-check"></i><b>8.6.2</b> 수치형 변수의 통계 요약</a></li>
<li class="chapter" data-level="8.6.3" data-path="ch-visualization.html"><a href="ch-visualization.html#subsec:statNumericalPerCategory"><i class="fa fa-check"></i><b>8.6.3</b> 수치형 변수의 범주별 통계요약</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="ch-visualization.html"><a href="ch-visualization.html#sec:position"><i class="fa fa-check"></i><b>8.7</b> 위치 조정</a></li>
<li class="chapter" data-level="8.8" data-path="ch-visualization.html"><a href="ch-visualization.html#sec:typeofgraph"><i class="fa fa-check"></i><b>8.8</b> ggplot2 그래프의 종류</a>
<ul>
<li class="chapter" data-level="8.8.1" data-path="ch-visualization.html"><a href="ch-visualization.html#basic-graph"><i class="fa fa-check"></i><b>8.8.1</b> 기본 그래픽 함수</a></li>
<li class="chapter" data-level="8.8.2" data-path="ch-visualization.html"><a href="ch-visualization.html#onecategory"><i class="fa fa-check"></i><b>8.8.2</b> 한 범주형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.3" data-path="ch-visualization.html"><a href="ch-visualization.html#onenumeric"><i class="fa fa-check"></i><b>8.8.3</b> 한 수치형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.4" data-path="ch-visualization.html"><a href="ch-visualization.html#twocategories"><i class="fa fa-check"></i><b>8.8.4</b> 두 범주형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.5" data-path="ch-visualization.html"><a href="ch-visualization.html#category-numeric"><i class="fa fa-check"></i><b>8.8.5</b> 범주형 변수와 수치형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.6" data-path="ch-visualization.html"><a href="ch-visualization.html#twonumeric"><i class="fa fa-check"></i><b>8.8.6</b> 두 수치형 변수의 그래프</a></li>
<li class="chapter" data-level="8.8.7" data-path="ch-visualization.html"><a href="ch-visualization.html#morethanthree"><i class="fa fa-check"></i><b>8.8.7</b> 세 변수 이상의 그래프</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="ch-visualization.html"><a href="ch-visualization.html#modification"><i class="fa fa-check"></i><b>8.9</b> 그래프의 외양 바꾸기</a>
<ul>
<li class="chapter" data-level="8.9.1" data-path="ch-visualization.html"><a href="ch-visualization.html#axes"><i class="fa fa-check"></i><b>8.9.1</b> 좌표축의 조정</a></li>
<li class="chapter" data-level="8.9.2" data-path="ch-visualization.html"><a href="ch-visualization.html#좌표계의-변경"><i class="fa fa-check"></i><b>8.9.2</b> 좌표계의 변경</a></li>
<li class="chapter" data-level="8.9.3" data-path="ch-visualization.html"><a href="ch-visualization.html#색상-척도color-scales의-변경"><i class="fa fa-check"></i><b>8.9.3</b> 색상 척도(color scales)의 변경</a></li>
<li class="chapter" data-level="8.9.4" data-path="ch-visualization.html"><a href="ch-visualization.html#labelsmodification"><i class="fa fa-check"></i><b>8.9.4</b> 레이블 조정</a></li>
<li class="chapter" data-level="8.9.5" data-path="ch-visualization.html"><a href="ch-visualization.html#themes"><i class="fa fa-check"></i><b>8.9.5</b> 테마 변경</a></li>
</ul></li>
<li class="chapter" data-level="8.10" data-path="ch-visualization.html"><a href="ch-visualization.html#misc"><i class="fa fa-check"></i><b>8.10</b> 기타 유용한 팁들</a>
<ul>
<li class="chapter" data-level="8.10.1" data-path="ch-visualization.html"><a href="ch-visualization.html#combinegraph"><i class="fa fa-check"></i><b>8.10.1</b> 여러 그래프를 한 도표에 넣기</a></li>
<li class="chapter" data-level="8.10.2" data-path="ch-visualization.html"><a href="ch-visualization.html#savegraph"><i class="fa fa-check"></i><b>8.10.2</b> 그래프 저장하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html"><i class="fa fa-check"></i><b>9</b> R 고급 데이터 변환</a>
<ul>
<li class="chapter" data-level="9.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#데이터의-단순-결합"><i class="fa fa-check"></i><b>9.1</b> 데이터의 단순 결합</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#데이터를-행으로-결합하기"><i class="fa fa-check"></i><b>9.1.1</b> 데이터를 행으로 결합하기</a></li>
<li class="chapter" data-level="9.1.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#데이터를-열로-결합하기"><i class="fa fa-check"></i><b>9.1.2</b> 데이터를 열로 결합하기</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#관계형-데이터베이스처럼-데이터-결합하기"><i class="fa fa-check"></i><b>9.2</b> 관계형 데이터베이스처럼 데이터 결합하기</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#inner-join과-outer-join"><i class="fa fa-check"></i><b>9.2.1</b> Inner join과 outer join</a></li>
<li class="chapter" data-level="9.2.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#filtering-join"><i class="fa fa-check"></i><b>9.2.2</b> Filtering join</a></li>
<li class="chapter" data-level="9.2.3" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#join을-수행하는-다른-방법들"><i class="fa fa-check"></i><b>9.2.3</b> Join을 수행하는 다른 방법들</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#sec:tidyr"><i class="fa fa-check"></i><b>9.3</b> <code>tidyr</code> 패키지를 이용하여 정돈 데이터 형식으로 바꾸기</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#pivot_longer-여러-열에-걸친-한-변수의-데이터를-하나의-열로-길게-모으기"><i class="fa fa-check"></i><b>9.3.1</b> <code>pivot_longer</code>: 여러 열에 걸친 한 변수의 데이터를 하나의 열로 길게 모으기</a></li>
<li class="chapter" data-level="9.3.2" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#subsec:pivot-wider"><i class="fa fa-check"></i><b>9.3.2</b> <code>pivot_wider</code>: 여러 행에 걸쳐진 하나의 관측 데이터를 하나의 행으로 넓게 펼치기</a></li>
<li class="chapter" data-level="9.3.3" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#seperate-한-셀을-여러-셀로-분리하기"><i class="fa fa-check"></i><b>9.3.3</b> <code>seperate</code>: 한 셀을 여러 셀로 분리하기</a></li>
<li class="chapter" data-level="9.3.4" data-path="ch-R-Advanced-Data-Mgmt.html"><a href="ch-R-Advanced-Data-Mgmt.html#unite-여러-셀의-데이터를-하나의-셀로-병합하기"><i class="fa fa-check"></i><b>9.3.4</b> <code>unite</code>: 여러 셀의 데이터를 하나의 셀로 병합하기</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html"><i class="fa fa-check"></i><b>10</b> R 프로그래밍 구조</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-조건문"><i class="fa fa-check"></i><b>10.1</b> R 조건문</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#if-조건문"><i class="fa fa-check"></i><b>10.1.1</b> if 조건문</a></li>
<li class="chapter" data-level="10.1.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#switch-함수"><i class="fa fa-check"></i><b>10.1.2</b> switch 함수</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-반복문"><i class="fa fa-check"></i><b>10.2</b> R 반복문</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#for-반복문"><i class="fa fa-check"></i><b>10.2.1</b> for 반복문</a></li>
<li class="chapter" data-level="10.2.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#while-반복문"><i class="fa fa-check"></i><b>10.2.2</b> while 반복문</a></li>
<li class="chapter" data-level="10.2.3" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#repeat-반복문"><i class="fa fa-check"></i><b>10.2.3</b> repeat 반복문</a></li>
<li class="chapter" data-level="10.2.4" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#반복문의-제어-명령"><i class="fa fa-check"></i><b>10.2.4</b> 반복문의 제어 명령</a></li>
<li class="chapter" data-level="10.2.5" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r에서-반복문-사용의-주의점"><i class="fa fa-check"></i><b>10.2.5</b> R에서 반복문 사용의 주의점</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-함수"><i class="fa fa-check"></i><b>10.3</b> R 함수</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#함수의-생성과-호출"><i class="fa fa-check"></i><b>10.3.1</b> 함수의 생성과 호출</a></li>
<li class="chapter" data-level="10.3.2" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#함수-객체를-인수로-사용하기"><i class="fa fa-check"></i><b>10.3.2</b> 함수 객체를 인수로 사용하기</a></li>
<li class="chapter" data-level="10.3.3" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#r-연산자"><i class="fa fa-check"></i><b>10.3.3</b> R 연산자</a></li>
<li class="chapter" data-level="10.3.4" data-path="ch-R-Programming-Structure.html"><a href="ch-R-Programming-Structure.html#변수-범위"><i class="fa fa-check"></i><b>10.3.4</b> 변수 범위</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html"><i class="fa fa-check"></i><b>11</b> R 객체 지향 프로그래밍</a>
<ul>
<li class="chapter" data-level="11.1" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#객체-지향-프로그래밍"><i class="fa fa-check"></i><b>11.1</b> 객체 지향 프로그래밍</a></li>
<li class="chapter" data-level="11.2" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s3-클래스"><i class="fa fa-check"></i><b>11.2</b> S3 클래스</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s3-클래스-객체-만들기"><i class="fa fa-check"></i><b>11.2.1</b> S3 클래스 객체 만들기</a></li>
<li class="chapter" data-level="11.2.2" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#포괄-함수generic-functions"><i class="fa fa-check"></i><b>11.2.2</b> 포괄 함수(generic functions)</a></li>
<li class="chapter" data-level="11.2.3" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s3에서-상속성의-구현"><i class="fa fa-check"></i><b>11.2.3</b> S3에서 상속성의 구현</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="ch-R-OOP.html"><a href="ch-R-OOP.html#s4-클래스"><i class="fa fa-check"></i><b>11.3</b> S4 클래스</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 프로그래밍 (개정판)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ch:R-Data-Frame" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> R 데이터 프레임</h1>
<p>이 장에서는 여러 타입의 데이터가 혼재된 데이터 프레임이란 데이터 구조를 다룬다. 보통 다른 통계 소프트웨어에서 데이터 분석의 기본 단위인 데이터 집합 또는 데이터 행렬이라고 불리는 것이다.</p>
<div id="데이터-프레임의-두-측면-리스트적-측면-행렬적-측면" class="section level4 unnumbered">
<h4>데이터 프레임의 두 측면: 리스트적 측면 행렬적 측면</h4>
<p>데이터 프레임은 행렬을 일반화한 것으로 생각하면 이해하기 쉽다. 행렬에 속한 데이터는 모두 같은 타입인데 반해, 데이터 프레임은 각 열마다 각기 다른 타입의 데이터를 가질 수 있다. 데이터 프레임에는 한 열은 숫자 타입의 데이터가, 다른 한 열은 문자 타입의 데이터가 각각 들어갈 수 있다.</p>
<p>한 강의를 듣는 학생에 대한 표 <a href="ch-R-Data-Frame.html#tab:class-scores">6.1</a> 같은 데이터가 있다고 하자. 이 데이터에는 중간고사, 기말고사 같이 숫자 데이터도 있지만, 학생 이름과 성별처럼 문자 데이터도 있다. 그리고 재수강 여부처럼 논리 값 데이터도 있다. 데이터의 형태는 다르지만 한 학생에 대한 정보를 얻기 위해서는 숫자, 문자, 논리 값을 포함한 데이터를 다룰 수 있어야 한다. 이 경우에 사용할 수 있는 데이터 구조가 데이터 프레임이다.</p>
<p>본질적으로 데이터 프레임은 ‘data.frame’ 클래스인 리스트이다. 리스트가 특정 조건을 만족하면 데이터 프레임이 될 수 있다. 리스트와 데이터 프레임의 관계에 대한 자세한 내용은 <a href="ch-R-List.html#ch:R-List">5</a> 장을 참조하라.</p>
<table>
<caption><span id="tab:class-scores">Table 6.1: </span>한 과목의 수강생 데이터</caption>
<thead>
<tr class="header">
<th align="left">번호</th>
<th align="left">이름</th>
<th align="left">학년</th>
<th align="left">성별</th>
<th align="left">중간고사</th>
<th align="left">기말고사</th>
<th align="left">재수강</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">김철수</td>
<td align="left">1</td>
<td align="left">남</td>
<td align="left">74</td>
<td align="left">91</td>
<td align="left">T</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">김영희</td>
<td align="left">4</td>
<td align="left">여</td>
<td align="left">82</td>
<td align="left">77</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">이철수</td>
<td align="left">3</td>
<td align="left">남</td>
<td align="left">67</td>
<td align="left">88</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">이영희</td>
<td align="left">2</td>
<td align="left">여</td>
<td align="left">89</td>
<td align="left">78</td>
<td align="left">T</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">홍길동</td>
<td align="left">1</td>
<td align="left">남</td>
<td align="left">92</td>
<td align="left">86</td>
<td align="left">F</td>
</tr>
</tbody>
</table>
</div>
<div id="범주형-데이터와-요인-factors" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> 범주형 데이터와 요인 (Factors)</h2>
<p>R 데이터 프레임의 각 열은 숫자, 문자, 논리 값 벡터 또는 요인으로 구성된다. 숫자, 문자, 논리 값 벡터에 대해서는 <a href="ch-R-Vectors.html#ch:R-Vectors">3</a> 장에서 다루었다. 본 절에서는 R 데이터 프레임에 대하여 설명하기에 앞서 요인에 대하여 살펴보도록 한다.</p>
<div id="명목형-변수와-요인" class="section level3" number="6.1.1">
<h3><span class="header-section-number">6.1.1</span> 명목형 변수와 요인</h3>
<p>전국 유권자 대상으로 지지하는 정당에 대해 다음 설문조사를 하였다고 하자.</p>
<p>다음 중 지지하는 정당은? ( )</p>
<ol style="list-style-type: decimal">
<li>A 정당</li>
<li>B 정당</li>
<li>C 정당</li>
<li>지지하는 정당 없음</li>
</ol>
<div id="범주-데이터의-숫자-코딩" class="section level4 unnumbered">
<h4>범주 데이터의 숫자 코딩</h4>
<p>10 명의 유권자에게 응답을 얻었다면 아마도 1부터 4까지의 숫자를 이용하여 다음과 같이 설문 결과를 입력하게 될 것이다.</p>
<div class="sourceCode" id="cb1004"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1004-1"><a href="ch-R-Data-Frame.html#cb1004-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>results &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb1004-2"><a href="ch-R-Data-Frame.html#cb1004-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>results</span></code></pre></div>
<pre><code> [1] 1 3 2 4 3 2 1 3 2 2</code></pre>
<p>여기서 숫자로 코딩된 설문 결과는 1부터 4까지의 수량적 의미를 가지기보다는 4가지 범주(A 정당, B 정당, C 정당, 없음)의 차이를 숫자로 표현한 것 뿐이다. 그런데 이렇게 범주형 데이터를 숫자 벡터로 표현하는 것은 범주형 데이터를 편리하게 코딩할 수 있는 장점이 있는 반면 다음과 같은 단점을 가진다.</p>
</div>
<div id="숫자-코딩의-문제점" class="section level4 unnumbered">
<h4>숫자 코딩의 문제점</h4>
<ul>
<li>결과가 숫자 벡터로 입력되었으므로 다음처럼 어떤 범주에도 대응되지 않는 잘못된 숫자가 입력될 수도 있다.</li>
</ul>
<div class="sourceCode" id="cb1006"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1006-1"><a href="ch-R-Data-Frame.html#cb1006-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>results[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">5</span></span>
<span id="cb1006-2"><a href="ch-R-Data-Frame.html#cb1006-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>results</span></code></pre></div>
<pre><code> [1] 5 3 2 4 3 2 1 3 2 2</code></pre>
<ul>
<li>결과를 숫자형 데이터로 오인하여 잘못된 처리를 수행할 수 있다. 입력하는 시점에는 오인을 할 가능성이 적지만 데이터를 분석하는 과정에서 주의를 기울이지 않으면 범주형 데이터를 숫자 데이터로 오인하여 잘못된 분석을 수행할 수 있다. 다음은 범주형 데이터를 나타내는 벡터를 수량 데이터로 오인하여 평균을 분석한 예이다.</li>
</ul>
<div class="sourceCode" id="cb1008"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1008-1"><a href="ch-R-Data-Frame.html#cb1008-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(results)</span></code></pre></div>
<pre><code>[1] 2.7</code></pre>
<ul>
<li>데이터 입력 후 제대로 기록해 두지 않으면 각 숫자의 의미가 무엇인지 파악하기 어렵게 된다.</li>
</ul>
</div>
<div id="factor" class="section level4 unnumbered">
<h4>factor()</h4>
<p>이러한 문제를 해결하기 위해 R은 범주형 데이터를 처리할 때 이용할 수 있는 요인(factor)이라는 데이터 형태를 제공한다. 요인을 생성하기 위해서 factor() 함수를 이용한다.</p>
</div>
<div id="수준-levels" class="section level4 unnumbered">
<h4>수준 levels</h4>
<p>다음은 숫자로 코딩된 결과(results)를 이용하여 1, 2, 3, 4 수준(level)을 가진 요인을 생성한 예이다. 요인에서 수준은 요인 데이터가 가질 수 있는 차별적 값을 나타낸다.</p>
<div class="sourceCode" id="cb1010"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1010-1"><a href="ch-R-Data-Frame.html#cb1010-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>results</span></code></pre></div>
<pre><code> [1] 5 3 2 4 3 2 1 3 2 2</code></pre>
<div class="sourceCode" id="cb1012"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1012-1"><a href="ch-R-Data-Frame.html#cb1012-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">attributes</span>(results)</span></code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode" id="cb1014"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1014-1"><a href="ch-R-Data-Frame.html#cb1014-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults &lt;-<span class="st"> </span><span class="kw">factor</span>(results, <span class="dt">levels=</span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</span>
<span id="cb1014-2"><a href="ch-R-Data-Frame.html#cb1014-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults</span></code></pre></div>
<pre><code> [1] &lt;NA&gt; 3    2    4    3    2    1    3    2    2   
Levels: 1 2 3 4</code></pre>
<div class="sourceCode" id="cb1016"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1016-1"><a href="ch-R-Data-Frame.html#cb1016-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">attributes</span>(fResults)</span></code></pre></div>
<pre><code>$levels
[1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;

$class
[1] &quot;factor&quot;</code></pre>
<p>결과에서 보듯이 수준에 포함되지 않은 5의 값은 NA로 변환된다. 요인으로 변경된 데이터의 클래스는 factor가 되고, levels 속성이 지정되어 있음을 볼 수 있다. results의 첫 번째 데이터를 제대로 된 값인 1로 변경한 후 다시 한번 요인으로 변경해 보자.</p>
<div class="sourceCode" id="cb1018"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1018-1"><a href="ch-R-Data-Frame.html#cb1018-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>results[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb1018-2"><a href="ch-R-Data-Frame.html#cb1018-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults &lt;-<span class="st"> </span><span class="kw">factor</span>(results, <span class="dt">levels=</span><span class="dv">1</span><span class="op">:</span><span class="dv">4</span>)</span>
<span id="cb1018-3"><a href="ch-R-Data-Frame.html#cb1018-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults</span></code></pre></div>
<pre><code> [1] 1 3 2 4 3 2 1 3 2 2
Levels: 1 2 3 4</code></pre>
<p>만약 요인 데이터에 이미 정의된 수준을 제외한 다른 값을 입력하면 다음과 같이 경고가 출력되고 입력된 데이터는 NA로 입력됨을 볼 수 있다.</p>
<div class="sourceCode" id="cb1020"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1020-1"><a href="ch-R-Data-Frame.html#cb1020-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults[<span class="dv">11</span>] &lt;-<span class="st"> </span><span class="dv">4</span></span>
<span id="cb1020-2"><a href="ch-R-Data-Frame.html#cb1020-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults</span></code></pre></div>
<pre><code> [1] 1 3 2 4 3 2 1 3 2 2 4
Levels: 1 2 3 4</code></pre>
<div class="sourceCode" id="cb1022"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1022-1"><a href="ch-R-Data-Frame.html#cb1022-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults[<span class="dv">12</span>] &lt;-<span class="st"> </span><span class="dv">5</span></span></code></pre></div>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, 12, value = 5): invalid factor level, NA
generated</code></pre>
<div class="sourceCode" id="cb1024"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1024-1"><a href="ch-R-Data-Frame.html#cb1024-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults</span></code></pre></div>
<pre><code> [1] 1    3    2    4    3    2    1    3    2    2    4    &lt;NA&gt;
Levels: 1 2 3 4</code></pre>
<p>만약 요인 데이터를 숫자 벡터로 착각하여 평균을 구하려고 해 보자. 먼저 fResults의 데이터를 원래대로 돌려놓은 후 mean() 함수로 평균을 구해보자. 그러면 숫자 데이터가 아니므로 평균을 구할 수 없음을 알 수 있다.</p>
<div class="sourceCode" id="cb1026"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1026-1"><a href="ch-R-Data-Frame.html#cb1026-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults[<span class="dv">12</span>] &lt;-<span class="st"> </span><span class="dv">2</span></span>
<span id="cb1026-2"><a href="ch-R-Data-Frame.html#cb1026-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults</span></code></pre></div>
<pre><code> [1] 1 3 2 4 3 2 1 3 2 2 4 2
Levels: 1 2 3 4</code></pre>
<div class="sourceCode" id="cb1028"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1028-1"><a href="ch-R-Data-Frame.html#cb1028-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(fResults)</span></code></pre></div>
<pre><code>Warning in mean.default(fResults): argument is not numeric or logical: returning
NA</code></pre>
<pre><code>[1] NA</code></pre>
</div>
<div id="levels" class="section level4 unnumbered">
<h4>levels()</h4>
<p>요인의 수준을 좀 더 의미있는 형태로 바꾸어 보자. 그러면 요인에 입력된 숫자가 각각 어떤 범주에 대응하는지를 쉽게 파악할 수 있다.</p>
<div class="sourceCode" id="cb1031"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1031-1"><a href="ch-R-Data-Frame.html#cb1031-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">levels</span>(fResults)</span></code></pre></div>
<pre><code>[1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;</code></pre>
<div class="sourceCode" id="cb1033"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1033-1"><a href="ch-R-Data-Frame.html#cb1033-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">levels</span>(fResults) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>, <span class="st">&quot;None&quot;</span>)</span>
<span id="cb1033-2"><a href="ch-R-Data-Frame.html#cb1033-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults</span></code></pre></div>
<pre><code> [1] A    C    B    None C    B    A    C    B    B    None B   
Levels: A B C None</code></pre>
<p>이제 fResults 요인을 출력해 보면 각 데이터가 수준에 정의된 문자로 표현됨을 볼 수 있다. 그러면 fResults는 문자 데이터로 변환된 것일까? 그렇지 않다. 요인은 내부적으로 데이터를 각각의 범주를 1부터 시작하는 자연수로 관리한다. 이 예에서는 4가지 서로 다른 범주(수준)이 있으므로 1부터 4까지의 자연수로 데이터를 표현한다. 단지 입출력될 때 요인에 부여된 수준으로 처리를 할 뿐이다. 이를 확인하기 위해서 typeof() 함수로 요인의 근원적 타입을 확인하고, unclass() 함수를 이용하여 요인이 내부적으로 어떤 정보를 가지고 있는지 확인해 보자.</p>
<div class="sourceCode" id="cb1035"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1035-1"><a href="ch-R-Data-Frame.html#cb1035-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(fResults)</span></code></pre></div>
<pre><code>[1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb1037"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1037-1"><a href="ch-R-Data-Frame.html#cb1037-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">class</span>(fResults)</span></code></pre></div>
<pre><code>[1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb1039"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1039-1"><a href="ch-R-Data-Frame.html#cb1039-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">unclass</span>(fResults)</span></code></pre></div>
<pre><code> [1] 1 3 2 4 3 2 1 3 2 2 4 2
attr(,&quot;levels&quot;)
[1] &quot;A&quot;    &quot;B&quot;    &quot;C&quot;    &quot;None&quot;</code></pre>
<p>요인이 내부적으로 숫자로 데이터를 표현하고 있다고 하더라도, 수준에 정의되지 않은 숫자로 데이터를 입력할 수는 없다. 요인은 항상 수준에 정의되어 있는 데이터 값만으로 입력되거나 출력될 수 있다.</p>
<div class="sourceCode" id="cb1041"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1041-1"><a href="ch-R-Data-Frame.html#cb1041-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">levels</span>(fResults)</span></code></pre></div>
<pre><code>[1] &quot;A&quot;    &quot;B&quot;    &quot;C&quot;    &quot;None&quot;</code></pre>
<div class="sourceCode" id="cb1043"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1043-1"><a href="ch-R-Data-Frame.html#cb1043-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults[<span class="dv">11</span>] &lt;-<span class="st"> </span><span class="dv">4</span></span></code></pre></div>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, 11, value = 4): invalid factor level, NA
generated</code></pre>
<div class="sourceCode" id="cb1045"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1045-1"><a href="ch-R-Data-Frame.html#cb1045-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults[<span class="dv">12</span>] &lt;-<span class="st"> &quot;None&quot;</span></span>
<span id="cb1045-2"><a href="ch-R-Data-Frame.html#cb1045-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fResults</span></code></pre></div>
<pre><code> [1] A    C    B    None C    B    A    C    B    B    &lt;NA&gt; None
Levels: A B C None</code></pre>
</div>
</div>
<div id="순서형-변수와-요인" class="section level3" number="6.1.2">
<h3><span class="header-section-number">6.1.2</span> 순서형 변수와 요인</h3>
<p>범주형 데이터는 앞의 예처럼 범주 간에 순서가 없는 명목형 데이터도 있지만, 범주 간에 순서가 있는 순서형 데이터도 있다. 전국 유권자 대상으로 현 정권에 대한 만족도에 대해 다음 설문조사를 하였다고 하자.</p>
<p>현 정권의 국정 수행에 대해 만족하고 계십니까? ( )</p>
<ol style="list-style-type: decimal">
<li>매우 불만</li>
<li>불만</li>
<li>보통</li>
<li>만족</li>
<li>매우 만족</li>
</ol>
<p>설문 결과를 다음과 같이 요인을 가지고 결과를 코딩할 수 있을 것이다. 그러나 요인은 디폴트로 수준 간에 순서가 없는 명목형 변수로 데이터를 처리한다. 그러므로 순서를 비교하는 비교 연산을 적용할 수 없다.</p>
<div class="sourceCode" id="cb1047"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1047-1"><a href="ch-R-Data-Frame.html#cb1047-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>satisfaction &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;매우 불만&quot;</span>, <span class="st">&quot;매우 만족&quot;</span>, <span class="st">&quot;불만&quot;</span>, <span class="st">&quot;만족&quot;</span>, <span class="st">&quot;보통&quot;</span>, </span>
<span id="cb1047-2"><a href="ch-R-Data-Frame.html#cb1047-2" aria-hidden="true"></a><span class="op">+</span><span class="st">                   &quot;불만&quot;</span>, <span class="st">&quot;매우 불만&quot;</span>, <span class="st">&quot;보통&quot;</span>, <span class="st">&quot;매우 만족&quot;</span>, <span class="st">&quot;불만&quot;</span>)</span>
<span id="cb1047-3"><a href="ch-R-Data-Frame.html#cb1047-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fSatisfaction &lt;-<span class="st"> </span><span class="kw">factor</span>(satisfaction, </span>
<span id="cb1047-4"><a href="ch-R-Data-Frame.html#cb1047-4" aria-hidden="true"></a><span class="op">+</span><span class="st">         </span><span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;매우 불만&quot;</span>, <span class="st">&quot;불만&quot;</span>, <span class="st">&quot;보통&quot;</span>, <span class="st">&quot;만족&quot;</span>, <span class="st">&quot;매우 만족&quot;</span>))</span>
<span id="cb1047-5"><a href="ch-R-Data-Frame.html#cb1047-5" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fSatisfaction</span></code></pre></div>
<pre><code> [1] 매우 불만 매우 만족 불만      만족      보통      불만      매우 불만
 [8] 보통      매우 만족 불만     
Levels: 매우 불만 불만 보통 만족 매우 만족</code></pre>
<div class="sourceCode" id="cb1049"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1049-1"><a href="ch-R-Data-Frame.html#cb1049-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fSatisfaction <span class="op">&gt;=</span><span class="st"> &quot;만족&quot;</span></span></code></pre></div>
<pre><code>Warning in Ops.factor(fSatisfaction, &quot;만족&quot;): &#39;&gt;=&#39; not meaningful for factors</code></pre>
<pre><code> [1] NA NA NA NA NA NA NA NA NA NA</code></pre>
<div id="ordered-인수로-순서형-변수-만들기" class="section level4 unnumbered">
<h4>ordered 인수로 순서형 변수 만들기</h4>
<p>명목형 데이터를 나타내는 요인의 숫자는 각 범주를 표현하는 의미를 가지므로 앞의 맨 마지막 예처럼 순서를 비교하는 연산을 수행할 수 없다. 그런데 이 경우에는 범주 간에 순서적 의미가 있으므로 factor() 함수의 ordered 인수를 설정하여 범주 간의 순서 관계를 명확히 할 수 있다. 다음 예에서 볼 수 있듯이 범주 간의 순서가 수준이 출력될 때 명시됨을 볼 수 있고, 순서 비교가 가능함을 볼 수 있다. 심지어는 order() 함수로 순서를 파악할 수 있다.</p>
<div class="sourceCode" id="cb1052"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1052-1"><a href="ch-R-Data-Frame.html#cb1052-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>oSatisfaction &lt;-<span class="st"> </span><span class="kw">factor</span>(satisfaction, <span class="dt">ordered =</span> <span class="ot">TRUE</span>,</span>
<span id="cb1052-2"><a href="ch-R-Data-Frame.html#cb1052-2" aria-hidden="true"></a><span class="op">+</span><span class="st">         </span><span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;매우 불만&quot;</span>, <span class="st">&quot;불만&quot;</span>, <span class="st">&quot;보통&quot;</span>, <span class="st">&quot;만족&quot;</span>, <span class="st">&quot;매우 만족&quot;</span>))</span>
<span id="cb1052-3"><a href="ch-R-Data-Frame.html#cb1052-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>oSatisfaction</span></code></pre></div>
<pre><code> [1] 매우 불만 매우 만족 불만      만족      보통      불만      매우 불만
 [8] 보통      매우 만족 불만     
Levels: 매우 불만 &lt; 불만 &lt; 보통 &lt; 만족 &lt; 매우 만족</code></pre>
<div class="sourceCode" id="cb1054"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1054-1"><a href="ch-R-Data-Frame.html#cb1054-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>oSatisfaction <span class="op">&gt;=</span><span class="st"> &quot;만족&quot;</span> </span></code></pre></div>
<pre><code> [1] FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb1056"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1056-1"><a href="ch-R-Data-Frame.html#cb1056-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">sum</span>(oSatisfaction <span class="op">&gt;=</span><span class="st"> &quot;만족&quot;</span>)</span></code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode" id="cb1058"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1058-1"><a href="ch-R-Data-Frame.html#cb1058-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(oSatisfaction <span class="op">&gt;=</span><span class="st"> &quot;만족&quot;</span>)</span></code></pre></div>
<pre><code>[1] 0.3</code></pre>
<div class="sourceCode" id="cb1060"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1060-1"><a href="ch-R-Data-Frame.html#cb1060-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">order</span>(oSatisfaction)</span></code></pre></div>
<pre><code> [1]  1  7  3  6 10  5  8  4  2  9</code></pre>
<p>R은 범주형 변수인 ’불만’과 ’만족’의 순서를 알 수 없다. ordered() 함수로 순서형 범주를 만들 때 levels에 나열된 순서로 크기가 주어진다고 가정한다. 만약 위의 예에서 levels의 순서가 다르면 다른 결과가 나올 것이다.</p>
<div class="sourceCode" id="cb1062"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1062-1"><a href="ch-R-Data-Frame.html#cb1062-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>oSatisfaction &lt;-<span class="st"> </span><span class="kw">factor</span>(satisfaction, <span class="dt">ordered =</span> <span class="ot">TRUE</span>,</span>
<span id="cb1062-2"><a href="ch-R-Data-Frame.html#cb1062-2" aria-hidden="true"></a><span class="op">+</span><span class="st">         </span><span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;매우 만족&quot;</span>, <span class="st">&quot;만족&quot;</span>, <span class="st">&quot;보통&quot;</span>, <span class="st">&quot;불만&quot;</span>, <span class="st">&quot;매우 불만&quot;</span>))</span>
<span id="cb1062-3"><a href="ch-R-Data-Frame.html#cb1062-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>oSatisfaction</span></code></pre></div>
<pre><code> [1] 매우 불만 매우 만족 불만      만족      보통      불만      매우 불만
 [8] 보통      매우 만족 불만     
Levels: 매우 만족 &lt; 만족 &lt; 보통 &lt; 불만 &lt; 매우 불만</code></pre>
<div class="sourceCode" id="cb1064"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1064-1"><a href="ch-R-Data-Frame.html#cb1064-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>oSatisfaction <span class="op">&gt;=</span><span class="st"> &quot;만족&quot;</span> </span></code></pre></div>
<pre><code> [1]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb1066"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1066-1"><a href="ch-R-Data-Frame.html#cb1066-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">sum</span>(oSatisfaction <span class="op">&gt;=</span><span class="st"> &quot;만족&quot;</span>)</span></code></pre></div>
<pre><code>[1] 8</code></pre>
<div class="sourceCode" id="cb1068"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1068-1"><a href="ch-R-Data-Frame.html#cb1068-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(oSatisfaction <span class="op">&gt;=</span><span class="st"> &quot;만족&quot;</span>)</span></code></pre></div>
<pre><code>[1] 0.8</code></pre>
<div class="sourceCode" id="cb1070"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1070-1"><a href="ch-R-Data-Frame.html#cb1070-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">order</span>(oSatisfaction)</span></code></pre></div>
<pre><code> [1]  2  9  4  5  8  3  6 10  1  7</code></pre>
</div>
<div id="수준의-순서" class="section level4 unnumbered">
<h4>수준의 순서</h4>
<p>순서형이 아닌 명목형 범주 데이터는 factor()로 만들어지고 이 때도 levels에 주어진 순서로, 범주(수준)가 내부적으로 저장되는 숫자가 결정된다. levels에 언급된 수준의 순서대로 1번부터 차례로 숫자가 부여된다. 순서형 범주 데이터처럼 순서가 데이터 분석에 핵심적인 역할을 하지는 않지만, 그래프나 표가 표현될 때 이 범주(수준)의 순서대로 출력되므로, 범주를 원하는 순서대로 출력하고자 하면 levels 인수에 수준의 순서를 명시하는 것이 좋다. 그렇지 않으면 단어의 사전적 순서 등에 의해 순서가 부여된다.</p>
<div class="sourceCode" id="cb1072"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1072-1"><a href="ch-R-Data-Frame.html#cb1072-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>)</span>
<span id="cb1072-2"><a href="ch-R-Data-Frame.html#cb1072-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fa1 &lt;-<span class="st"> </span><span class="kw">factor</span>(a)</span>
<span id="cb1072-3"><a href="ch-R-Data-Frame.html#cb1072-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fa1</span></code></pre></div>
<pre><code>[1] F M F M F
Levels: F M</code></pre>
<div class="sourceCode" id="cb1074"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1074-1"><a href="ch-R-Data-Frame.html#cb1074-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">unclass</span>(fa1)</span></code></pre></div>
<pre><code>[1] 1 2 1 2 1
attr(,&quot;levels&quot;)
[1] &quot;F&quot; &quot;M&quot;</code></pre>
<div class="sourceCode" id="cb1076"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1076-1"><a href="ch-R-Data-Frame.html#cb1076-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">table</span>(fa1)</span></code></pre></div>
<pre><code>fa1
F M 
3 2 </code></pre>
<div class="sourceCode" id="cb1078"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1078-1"><a href="ch-R-Data-Frame.html#cb1078-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fa2 &lt;-<span class="st"> </span><span class="kw">factor</span>(a, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>))</span>
<span id="cb1078-2"><a href="ch-R-Data-Frame.html#cb1078-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fa2</span></code></pre></div>
<pre><code>[1] F M F M F
Levels: M F</code></pre>
<div class="sourceCode" id="cb1080"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1080-1"><a href="ch-R-Data-Frame.html#cb1080-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">unclass</span>(fa2)</span></code></pre></div>
<pre><code>[1] 2 1 2 1 2
attr(,&quot;levels&quot;)
[1] &quot;M&quot; &quot;F&quot;</code></pre>
<div class="sourceCode" id="cb1082"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1082-1"><a href="ch-R-Data-Frame.html#cb1082-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">table</span>(fa2)</span></code></pre></div>
<pre><code>fa2
M F 
2 3 </code></pre>
</div>
<div id="labels-인수" class="section level4 unnumbered">
<h4>labels 인수</h4>
<p>요인을 만든 후 기존의 수준을 변경하고 싶으면 levels() 함수를 이용하여 새로운 수준을 할당한다고 설명하였다. 그러나 요인을 만들 때 기존에 코딩된 수준을 바로 변경하고 싶을 수가 있다. 이 경우에는 factor() 함수에 labels 인수를 이용하면 기존의 수준이 labels 인수에 주어진 형태로 변경된다. 이 때 주의할 점은 levels 인수는 원래 데이터가 코딩된 형태로 정의되어야 하고, labels 인수는 바꿀 코딩 형태로 정의되어야 한다.</p>
<div class="sourceCode" id="cb1084"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1084-1"><a href="ch-R-Data-Frame.html#cb1084-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fa3 &lt;-<span class="st"> </span><span class="kw">factor</span>(a, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>), <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&quot;Male&quot;</span>, <span class="st">&quot;Female&quot;</span>))</span>
<span id="cb1084-2"><a href="ch-R-Data-Frame.html#cb1084-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fa3</span></code></pre></div>
<pre><code>[1] Female Male   Female Male   Female
Levels: Male Female</code></pre>
<div class="sourceCode" id="cb1086"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1086-1"><a href="ch-R-Data-Frame.html#cb1086-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">unclass</span>(fa3)</span></code></pre></div>
<pre><code>[1] 2 1 2 1 2
attr(,&quot;levels&quot;)
[1] &quot;Male&quot;   &quot;Female&quot;</code></pre>
<div class="sourceCode" id="cb1088"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1088-1"><a href="ch-R-Data-Frame.html#cb1088-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">table</span>(fa3)</span></code></pre></div>
<pre><code>fa3
  Male Female 
     2      3 </code></pre>
<div class="sourceCode" id="cb1090"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1090-1"><a href="ch-R-Data-Frame.html#cb1090-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fa3[<span class="dv">6</span>] &lt;-<span class="st"> &quot;M&quot;</span></span></code></pre></div>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, 6, value = &quot;M&quot;): invalid factor level, NA
generated</code></pre>
<div class="sourceCode" id="cb1092"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1092-1"><a href="ch-R-Data-Frame.html#cb1092-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>fa3[<span class="dv">6</span>] &lt;-<span class="st"> &quot;Male&quot;</span></span></code></pre></div>
</div>
</div>
</div>
<div id="데이터-프레임-만들기" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> 데이터 프레임 만들기</h2>
<div id="data.frame" class="section level4 unnumbered">
<h4>data.frame()</h4>
<p>data.frame() 함수를 이용하면 벡터, 행렬, 요인, 심지어 다른 데이터 프레임을 묶어서 새로운 데이터 프레임을 만들 수 있다. 이 때 다음과 같은 제한 조건이 있다.</p>
<p>첫째, 벡터는 모두 같은 길이를 가져야 하며 행렬과 데이터 프레임은 모두 같은 행 수를 가져야 한다. 벡터의 같은 위치의 데이터와 행렬 및 데이터 프레임의 같은 행에 있는 데이터가 연결되어 하나의 데이터 단위가 된다.</p>
<p>둘째, 벡터는 하나의 벡터가 데이터 프레임의 하나의 열이 되지만, 행렬, 데이터 프레임은 각 열이 데이터 프레임의 하나의 열이 된다.</p>
<p>이러한 사실을 염두하면서 표 <a href="ch-R-Data-Frame.html#tab:class-scores">6.1</a>의 데이터를 데이터 프레임으로 만들어 본다. 먼저 학생이름, 학년, 성별로만 이루어진 데이터 프레임을 만들어 보자.</p>
<div class="sourceCode" id="cb1093"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1093-1"><a href="ch-R-Data-Frame.html#cb1093-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>name &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;김철수&quot;</span>, <span class="st">&quot;김영희&quot;</span>, <span class="st">&quot;이철수&quot;</span>, <span class="st">&quot;이영희&quot;</span>, <span class="st">&quot;홍길동&quot;</span>)</span>
<span id="cb1093-2"><a href="ch-R-Data-Frame.html#cb1093-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>grade &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb1093-3"><a href="ch-R-Data-Frame.html#cb1093-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>gender &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot; M&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;M&quot;</span>)</span>
<span id="cb1093-4"><a href="ch-R-Data-Frame.html#cb1093-4" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>student &lt;-<span class="st"> </span><span class="kw">data.frame</span>(name, grade, gender)</span>
<span id="cb1093-5"><a href="ch-R-Data-Frame.html#cb1093-5" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>student</span></code></pre></div>
<pre><code>    name grade gender
1 김철수     1      M
2 김영희     4      F
3 이철수     3      M
4 이영희     2      F
5 홍길동     1      M</code></pre>
<p>위의 예에서는 길이가 같은 벡터와 요인을 인수로 해서 데이터 프레임을 만들었다. 데이터 프레임을 출력해 보면 자동으로 행 번호가 부여되어 있음을 볼 수 있다. 열의 이름으로 각각 벡터와 요인을 저장한 변수명이 부여되었음을 볼 수 있다.</p>
<p>이번에는 만들어진 데이터 프레임에 중간, 기말 고사 점수와 재수강 여부를 포함시켜 새로운 데이터 프레임을 만들어 보자. 아래 예에서는 중간, 기말 고사 점수를 행렬로 먼저 만든 후 데이터 프레임에 포함시켜 보았다.</p>
<div class="sourceCode" id="cb1095"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1095-1"><a href="ch-R-Data-Frame.html#cb1095-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>midterm =<span class="st"> </span><span class="kw">c</span>(<span class="dv">74</span>, <span class="dv">82</span>, <span class="dv">67</span>, <span class="dv">89</span>, <span class="dv">92</span>)</span>
<span id="cb1095-2"><a href="ch-R-Data-Frame.html#cb1095-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>final =<span class="st"> </span><span class="kw">c</span>(<span class="dv">91</span>, <span class="dv">77</span>, <span class="dv">88</span>, <span class="dv">78</span>, <span class="dv">86</span>)</span>
<span id="cb1095-3"><a href="ch-R-Data-Frame.html#cb1095-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>scores =<span class="st"> </span><span class="kw">cbind</span>(midterm, final)</span>
<span id="cb1095-4"><a href="ch-R-Data-Frame.html#cb1095-4" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>scores</span></code></pre></div>
<pre><code>     midterm final
[1,]      74    91
[2,]      82    77
[3,]      67    88
[4,]      89    78
[5,]      92    86</code></pre>
<div class="sourceCode" id="cb1097"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1097-1"><a href="ch-R-Data-Frame.html#cb1097-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>rt &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</span>
<span id="cb1097-2"><a href="ch-R-Data-Frame.html#cb1097-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students &lt;-<span class="st"> </span><span class="kw">data.frame</span>(student, scores, <span class="dt">retake =</span> rt)</span>
<span id="cb1097-3"><a href="ch-R-Data-Frame.html#cb1097-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students</span></code></pre></div>
<pre><code>    name grade gender midterm final retake
1 김철수     1      M      74    91   TRUE
2 김영희     4      F      82    77  FALSE
3 이철수     3      M      67    88  FALSE
4 이영희     2      F      89    78   TRUE
5 홍길동     1      M      92    86  FALSE</code></pre>
<p>위에서 새로운 데이터 프레임의 각 열의 이름은 기존 데이터 프레임의 각 열의 이름, 행렬의 열 이름이 자동으로 부여되고 있음을 볼 수 있다. 재수강 여부 데이터벡터 rt는 data.frame()이 호출될 때, retake = rt 형태로 인수를 전달하여 새로운 데이터 프레임에서는 이름이 retake로 변경되었다. 데이터 프레임을 생성할 때 각 열에 이름을 부여하고 싶으면 이와 같은 방식으로 이름을 부여하면 된다.</p>
</div>
<div id="cbind" class="section level4 unnumbered">
<h4>cbind()</h4>
<p>앞서 설명하였듯이 데이터 프레임은 행렬적인 외양을 가지고 있으므로 행렬처럼 cbind()나 rbind()를 이용하여 행과 열을 추가할 수 있다. 다음 예는 cbind를 이용하여 중간과 기말의 총점 열을 추가한 예이다.</p>
<div class="sourceCode" id="cb1099"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1099-1"><a href="ch-R-Data-Frame.html#cb1099-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>total.scores &lt;-<span class="st"> </span>midterm <span class="op">+</span><span class="st"> </span>final</span>
<span id="cb1099-2"><a href="ch-R-Data-Frame.html#cb1099-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">cbind</span>(students, total.scores)</span></code></pre></div>
<pre><code>    name grade gender midterm final retake total.scores
1 김철수     1      M      74    91   TRUE          165
2 김영희     4      F      82    77  FALSE          159
3 이철수     3      M      67    88  FALSE          155
4 이영희     2      F      89    78   TRUE          167
5 홍길동     1      M      92    86  FALSE          178</code></pre>
</div>
<div id="rbind" class="section level4 unnumbered">
<h4>rbind()</h4>
<p>다음 예는 rbind()로 새로운 데이터 행을 추가한 예이다. 이 때 주의할 점은 추가할 데이터의 각 항목의 이름과 형식이 일치해야 한다는 것이다.</p>
<div class="sourceCode" id="cb1101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1101-1"><a href="ch-R-Data-Frame.html#cb1101-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">name=</span><span class="st">&quot;Jane Eyre&quot;</span>, <span class="dt">grade=</span><span class="dv">4</span>, <span class="dt">gender=</span><span class="st">&quot;F&quot;</span>, </span>
<span id="cb1101-2"><a href="ch-R-Data-Frame.html#cb1101-2" aria-hidden="true"></a><span class="op">+</span><span class="st">                 </span><span class="dt">midterm=</span><span class="dv">90</span>, <span class="dt">final=</span><span class="dv">85</span>, <span class="dt">retake=</span>F)</span>
<span id="cb1101-3"><a href="ch-R-Data-Frame.html#cb1101-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>a</span></code></pre></div>
<pre><code>       name grade gender midterm final retake
1 Jane Eyre     4      F      90    85  FALSE</code></pre>
<div class="sourceCode" id="cb1103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1103-1"><a href="ch-R-Data-Frame.html#cb1103-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">rbind</span>(students, a)</span></code></pre></div>
<pre><code>       name grade gender midterm final retake
1    김철수     1      M      74    91   TRUE
2    김영희     4      F      82    77  FALSE
3    이철수     3      M      67    88  FALSE
4    이영희     2      F      89    78   TRUE
5    홍길동     1      M      92    86  FALSE
6 Jane Eyre     4      F      90    85  FALSE</code></pre>
</div>
</div>
<div id="데이터-프레임-각-열의-지정" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> 데이터 프레임 각 열의 지정</h2>
<div id="데이터-프레임은-리스트-타입" class="section level4 unnumbered">
<h4>데이터 프레임은 리스트 타입</h4>
<p>생성된 데이터 프레임에 대해 typeof() 함수와 attributes() 함수를 이용하여 타입과 속성을 알아보자. 다음 결과에서 데이터 프레임은 리스트 타입이며, names 속성에 데이터 프레임의 각 열의 이름이 나열되어 있음을 볼 수 있다.</p>
<div class="sourceCode" id="cb1105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1105-1"><a href="ch-R-Data-Frame.html#cb1105-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(students)</span></code></pre></div>
<pre><code>[1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb1107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1107-1"><a href="ch-R-Data-Frame.html#cb1107-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">attributes</span>(students)</span></code></pre></div>
<pre><code>$names
[1] &quot;name&quot;    &quot;grade&quot;   &quot;gender&quot;  &quot;midterm&quot; &quot;final&quot;   &quot;retake&quot; 

$class
[1] &quot;data.frame&quot;

$row.names
[1] 1 2 3 4 5</code></pre>
</div>
<div id="리스트-형식으로-데이터-프레임의-열-지정" class="section level4 unnumbered">
<h4>리스트 형식으로 데이터 프레임의 열 지정</h4>
<p>데이터 프레임은 본질적으로 리스트 타입이므로 데이터 프레임의 각 열은 리스트의 요소가 된다. 따라서 데이터 프레임의 각 열을 지정할 때는 리스트의 각 요소를 지정할 때와 마찬가지로, <code>$</code> 기호 또는 <code>[[ ]]</code>를 이용하여 다음과 같은 형태로 지정하면 된다. 이는 데이터 프레임이 리스트 타입이기 때문에 리스트와 같은 방식으로 요소들에 접근할 수 있기 때문이다. 리스트에 대한 자세한 설명은 <a href="ch-R-List.html#ch:R-List">5</a> 장을 확인하기 바란다.</p>
<div class="sourceCode" id="cb1109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1109-1"><a href="ch-R-Data-Frame.html#cb1109-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>data_frame_name<span class="op">$</span>column_name</span>
<span id="cb1109-2"><a href="ch-R-Data-Frame.html#cb1109-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>data_frame_name[[column_number]]</span>
<span id="cb1109-3"><a href="ch-R-Data-Frame.html#cb1109-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>data_frame_name[[column_name]]</span></code></pre></div>
<p>다음은 위에서 생성한 students의 각 열을 이름으로 지정하여, 학생의 성별 데이터, 중간, 기말고사를 출력한 예이다.</p>
<div class="sourceCode" id="cb1110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1110-1"><a href="ch-R-Data-Frame.html#cb1110-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>gender</span></code></pre></div>
<pre><code>[1] &quot; M&quot; &quot;F&quot;  &quot;M&quot;  &quot;F&quot;  &quot;M&quot; </code></pre>
<div class="sourceCode" id="cb1112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1112-1"><a href="ch-R-Data-Frame.html#cb1112-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[[<span class="st">&quot;midterm&quot;</span>]]</span></code></pre></div>
<pre><code>[1] 74 82 67 89 92</code></pre>
<div class="sourceCode" id="cb1114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1114-1"><a href="ch-R-Data-Frame.html#cb1114-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[[<span class="dv">5</span>]]</span></code></pre></div>
<pre><code>[1] 91 77 88 78 86</code></pre>
<div class="sourceCode" id="cb1116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1116-1"><a href="ch-R-Data-Frame.html#cb1116-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>name</span></code></pre></div>
<pre><code>[1] &quot;김철수&quot; &quot;김영희&quot; &quot;이철수&quot; &quot;이영희&quot; &quot;홍길동&quot;</code></pre>
<div class="sourceCode" id="cb1118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1118-1"><a href="ch-R-Data-Frame.html#cb1118-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(students<span class="op">$</span>name)</span></code></pre></div>
<pre><code>[1] &quot;character&quot;</code></pre>
</div>
<div id="데이터-프레임의-각-열은-벡터" class="section level4 unnumbered">
<h4>데이터 프레임의 각 열은 벡터</h4>
<p>데이터 프레임의 각 열은 벡터이므로 데이터 프레임의 특정 열을 리스트 필터링과 같은 방식으로 지정한 후, 벡터 연산이나 벡터 인덱스를 이용하여 각 요소의 값을 출력하거나 변경할 수 있다.</p>
<div class="sourceCode" id="cb1120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1120-1"><a href="ch-R-Data-Frame.html#cb1120-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>midterm <span class="op">*</span><span class="st"> </span><span class="dv">2</span></span></code></pre></div>
<pre><code>[1] 148 164 134 178 184</code></pre>
<div class="sourceCode" id="cb1122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1122-1"><a href="ch-R-Data-Frame.html#cb1122-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">sum</span>(students<span class="op">$</span>midterm)</span></code></pre></div>
<pre><code>[1] 404</code></pre>
<div class="sourceCode" id="cb1124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1124-1"><a href="ch-R-Data-Frame.html#cb1124-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>midterm[<span class="dv">5</span>]</span></code></pre></div>
<pre><code>[1] 92</code></pre>
<div class="sourceCode" id="cb1126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1126-1"><a href="ch-R-Data-Frame.html#cb1126-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>midterm[<span class="dv">5</span>] &lt;-<span class="st"> </span><span class="dv">50</span></span>
<span id="cb1126-2"><a href="ch-R-Data-Frame.html#cb1126-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[[<span class="dv">4</span>]][<span class="dv">3</span><span class="op">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>[1] 67 89 50</code></pre>
<p>또한 리스트에 새로운 요소를 추가할 때와 마찬가지 방법으로 열을 추가할 수도 있다. 다음 예는 hw이라는 이름으로 숙제 점수 열을 추가하는 예이다.</p>
<div class="sourceCode" id="cb1128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1128-1"><a href="ch-R-Data-Frame.html#cb1128-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>hw &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">10</span>)</span>
<span id="cb1128-2"><a href="ch-R-Data-Frame.html#cb1128-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
1 김철수     1      M      74    91   TRUE  8
2 김영희     4      F      82    77  FALSE  9
3 이철수     3      M      67    88  FALSE  7
4 이영희     2      F      89    78   TRUE  8
5 홍길동     1      M      50    86  FALSE 10</code></pre>
</div>
</div>
<div id="데이터-프레임의-필터링" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> 데이터 프레임의 필터링</h2>
<p>데이터를 분석하다 보면 작업 중인 데이터 프레임의 일부만을 선택하여 작업을 할필요가 있다. 어떤 경우에는 데이터의 일부분만 변경할 필요가 있다. 필요 없는 열을 제거하거나 새로운 열을 추가하기 위해서는 여러 열을 한번에 지정할 수도 있어야 한다.</p>
<p>이러한 작업을 수행하기 위해서는 데이터 프레임의 일부분을 지정하는 필터링을 수행하여야 한다. 데이터 프레임은 리스트를 기본적인 속성으로 하기 때문에 리스트로서 부분을 필터링하는 방법이 있고, 행렬적 외양을 가지고 있기 때문에 행렬처럼 필터링을 하는 방법이 있다.</p>
<div id="리스트-형식으로-필터링" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> 리스트 형식으로 필터링</h3>
<p>데이터 프레임은 리스트 구조를 가지고 있으며, 데이터 프레임의 열은 리스트의 각 요소가 된다. 따라서 <a href="ch-R-List.html#ch:R-List">5</a> 장에서 이용한 리스트의 부분 필터링을 수행하는 방법으로 데이터 프레임의 일부 열만 필터링을 수행할 수 있다.</p>
<div id="리스트로서-필터링은-1차원-인덱스-구조를-갖는다." class="section level4 unnumbered">
<h4>리스트로서 필터링은 1차원 인덱스 구조를 갖는다.</h4>
<p>리스트로서 데이터 프레임을 필터링하는 방법은 아래와 같이 인덱스 벡터를 이용하는 것이다. 여기서 인덱스 벡터는 벡터나 리스트의 인덱스 벡터와 마찬가지로 숫자, 이름, 논리값 벡터가 될 수 있다.</p>
<div class="sourceCode" id="cb1130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1130-1"><a href="ch-R-Data-Frame.html#cb1130-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>data_frame_name[index_vector]</span></code></pre></div>
<p>다음 예는 students 데이터 프레임에서 열의 인덱스를 숫자, 이름, 논리값으로 각각 지정하여 새로운 데이터 프레임을 만든 경우이다.</p>
<div class="sourceCode" id="cb1131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1131-1"><a href="ch-R-Data-Frame.html#cb1131-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students.new &lt;-<span class="st"> </span>students[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</span>
<span id="cb1131-2"><a href="ch-R-Data-Frame.html#cb1131-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students.new</span></code></pre></div>
<pre><code>    name grade
1 김철수     1
2 김영희     4
3 이철수     3
4 이영희     2
5 홍길동     1</code></pre>
<div class="sourceCode" id="cb1133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1133-1"><a href="ch-R-Data-Frame.html#cb1133-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students.new &lt;-<span class="st"> </span>students[<span class="op">-</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)]</span>
<span id="cb1133-2"><a href="ch-R-Data-Frame.html#cb1133-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students.new</span></code></pre></div>
<pre><code>  gender midterm final retake hw
1      M      74    91   TRUE  8
2      F      82    77  FALSE  9
3      M      67    88  FALSE  7
4      F      89    78   TRUE  8
5      M      50    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1135-1"><a href="ch-R-Data-Frame.html#cb1135-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>student.new &lt;-<span class="st"> </span>students[<span class="kw">c</span>(<span class="st">&quot;gender&quot;</span>, <span class="st">&quot;grade&quot;</span>)]</span>
<span id="cb1135-2"><a href="ch-R-Data-Frame.html#cb1135-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>student.new</span></code></pre></div>
<pre><code>  gender grade
1      M     1
2      F     4
3      M     3
4      F     2
5      M     1</code></pre>
<div class="sourceCode" id="cb1137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1137-1"><a href="ch-R-Data-Frame.html#cb1137-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>student.new &lt;-<span class="st"> </span>students[<span class="kw">c</span>(T, F, F, T, T, F)]</span>
<span id="cb1137-2"><a href="ch-R-Data-Frame.html#cb1137-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>student.new</span></code></pre></div>
<pre><code>    name midterm final hw
1 김철수      74    91  8
2 김영희      82    77  9
3 이철수      67    88  7
4 이영희      89    78  8
5 홍길동      50    86 10</code></pre>
<p>data.frame() 함수를 이용하면 기존의 데이터 프레임에 새로운 열을 추가하여 새로운 데이터 프레임도 만들 수 있다. 다음 예는 기존의 students 데이터 프레임에 키 데이터를 추가한 경우이다.</p>
<div class="sourceCode" id="cb1139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1139-1"><a href="ch-R-Data-Frame.html#cb1139-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>height &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">181</span>, <span class="dv">162</span>, <span class="dv">178</span>)</span>
<span id="cb1139-2"><a href="ch-R-Data-Frame.html#cb1139-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students.new &lt;-<span class="st"> </span><span class="kw">data.frame</span>(students[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>], <span class="dt">height=</span>height)</span>
<span id="cb1139-3"><a href="ch-R-Data-Frame.html#cb1139-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students.new</span></code></pre></div>
<pre><code>  grade gender height
1     1      M    172
2     4      F    167
3     3      M    181
4     2      F    162
5     1      M    178</code></pre>
</div>
<div id="열-지정하기-vs.-한-열만-데이터-프레임으로-필터링" class="section level4 unnumbered">
<h4>열 지정하기 vs. 한 열만 데이터 프레임으로 필터링</h4>
<p>앞서 설명하였듯이 데이터 프레임은 리스트이므로 데이터 프레임의 한 열만을 지정할 때 <code>[]</code>뿐 아니라 <code>[[]]</code>나 와 <code>$</code>를 이용해 한 열을 지정할 수 있다. 두 방식의 차이는 전자가 데이터 프레임에서 지정된 열만으로 이루어진 새로운 데이터 프레임을 반환하는 반면, 후자는 데이터 프레임에 있는 열 자체, 즉 벡터를 반환한다. 아래는 students 데이터 프레임에서 <code>[]</code>와 <code>[[]]</code>를 이용하여 두번째 열을 지정한 결과이다.</p>
<div class="sourceCode" id="cb1141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1141-1"><a href="ch-R-Data-Frame.html#cb1141-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span>students[<span class="dv">2</span>]</span>
<span id="cb1141-2"><a href="ch-R-Data-Frame.html#cb1141-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>a</span></code></pre></div>
<pre><code>  grade
1     1
2     4
3     3
4     2
5     1</code></pre>
<div class="sourceCode" id="cb1143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1143-1"><a href="ch-R-Data-Frame.html#cb1143-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(a)</span></code></pre></div>
<pre><code>[1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb1145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1145-1"><a href="ch-R-Data-Frame.html#cb1145-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">attributes</span>(a)</span></code></pre></div>
<pre><code>$names
[1] &quot;grade&quot;

$row.names
[1] 1 2 3 4 5

$class
[1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb1147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1147-1"><a href="ch-R-Data-Frame.html#cb1147-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>a &lt;-<span class="st"> </span>students[[<span class="dv">2</span>]]</span>
<span id="cb1147-2"><a href="ch-R-Data-Frame.html#cb1147-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>a</span></code></pre></div>
<pre><code>[1] 1 4 3 2 1</code></pre>
<div class="sourceCode" id="cb1149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1149-1"><a href="ch-R-Data-Frame.html#cb1149-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">typeof</span>(a)</span></code></pre></div>
<pre><code>[1] &quot;double&quot;</code></pre>
<div class="sourceCode" id="cb1151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1151-1"><a href="ch-R-Data-Frame.html#cb1151-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">attributes</span>(a)</span></code></pre></div>
<pre><code>NULL</code></pre>
<p>지금까지 설명한 내용은 데이터 프레임이 리스트 타입이기 때문에 성립하는 내용이다. 따라서 지금까지 설명한 내용은 리스트에도 모두 적용된다.</p>
</div>
</div>
<div id="행렬-형식으로-필터링" class="section level3" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> 행렬 형식으로 필터링</h3>
<div id="행렬로서-필터링은-2차원-인덱스-구조를-갖는다." class="section level4 unnumbered">
<h4>행렬로서 필터링은 2차원 인덱스 구조를 갖는다.</h4>
<p>데이터 프레임은 열의 길이가 모두 같기 때문에, 보통의 리스트에는 없는 행렬과 같은 필터링 방법이 존재한다. 특히 기존의 데이터 프레임에 행을 삭제 또는 추가할 필요가 있는 경우 이러한 행렬 방식의 필터링 방법은 매우 유용한다.<br />
데이터 프레임의 인덱스 벡터의 사용은 다음과 같이 행렬의 방식과 동일하게 행과 열을 독립적으로 지정하는 2차원 인덱스 구조를 가진다.</p>
<div class="sourceCode" id="cb1153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1153-1"><a href="ch-R-Data-Frame.html#cb1153-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>data_frame_name[row_index_vector, column_index_vector]</span></code></pre></div>
<p>다음은 students 데이터 프레임에서 행렬 인덱스 벡터를 이용하여 데이터의 일부를 지정한 예이다.</p>
<div class="sourceCode" id="cb1154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1154-1"><a href="ch-R-Data-Frame.html#cb1154-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[<span class="dv">1</span>,]</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
1 김철수     1      M      74    91   TRUE  8</code></pre>
<div class="sourceCode" id="cb1156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1156-1"><a href="ch-R-Data-Frame.html#cb1156-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>,]</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
2 김영희     4      F      82    77  FALSE  9
3 이철수     3      M      67    88  FALSE  7</code></pre>
<div class="sourceCode" id="cb1158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1158-1"><a href="ch-R-Data-Frame.html#cb1158-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[<span class="op">-</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>),]</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
1 김철수     1      M      74    91   TRUE  8
4 이영희     2      F      89    78   TRUE  8
5 홍길동     1      M      50    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1160-1"><a href="ch-R-Data-Frame.html#cb1160-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[,<span class="dv">4</span>]</span></code></pre></div>
<pre><code>[1] 74 82 67 89 50</code></pre>
<div class="sourceCode" id="cb1162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1162-1"><a href="ch-R-Data-Frame.html#cb1162-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[,<span class="op">-</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>    name grade gender final retake hw
1 김철수     1      M    91   TRUE  8
2 김영희     4      F    77  FALSE  9
3 이철수     3      M    88  FALSE  7
4 이영희     2      F    78   TRUE  8
5 홍길동     1      M    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1164-1"><a href="ch-R-Data-Frame.html#cb1164-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[, <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)]</span></code></pre></div>
<pre><code>  grade midterm
1     1      74
2     4      82
3     3      67
4     2      89
5     1      50</code></pre>
<div class="sourceCode" id="cb1166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1166-1"><a href="ch-R-Data-Frame.html#cb1166-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[<span class="dv">2</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">3</span><span class="op">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>  gender midterm final
2      F      82    77
3      M      67    88
4      F      89    78</code></pre>
<div class="sourceCode" id="cb1168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1168-1"><a href="ch-R-Data-Frame.html#cb1168-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>midterm <span class="op">&gt;=</span><span class="st"> </span><span class="dv">80</span></span></code></pre></div>
<pre><code>[1] FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb1170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1170-1"><a href="ch-R-Data-Frame.html#cb1170-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[students<span class="op">$</span>midterm <span class="op">&gt;=</span><span class="st"> </span><span class="dv">80</span>, ]</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
2 김영희     4      F      82    77  FALSE  9
4 이영희     2      F      89    78   TRUE  8</code></pre>
<div class="sourceCode" id="cb1172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1172-1"><a href="ch-R-Data-Frame.html#cb1172-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[students<span class="op">$</span>midterm <span class="op">&gt;=</span><span class="st"> </span><span class="dv">80</span>, <span class="kw">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;grade&quot;</span>, <span class="st">&quot;gender&quot;</span>)]</span></code></pre></div>
<pre><code>    name grade gender
2 김영희     4      F
4 이영희     2      F</code></pre>
<div class="sourceCode" id="cb1174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1174-1"><a href="ch-R-Data-Frame.html#cb1174-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[students<span class="op">$</span>grade <span class="op">!=</span><span class="st"> </span><span class="dv">1</span>, <span class="kw">c</span>(<span class="st">&quot;name&quot;</span>, <span class="st">&quot;grade&quot;</span>, <span class="st">&quot;gender&quot;</span>)]</span></code></pre></div>
<pre><code>    name grade gender
2 김영희     4      F
3 이철수     3      M
4 이영희     2      F</code></pre>
</div>
<div id="행렬-필터링-방법을-이용한-데이터-프레임-정렬" class="section level4 unnumbered">
<h4>행렬 필터링 방법을 이용한 데이터 프레임 정렬</h4>
<p>행렬과 마찬가지로 데이터 프레임을 특정 열을 기준으로 정렬할 수 있다. 다음은 학년을 기준으로 데이터 프레임을 정렬한 예와, 기말고사 점수가 높은 학생부터 낮은 학생 순으로 정렬한 예이다.</p>
<div class="sourceCode" id="cb1176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1176-1"><a href="ch-R-Data-Frame.html#cb1176-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">order</span>(students<span class="op">$</span>grade)</span></code></pre></div>
<pre><code>[1] 1 5 4 3 2</code></pre>
<div class="sourceCode" id="cb1178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1178-1"><a href="ch-R-Data-Frame.html#cb1178-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[<span class="kw">order</span>(students<span class="op">$</span>grade), ]</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
1 김철수     1      M      74    91   TRUE  8
5 홍길동     1      M      50    86  FALSE 10
4 이영희     2      F      89    78   TRUE  8
3 이철수     3      M      67    88  FALSE  7
2 김영희     4      F      82    77  FALSE  9</code></pre>
<div class="sourceCode" id="cb1180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1180-1"><a href="ch-R-Data-Frame.html#cb1180-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">order</span>(students<span class="op">$</span>final, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>[1] 1 3 5 4 2</code></pre>
<div class="sourceCode" id="cb1182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1182-1"><a href="ch-R-Data-Frame.html#cb1182-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[<span class="kw">order</span>(students<span class="op">$</span>final, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>), ]</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
1 김철수     1      M      74    91   TRUE  8
3 이철수     3      M      67    88  FALSE  7
5 홍길동     1      M      50    86  FALSE 10
4 이영희     2      F      89    78   TRUE  8
2 김영희     4      F      82    77  FALSE  9</code></pre>
<p>만약 학생을 학년으로 정렬을 한 후, 동일 학년이면 기말고사가 높은 사람이 먼저 나오게 정렬하고자 하면 어떻게 할까?
사실 order() 함수는 길이가 같은 여러 개의 벡터를 차례대로 비교하여 순위를 결정할 수 있다. order()의 인수 중 맨처음 나열된 벡터를 기준으로 순서를 결정하지만, 동률이 있으면 두번째로 나열된 벡터를 기준으로 동률 간의 순서를 결정한다. 두번째 벡터에서도 동률이면 다음에 나열된 벡터를 기준으로 이용한다.
예를 들어 학생을 학년 순서로 정렬하는데, 학년이 동률인 경우 기말고사 점수로 순서를 정한다고 하자. 그러면 다음과 같이 order() 함수를 기술하면 된다.</p>
<div class="sourceCode" id="cb1184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1184-1"><a href="ch-R-Data-Frame.html#cb1184-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">order</span>(students<span class="op">$</span>grade, students<span class="op">$</span>final)</span></code></pre></div>
<pre><code>[1] 5 1 4 3 2</code></pre>
<div class="sourceCode" id="cb1186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1186-1"><a href="ch-R-Data-Frame.html#cb1186-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[<span class="kw">order</span>(students<span class="op">$</span>grade, students<span class="op">$</span>final), ]</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
5 홍길동     1      M      50    86  FALSE 10
1 김철수     1      M      74    91   TRUE  8
4 이영희     2      F      89    78   TRUE  8
3 이철수     3      M      67    88  FALSE  7
2 김영희     4      F      82    77  FALSE  9</code></pre>
<p>그런데 우리는 학년은 낮은 학년부터 높은 학년으로 정렬하지만 기말고사는 높은 점수에서 낮은 점수로 정렬하고자 한다. order() 함수의 decreasing 인수를 TRUE로 하면 학년마저 높은 순에서 낮은 순으로 되니 원하는 결과를 얻을 수 없다.
이런 경우에는 첫번째 벡터는 그대로 두고, 두번째 벡터에 -1을 곱한 후 순서를 정렬하면 원하는 결과를 얻을 수 있다.</p>
<div class="sourceCode" id="cb1188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1188-1"><a href="ch-R-Data-Frame.html#cb1188-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[<span class="kw">order</span>(students<span class="op">$</span>grade, students<span class="op">$</span>final, <span class="dt">decreasing=</span>T), ]</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
2 김영희     4      F      82    77  FALSE  9
3 이철수     3      M      67    88  FALSE  7
4 이영희     2      F      89    78   TRUE  8
1 김철수     1      M      74    91   TRUE  8
5 홍길동     1      M      50    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1190-1"><a href="ch-R-Data-Frame.html#cb1190-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students[<span class="kw">order</span>(students<span class="op">$</span>grade, <span class="op">-</span>students<span class="op">$</span>final), ]</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
1 김철수     1      M      74    91   TRUE  8
5 홍길동     1      M      50    86  FALSE 10
4 이영희     2      F      89    78   TRUE  8
3 이철수     3      M      67    88  FALSE  7
2 김영희     4      F      82    77  FALSE  9</code></pre>
</div>
</div>
<div id="subset을-이용한-필터링" class="section level3" number="6.4.3">
<h3><span class="header-section-number">6.4.3</span> subset()을 이용한 필터링</h3>
<p>subset()<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> 함수는 벡터, 행렬, 데이터 프레임에서 조건에 맞는 부분을 반환하는 함수이다. 지금까지 우리는 벡터, 행렬, 데이터 프레임을 필터링할 때, 인덱스 벡터를 이용하여 이를 수행하였다. 사실 데이터 처리에 필요한 거의 모든 작업은 subset()을 이용할 필요가 없이, 지금까지 설명한 인덱스 벡터를 이용하여 필터링을 수행하면 된다. 그러나 subset() 함수를 이용하면 지금까지의 필터링 방법을 좀 더 쉽게 할 수 있는 경우가 있다.
subset() 함수는 다음과 같은 형식을 가진다.</p>
<div id="subset" class="section level4 unnumbered">
<h4>subset()</h4>
<div class="sourceCode" id="cb1192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1192-1"><a href="ch-R-Data-Frame.html#cb1192-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">subset</span>(x, subset, select, <span class="dt">drop=</span><span class="ot">FALSE</span>, ...)</span></code></pre></div>
<p>subset() 함수로 필터링하는 방법과 인덱스 벡터를 이용하는 필터링과의 차이점은 다음 3가지이다.</p>
<ul>
<li>조건에 부합하는 행을 필터링 할 때, subset() 함수는 subset 인수에 조건을 기술한다. 인덱스 벡터는 자연수, 음의 정수, 논리값, 문자열이 모두 가능하지만, subset에서는 논리값만 가능하다. subset에서는 열을 변수처럼 기술할 수 있기 때문에 행 필터링 조건을 인덱스 벡터를 이용하는 방법보다 좀 더 간편하게 기술할 수 있다.</li>
<li>subset() 함수를 이용한 필터링에서는 subset의 조건식의 결과가 NA인 경우는 FALSE로 평가하여 NA 행을 자동으로 제거한다. 인덱스 벡터를 이용하는 경우는 조건식의 결과가 NA이어도 그 행은 제거되지 않는다.</li>
<li>열을 필터링할 때, 인덱스 벡터를 이용한 필터링에서는 열의 번호나 이름으로 필터링할 열을 지정한다. 열의 이름으로 필터링 할 때는 반드시 문자열로 열의 이름이 표시된다. subset()의 경우 선택할 열은 select 인수로 표현하는데, 열의 이름을 따옴표 없이 변수처럼 그대로 기술한다. 그러면 열의 이름이 열의 번호로 대체되어 최종적으로 필터링이 수행된다.</li>
</ul>
<p>위에서 설명한 내용이 어떤 의미인지를 벡터, 행렬, 데이터 프레임의 경우에서 각각 살펴보도록 한다.</p>
</div>
<div id="subset을-이용한-벡터-필터링" class="section level4 unnumbered">
<h4>subset()을 이용한 벡터 필터링</h4>
<div class="sourceCode" id="cb1193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1193-1"><a href="ch-R-Data-Frame.html#cb1193-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">9</span>, <span class="ot">NA</span>, <span class="dv">5</span>, <span class="dv">2</span>)</span>
<span id="cb1193-2"><a href="ch-R-Data-Frame.html#cb1193-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>x[x<span class="op">&gt;</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>[1]  7  9 NA</code></pre>
<div class="sourceCode" id="cb1195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1195-1"><a href="ch-R-Data-Frame.html#cb1195-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">subset</span>(x, x<span class="op">&gt;</span><span class="st"> </span><span class="dv">6</span>)</span></code></pre></div>
<pre><code>[1] 7 9</code></pre>
<p>위의 예에서 보듯이 벡터를 필터링할 때, 인덱스 벡터를 이용하는 방법은 NA가 있는 경우 그 결과를 알 수 없으므로 필터링한 결과에도 NA로 표시한다. 그러나 subset() 함수는 NA를 자동으로 제거함을 알 수 있다.</p>
</div>
<div id="subset을-이용한-데이터-프레임-필터링" class="section level4 unnumbered">
<h4>subset()을 이용한 데이터 프레임 필터링</h4>
<div class="sourceCode" id="cb1197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1197-1"><a href="ch-R-Data-Frame.html#cb1197-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>y &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb1197-2"><a href="ch-R-Data-Frame.html#cb1197-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>z &lt;-<span class="st"> </span><span class="dv">-1</span><span class="op">:-</span><span class="dv">5</span></span>
<span id="cb1197-3"><a href="ch-R-Data-Frame.html#cb1197-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>long.name &lt;-<span class="st"> </span><span class="kw">data.frame</span>(x, y, z)</span>
<span id="cb1197-4"><a href="ch-R-Data-Frame.html#cb1197-4" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>long.name</span></code></pre></div>
<pre><code>   x y  z
1  7 1 -1
2  9 2 -2
3 NA 3 -3
4  5 4 -4
5  2 5 -5</code></pre>
<div class="sourceCode" id="cb1199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1199-1"><a href="ch-R-Data-Frame.html#cb1199-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">rm</span>(x, y, z)</span>
<span id="cb1199-2"><a href="ch-R-Data-Frame.html#cb1199-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>long.name[long.name<span class="op">$</span>x <span class="op">&gt;</span><span class="dv">6</span>, ]</span></code></pre></div>
<pre><code>    x  y  z
1   7  1 -1
2   9  2 -2
NA NA NA NA</code></pre>
<div class="sourceCode" id="cb1201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1201-1"><a href="ch-R-Data-Frame.html#cb1201-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">subset</span>(long.name, x<span class="op">&gt;</span><span class="dv">6</span>)</span></code></pre></div>
<pre><code>  x y  z
1 7 1 -1
2 9 2 -2</code></pre>
<p>위의 예에서 보듯이 인덱스 벡터를 이용하는 경우에는 데이터 프레임의 열을 지정하기 위해서 <code>$</code> 앞에 데이터 프레임 이름을 일일이 지정해야 했다. 그러나 subset()의 경우 두번째 인수에 열을 그냥 변수처럼 기술한다.</p>
<p>인덱스 벡터를 이용하는 방법은 NA가 있는 경우 그 결과를 알 수 없으므로 필터링한 결과에도 NA로 표시한다. 그러나 subset() 함수는 NA를 자동으로 제거한다.</p>
<div class="sourceCode" id="cb1203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1203-1"><a href="ch-R-Data-Frame.html#cb1203-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>long.name[long.name<span class="op">$</span>x <span class="op">&gt;</span><span class="dv">6</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span>]</span></code></pre></div>
<pre><code>    y  z
1   1 -1
2   2 -2
NA NA NA</code></pre>
<div class="sourceCode" id="cb1205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1205-1"><a href="ch-R-Data-Frame.html#cb1205-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">subset</span>(long.name, x<span class="op">&gt;</span><span class="dv">6</span>, y<span class="op">:</span>z)</span></code></pre></div>
<pre><code>  y  z
1 1 -1
2 2 -2</code></pre>
<div class="sourceCode" id="cb1207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1207-1"><a href="ch-R-Data-Frame.html#cb1207-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>long.name[long.name<span class="op">$</span>x <span class="op">&gt;</span><span class="dv">6</span>, <span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;z&quot;</span>)]</span></code></pre></div>
<pre><code>    x  z
1   7 -1
2   9 -2
NA NA NA</code></pre>
<div class="sourceCode" id="cb1209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1209-1"><a href="ch-R-Data-Frame.html#cb1209-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">subset</span>(long.name, x<span class="op">&gt;</span><span class="dv">6</span>, <span class="kw">c</span>(x, z))</span></code></pre></div>
<pre><code>  x  z
1 7 -1
2 9 -2</code></pre>
<div class="sourceCode" id="cb1211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1211-1"><a href="ch-R-Data-Frame.html#cb1211-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">subset</span>(long.name, x<span class="op">&gt;</span><span class="dv">6</span>, <span class="op">-</span>z)</span></code></pre></div>
<pre><code>  x y
1 7 1
2 9 2</code></pre>
<p>인덱스 벡터의 경우 열을 지정할 때 번호나 문자열 이름을 이용하였는데, subset()은 열의 이름을 변수처럼 사용하여 지정하고 있음을 알 수 있다. 앞서 설명하였듯이 변수처럼 사용된 열의 이름은 열의 위치를 나타내는 숫자로 변환되어 처리된다. 그렇기 때문에 y:z나 -z 등의 기술이 가능하다.</p>
</div>
</div>
</div>
<div id="데이터-프레임에-함수-적용하기" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> 데이터 프레임에 함수 적용하기</h2>
<div id="리스트로서-각-열에-함수-적용하기" class="section level4 unnumbered">
<h4>리스트로서 각 열에 함수 적용하기</h4>
<p>데이터 프레임은 리스트로서의 속성이 있기 때문에 lapply()나 sapply() 함수를 이용하여 열별로 함수를 적용할 수 있다.</p>
<div class="sourceCode" id="cb1213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1213-1"><a href="ch-R-Data-Frame.html#cb1213-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">lapply</span>(students[<span class="dv">4</span><span class="op">:</span><span class="dv">5</span>], mean)</span></code></pre></div>
<pre><code>$midterm
[1] 72.4

$final
[1] 84</code></pre>
<div class="sourceCode" id="cb1215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1215-1"><a href="ch-R-Data-Frame.html#cb1215-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">sapply</span>(students[<span class="dv">4</span><span class="op">:</span><span class="dv">5</span>], mean)</span></code></pre></div>
<pre><code>midterm   final 
   72.4    84.0 </code></pre>
<div class="sourceCode" id="cb1217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1217-1"><a href="ch-R-Data-Frame.html#cb1217-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">sapply</span>(students[<span class="dv">4</span><span class="op">:</span><span class="dv">5</span>], summary)</span></code></pre></div>
<pre><code>        midterm final
Min.       50.0    77
1st Qu.    67.0    78
Median     74.0    86
Mean       72.4    84
3rd Qu.    82.0    88
Max.       89.0    91</code></pre>
</div>
<div id="행렬-함수-적용하기" class="section level4 unnumbered">
<h4>행렬 함수 적용하기</h4>
<p>데이터 프레임은 행렬과 동일한 형식을 가지고 있기 때문에 행렬에서 사용했던 다양한 함수가 데이터 프레임에도 작동하는 경우가 많다.
다음은 행과 열의 길이를 알아내는 nrow()과 ncol() 함수, 그리고 행과 열을 전치시키는 t() 함수를 데이터 프레임에 적용한 예이다.</p>
<div class="sourceCode" id="cb1219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1219-1"><a href="ch-R-Data-Frame.html#cb1219-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">nrow</span>(students)</span></code></pre></div>
<pre><code>[1] 5</code></pre>
<div class="sourceCode" id="cb1221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1221-1"><a href="ch-R-Data-Frame.html#cb1221-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">ncol</span>(students)</span></code></pre></div>
<pre><code>[1] 7</code></pre>
<div class="sourceCode" id="cb1223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1223-1"><a href="ch-R-Data-Frame.html#cb1223-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">t</span>(students)</span></code></pre></div>
<pre><code>        [,1]     [,2]     [,3]     [,4]     [,5]    
name    &quot;김철수&quot; &quot;김영희&quot; &quot;이철수&quot; &quot;이영희&quot; &quot;홍길동&quot;
grade   &quot;1&quot;      &quot;4&quot;      &quot;3&quot;      &quot;2&quot;      &quot;1&quot;     
gender  &quot; M&quot;     &quot;F&quot;      &quot;M&quot;      &quot;F&quot;      &quot;M&quot;     
midterm &quot;74&quot;     &quot;82&quot;     &quot;67&quot;     &quot;89&quot;     &quot;50&quot;    
final   &quot;91&quot;     &quot;77&quot;     &quot;88&quot;     &quot;78&quot;     &quot;86&quot;    
retake  &quot;TRUE&quot;   &quot;FALSE&quot;  &quot;FALSE&quot;  &quot;TRUE&quot;   &quot;FALSE&quot; 
hw      &quot; 8&quot;     &quot; 9&quot;     &quot; 7&quot;     &quot; 8&quot;     &quot;10&quot;    </code></pre>
<p>행과 열이 전치된 데이터 프레임을 살펴보면 모든 열이 문자열 벡터로 변경되었음을 볼 수 있다. 데이터 프레임의 각 열은 모두 동일한 타입이어야 한다. 전치된 열은 논리값, 숫자, 문자가 모두 포함되어 있다. 따라서 이를 모두 수용할 수 있는 문자 행렬로 변환되었음을 볼 수 있다.</p>
</div>
<div id="apply로-행이나-열에-함수-적용하기" class="section level4 unnumbered">
<h4>apply()로 행이나 열에 함수 적용하기</h4>
<p>데이터 프레임에도 apply() 함수를 적용할 수 있다. 그러나 여기서 주의할 점은 R은 apply() 함수를 적용하기 앞서 데이터 프레임을 행렬로 변환시킨다. 따라서 앞의 t() 함수의 적용 결과처럼 요소 중에 하나라도 문자가 있으면 모든 요소를 수용할 수 있는 문자 행렬로 변환하게 된다.</p>
<div class="sourceCode" id="cb1225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1225-1"><a href="ch-R-Data-Frame.html#cb1225-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">apply</span>(students, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>   name   grade  gender midterm   final  retake      hw 
     NA      NA      NA      NA      NA      NA      NA </code></pre>
<div class="sourceCode" id="cb1227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1227-1"><a href="ch-R-Data-Frame.html#cb1227-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">apply</span>(students[<span class="dv">4</span><span class="op">:</span><span class="dv">5</span>], <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>midterm   final 
   72.4    84.0 </code></pre>
<div class="sourceCode" id="cb1229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1229-1"><a href="ch-R-Data-Frame.html#cb1229-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">apply</span>(students[<span class="dv">4</span><span class="op">:</span><span class="dv">5</span>], <span class="dv">1</span>, sum)</span></code></pre></div>
<pre><code>[1] 165 159 155 167 136</code></pre>
<p>첫번째 예에서는 students에 문자 열이 있어 모두 문자 행렬로 변환된다. 그러므로 mean이 적용될 수 없어서 경고와 함께 모두 NA의 값이 출력되었다.
그러나 중간과 기말고사 점수가 있는 부분만으로 부분 데이터 프레임을 만들어 apply()을 적용하면 모두 숫자이므로 숫자 행렬로 변환되어 결과가 잘 수행되었음을 알 수 있다.
따라서 열별로 함수를 적용할 때에는 행렬로 변환이 필요한 apply()보다는 lapply()나 sapply()를 바로 적용하는 것이 더 좋다.</p>
</div>
<div id="긴-데이터-프레임의-앞-또는-뒷-부분-출력하기" class="section level4 unnumbered">
<h4>긴 데이터 프레임의 앞 또는 뒷 부분 출력하기</h4>
<p>데이터 프레임에만 적용되는 것은 아니지만 head()와 tail() 함수를 이용하면 긴 데이터 프레임의 앞 부분과 뒤 부분만을 쉽게 참조할 수 있다.</p>
<div class="sourceCode" id="cb1231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1231-1"><a href="ch-R-Data-Frame.html#cb1231-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">nrow</span>(iris)</span></code></pre></div>
<pre><code>[1] 150</code></pre>
<div class="sourceCode" id="cb1233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1233-1"><a href="ch-R-Data-Frame.html#cb1233-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(iris)</span></code></pre></div>
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb1235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1235-1"><a href="ch-R-Data-Frame.html#cb1235-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">tail</span>(iris)</span></code></pre></div>
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
145          6.7         3.3          5.7         2.5 virginica
146          6.7         3.0          5.2         2.3 virginica
147          6.3         2.5          5.0         1.9 virginica
148          6.5         3.0          5.2         2.0 virginica
149          6.2         3.4          5.4         2.3 virginica
150          5.9         3.0          5.1         1.8 virginica</code></pre>
<p>iris 데이터는 R에서 제공하는 데이터인데 150 개의 관측치로 되어 있으므로 이를 화면에 다 출력하면 화면이 많이 스크롤되어서 데이터를 파악하기 힘들다. 이런 경우 head()나 tail()을 사용하여 데이터의 앞 또는 뒷 부분을 파악한다. 이 두 함수는 데이터 프레임의 앞과 뒤의 6줄을 반환한다.
다음처럼 n 인수를 사용하여 출력할 행의 수를 직접 지정할 수도 있다.</p>
<div class="sourceCode" id="cb1237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1237-1"><a href="ch-R-Data-Frame.html#cb1237-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(iris, <span class="dt">n =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa</code></pre>
<div class="sourceCode" id="cb1239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1239-1"><a href="ch-R-Data-Frame.html#cb1239-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">tail</span>(iris, <span class="dt">n =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
149          6.2         3.4          5.4         2.3 virginica
150          5.9         3.0          5.1         1.8 virginica</code></pre>
</div>
</div>
<div id="파일에서-데이터-읽어오기" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> 파일에서 데이터 읽어오기</h2>
<p>규모가 큰 데이터는 R 콘솔에서 직접 입력하기보다는 파일에서 불러오는 경우가 많다. R에서는 주로 텍스트 파일이나 Excel의 데이터를 읽어오는 경우가 많다.</p>
<div id="텍스트-파일에서-데이터-읽어오기" class="section level3" number="6.6.1">
<h3><span class="header-section-number">6.6.1</span> 텍스트 파일에서 데이터 읽어오기</h3>
<p>텍스트에 있는 모든 데이터를 데이터 프레임에 저장하려는 경우 read.table() 함수를 이용하면 편리하다.</p>
<p>파일을 불러오기 전에 주의할 점은 파일의 이름만으로 파일을 읽어오고 싶으면 현재의 작업 디렉토리(폴더)에 파일이 있어야 한다는 것이다. 그렇지 않은 경우에는 파일의 절대 경로를 모두 써 주어야만 읽어올 수 있다.</p>
<div id="작업-디렉토리-설정" class="section level4 unnumbered">
<h4>작업 디렉토리 설정</h4>
<p>R 윈도우 버전에서 작업 디렉터리의 변경은 [파일]-[작업디렉토리변경] 메뉴를 이용하면 된다. RStudio에서는 [Session]-[Set Working Directory]-[Choose Directory] 메뉴를 이용하면 된다. 현재의 작업 디렉터리가 어디인지를 알기 위해서는 getwd() 명령을 이용하면 된다. 현재 작업 디렉터리의 파일을 보고 싶으면 list.files() 명령을 이용한다.</p>
<p>R 명령으로 작업 디렉터리를 변경하려면 setwd()를 이용한다. 다음은 getwd()로 현재 작업 디렉토리를 얻은 후 setwd()로 data라는 하위 디렉토리(폴더)로 작업 디렉토리를 변경하고, 그 안에 있는 파일 목록을 확인한 예이다. R에서는 UNIX나 LINUX의 디렉토리 계층 체계를 따라 하위 디렉토리 계층을 나타날 때 <code>\</code>가 아니라 <code>/</code>을 이용한다.</p>
<div class="sourceCode" id="cb1241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1241-1"><a href="ch-R-Data-Frame.html#cb1241-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>WD &lt;-<span class="st"> </span><span class="kw">getwd</span>()</span>
<span id="cb1241-2"><a href="ch-R-Data-Frame.html#cb1241-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">setwd</span>(<span class="kw">paste0</span>(WD, <span class="st">&quot;/data&quot;</span>))</span>
<span id="cb1241-3"><a href="ch-R-Data-Frame.html#cb1241-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">list.files</span>(<span class="dt">pattern =</span> <span class="st">&quot;.txt&quot;</span>)</span></code></pre></div>
<pre><code>[1] &quot;courses2.txt&quot;         &quot;scores_no_header.txt&quot; &quot;scores_rn.txt&quot;       
[4] &quot;scores.txt&quot;           &quot;students.txt&quot;        </code></pre>
</div>
<div id="머리-행이-있는-텍스트-데이터-파일-읽기" class="section level4 unnumbered">
<h4>머리 행이 있는 텍스트 데이터 파일 읽기</h4>
<p>다음처럼 파일에 있는 데이터가 첫 행은 각 항목의 이름이고 둘째 행부터 데이터가 있는 경우를 먼저 살펴보자.</p>
<pre><code>prov  scores
서울  25
대전  35
천안  42</code></pre>
<p>데이터 파일이 작업 디렉토리(폴더) 밑의 <code>data</code> 디렉토리(폴더)에 <code>scores.txt</code>로 저장되어 있다면 read.table() 함수를 이용하여 다음과 같이 header=TRUE 인수로 데이터 프레임으로 읽어올 수 있다. 읽어들일 파일이 작업 디렉토리에 있다면 <code>"data/scores.txt"</code>가 아니라 <code>"scores.txt"</code> 형태로 읽어들이면 된다.</p>
<div class="sourceCode" id="cb1244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1244-1"><a href="ch-R-Data-Frame.html#cb1244-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/scores.txt&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1244-2"><a href="ch-R-Data-Frame.html#cb1244-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores</span></code></pre></div>
<pre><code>  prov scores
1 서울     25
2 대전     35
3 천안     42</code></pre>
<div class="sourceCode" id="cb1246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1246-1"><a href="ch-R-Data-Frame.html#cb1246-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">attributes</span>(prov.scores)</span></code></pre></div>
<pre><code>$names
[1] &quot;prov&quot;   &quot;scores&quot;

$class
[1] &quot;data.frame&quot;

$row.names
[1] 1 2 3</code></pre>
<p>위 결과에서 보면 파일에서 데이터를 읽어와 데이터 프레임을 생성했고, 첫 행에 나와 있는 항목 이름을 데이터 프레임 각 열의 이름으로 하고 있다. 행의 이름으로는 1, 2, 3의 순서로 행 번호를 자동 부여했다. 각 행의 데이터는 공백 문자를 기준으로 구분을 하였다.</p>
<p>앞의 명령어에서 <code>fileEncoding</code> 인수는 텍스트 파일이 어떤 문자 인코딩으로 저장되어 있는지를 지정한 것이다. 윈도우즈를 제외한 대부분의 시스템에서는 UTF-8 형식으로 텍스트 파일을 저장하지만, 한글 윈도우는 CP949 (EUC-KR)로 텍스트를 인코딩 한다. 여러 시스템 간의 호환성을 위하여 이 책에서는 텍스트 데이터를 UTF-8으로 저장하고 읽어들이기로 한다. read.table() 함수 등은 시스템의 디폴트 인코딩을 사용하여 데이터를 읽어 온다. 한글 윈도우즈의 디폴트 인코딩은 CP949이므로 UTF-8으로 텍스트 데이터를 처리하기 위하여 <code>fileEncoding</code> 인수를 지정하였다.</p>
</div>
<div id="행-이름이-있는-텍스트-데이터-파일-읽기" class="section level4 unnumbered">
<h4>행 이름이 있는 텍스트 데이터 파일 읽기</h4>
<p>다음 예는 파일에 데이터의 행 번호 또는 이름이 부여되어 있는 경우이다. 이 같은 경우에는 첫 행에 행 번호를 나타내는 이름은 표시하지 않는다. 따라서 첫 행과 다른 행은 한 항목의 수에서 차이가 난다.</p>
<pre><code>    prov	scores
10	서울	25
20	대전	35
30	천안	42</code></pre>
<p>이와 같은 형식의 파일이 작업 디렉토리 밑의 <code>data</code> 디렉토리의 <code>scores_rn.txt</code>에 저장되어 있는 경우에도 같은 방식으로 데이터를 데이터 프레임으로 읽어온다. 다음에서 볼 수 있듯이 행 번호로 파일의 첫 번째 열의 값이 사용되었다. 그리고 read.table() 함수에서 header 인수를 사용하지 않았다. 항목이 하나 적은 것으로 첫 번째 행이 머리행인 것을 자동 인식하기 때문이다.</p>
<div class="sourceCode" id="cb1249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1249-1"><a href="ch-R-Data-Frame.html#cb1249-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/scores_rn.txt&quot;</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1249-2"><a href="ch-R-Data-Frame.html#cb1249-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores</span></code></pre></div>
<pre><code>   prov scores
10 서울     25
20 대전     35
30 천안     42</code></pre>
</div>
<div id="머리-행이-없는-텍스트-데이터-파일-읽기" class="section level4 unnumbered">
<h4>머리 행이 없는 텍스트 데이터 파일 읽기</h4>
<p>위의 결과에서 파일에 있는 행 번호가 데이터 프레임에 이용되었음을 볼 수 있다. read.table() 함수는 머리 행이 없는 텍스트 파일에서도 데이터를 읽어들일 수 있다. 다음과 같은 <code>scores_no_header.txt</code> 파일이 작업 디렉토리 밑의 <code>data</code> 디렉토리에 저장되어 있다고 하자.</p>
<pre><code>서울	25
대전	35
천안	42</code></pre>
<p>다음 명령문은 <code>scores_no_header.txt</code> 데이터 파일을 데이터 프레임으로 읽어들인 예이다. 열의 이름이 임의로 붙여졌음을 볼 수 있다.</p>
<div class="sourceCode" id="cb1252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1252-1"><a href="ch-R-Data-Frame.html#cb1252-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/scores_no_header.txt&quot;</span>, <span class="dt">header=</span><span class="ot">FALSE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1252-2"><a href="ch-R-Data-Frame.html#cb1252-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores</span></code></pre></div>
<pre><code>    V1 V2
1 서울 25
2 대전 35
3 천안 42</code></pre>
</div>
<div id="edit" class="section level4 unnumbered">
<h4>edit()</h4>
<p>데이터 프레임에서 데이터를 편집하고 싶으면 edit() 함수를 이용한다. 다음 명령을 수행하면 데이터 프레임이 스프레드시트 형태로 나타나 수정이 가능하다. 편집창에서 수정 후 편집창을 닫으면 변경한 내용이 반영되어 새로운 데이터 프레임 prov.scores.new가 생성된다.</p>
<div class="sourceCode" id="cb1254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1254-1"><a href="ch-R-Data-Frame.html#cb1254-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores.new &lt;-<span class="st"> </span><span class="kw">edit</span>(prov.scores)</span></code></pre></div>
</div>
</div>
<div id="excel-파일에서-데이터-읽어오기" class="section level3" number="6.6.2">
<h3><span class="header-section-number">6.6.2</span> Excel 파일에서 데이터 읽어오기</h3>
<div id="csv-파일" class="section level4 unnumbered">
<h4>CSV 파일</h4>
<p>많은 경우 데이터가 Excel로 저장되어 있다. Excel에서 데이터를 읽어오기 위해서는 먼저 Excel 파일을 CSV 형태의 파일로 작업 디렉토리에 저장하여야 한다.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> CSV 파일은 데이터의 각 필드가 쉼표로 분리되어 있는 파일이다. 대부분의 통계 패키지뿐 아니라 다수의 SW에서 지원하는 파일 형식이다. Excel의 버전에 따라 저장방식이 조금 차이가 있을 수 있으나, 대부분 ’다른 이름으로 저장’에서 파일 형식을 CSV 형식으로 지정해 주면 된다.</p>
</div>
<div id="read.csv" class="section level4 unnumbered">
<h4>read.csv()</h4>
<p>R에서 CSV 파일을 읽어오는 함수는 read.csv()이다. 다음은 각 국의 자살률에 대한 성별, 조사년도 데이터를 읽어온 예이다. 총 105개의 데이터인데 처음 몇 개의 데이터만 출력하여 보이고 있다.</p>
<div class="sourceCode" id="cb1255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1255-1"><a href="ch-R-Data-Frame.html#cb1255-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>sr &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file=</span><span class="st">&quot;data/suicide_rates.csv&quot;</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1255-2"><a href="ch-R-Data-Frame.html#cb1255-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">nrow</span>(sr)</span></code></pre></div>
<pre><code>[1] 105</code></pre>
<div class="sourceCode" id="cb1257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1257-1"><a href="ch-R-Data-Frame.html#cb1257-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(sr)</span></code></pre></div>
<pre><code>              Country Year Males Females
1             ALBANIA    3   4.7     3.3
2 ANTIGUA AND BARBUDA   95   0.0     0.0
3           ARGENTINA    8  12.6     3.0
4             ARMENIA    8   2.8     1.1
5           AUSTRALIA    6  12.8     3.6
6             AUSTRIA    9  23.8     7.1</code></pre>
<p>사실 read.csv() 함수는 read.table()의 wrapper 함수로서 header=TRUE, sep=‘,’ 인수로 read.table() 함수를 호출하기만 한다. 따라서 다음처럼 read.table() 함수를 이용해서도 CSV 파일을 읽어들일 수 있다. 이 때 주의할 점은 함수 호출 시 header=TRUE, sep=‘,’ 인수를 지정해야 한다는 것이다.</p>
<div class="sourceCode" id="cb1259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1259-1"><a href="ch-R-Data-Frame.html#cb1259-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>sr2 &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="dt">file=</span><span class="st">&quot;data/suicide_rates.csv&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1259-2"><a href="ch-R-Data-Frame.html#cb1259-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">nrow</span>(sr2)</span></code></pre></div>
<pre><code>[1] 105</code></pre>
<div class="sourceCode" id="cb1261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1261-1"><a href="ch-R-Data-Frame.html#cb1261-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">head</span>(sr2)</span></code></pre></div>
<pre><code>              Country Year Males Females
1             ALBANIA    3   4.7     3.3
2 ANTIGUA AND BARBUDA   95   0.0     0.0
3           ARGENTINA    8  12.6     3.0
4             ARMENIA    8   2.8     1.1
5           AUSTRALIA    6  12.8     3.6
6             AUSTRIA    9  23.8     7.1</code></pre>
</div>
<div id="read.csv와-관련된-흔한-실수" class="section level4 unnumbered">
<h4>read.csv()와 관련된 흔한 실수</h4>
<p>read.csv() 함수를 이용할 때 초보자가 가장 자주 하는 실수가 일반 텍스트 파일인데 read.csv() 함수로 데이터를 읽어들이는 것이다. 다음은 공백으로 필드가 구분된 scores.txt 파일을 read.table()과 read.csv() 함수로 각각 읽어들인 결과이다.</p>
<div class="sourceCode" id="cb1263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1263-1"><a href="ch-R-Data-Frame.html#cb1263-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/scores.txt&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1263-2"><a href="ch-R-Data-Frame.html#cb1263-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores</span></code></pre></div>
<pre><code>  prov scores
1 서울     25
2 대전     35
3 천안     42</code></pre>
<div class="sourceCode" id="cb1265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1265-1"><a href="ch-R-Data-Frame.html#cb1265-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores.csv &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/scores.txt&quot;</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1265-2"><a href="ch-R-Data-Frame.html#cb1265-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>prov.scores.csv</span></code></pre></div>
<pre><code>  prov..scores
1     서울  25
2     대전  35
3     천안  42</code></pre>
<p>출력해 보면 두 결과가 유사해 보인다. 그러나 읽어들여진 데이터로 작업을 해보면 read.csv() 파일로 읽어들인 데이터로는 제대로 된 작업이 수행되지 않음을 알 수 있다. 먼저 두 데이터에서 scores 열에 대한 평균을 내 보자.</p>
<div class="sourceCode" id="cb1267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1267-1"><a href="ch-R-Data-Frame.html#cb1267-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(prov.scores<span class="op">$</span>scores)</span></code></pre></div>
<pre><code>[1] 34</code></pre>
<div class="sourceCode" id="cb1269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1269-1"><a href="ch-R-Data-Frame.html#cb1269-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">mean</span>(prov.scores.csv<span class="op">$</span>scores)</span></code></pre></div>
<pre><code>Warning in mean.default(prov.scores.csv$scores): argument is not numeric or
logical: returning NA</code></pre>
<pre><code>[1] NA</code></pre>
<p>결과에서 보듯이 read.table()로 읽어들인 데이터 프레임에서는 원하는 결과를 얻을 수 있지만 read.csv()로 읽어들인 데이터 프레임에서는 그렇지 않았다. 그 이유는 read.csv()는 데이터 열이 쉼표로 분리된 것으로 가정하므로 한 줄의 데이터를 읽어들인 후 쉼표를 발견할 수 없어서 모두 하나의 열로 처리를 했기 때문이다. 하나가 된 데이터에는 문자와 숫자가 모두 포함되어 있으므로 이를 모두 처리할 수 있는 문자 벡터로 데이터를 저장하게 된다. 따라서 숫자 데이터 처리 함수인 mean()을 적용할 때 오류가 난 것이다. 이는 두 데이터 프레임의 열의 개수와 이름 등을 확인해 보면 쉽게 확인할 수 있다.</p>
<div class="sourceCode" id="cb1272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1272-1"><a href="ch-R-Data-Frame.html#cb1272-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">ncol</span>(prov.scores)</span></code></pre></div>
<pre><code>[1] 2</code></pre>
<div class="sourceCode" id="cb1274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1274-1"><a href="ch-R-Data-Frame.html#cb1274-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(prov.scores)</span></code></pre></div>
<pre><code>[1] &quot;prov&quot;   &quot;scores&quot;</code></pre>
<div class="sourceCode" id="cb1276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1276-1"><a href="ch-R-Data-Frame.html#cb1276-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">ncol</span>(prov.scores.csv)</span></code></pre></div>
<pre><code>[1] 1</code></pre>
<div class="sourceCode" id="cb1278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1278-1"><a href="ch-R-Data-Frame.html#cb1278-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">names</span>(prov.scores.csv)</span></code></pre></div>
<pre><code>[1] &quot;prov..scores&quot;</code></pre>
</div>
</div>
</div>
<div id="파일에-데이터-프레임-쓰기" class="section level2" number="6.7">
<h2><span class="header-section-number">6.7</span> 파일에 데이터 프레임 쓰기</h2>
<div id="write.table과-write.csv" class="section level4 unnumbered">
<h4>write.table()과 write.csv()</h4>
<p>데이터 프레임의 작업 결과를 추후에 다시 이용하기 위해서, 또는 다른 통계 패키지에서 작업 결과를 이용하기 위해서는 데이터 프레임을 파일로 저장할 수 있어야 한다. 이 경우 <code>write.table()</code>과 <code>write.csv()</code> 함수를 이용하면 데이터 프레임을 파일에 저장할 수 있다.</p>
<p>다음 예에서는 이 장에서 만든 students 데이터 프레임을 세 가지 형식으로 작업 디렉토리 밑의 <code>data</code> 디렉토리의 파일에 저장하고 있다.</p>
<div class="sourceCode" id="cb1280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1280-1"><a href="ch-R-Data-Frame.html#cb1280-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">write.table</span>(students, <span class="st">&quot;data/students.txt&quot;</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1280-2"><a href="ch-R-Data-Frame.html#cb1280-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">write.csv</span>(students, <span class="st">&quot;data/students.csv&quot;</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1280-3"><a href="ch-R-Data-Frame.html#cb1280-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">write.csv</span>(students, <span class="st">&quot;data/students_rn.csv&quot;</span>, <span class="dt">row.names=</span><span class="ot">TRUE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<p>첫 번째 <code>write.table()</code>은 공백문자로 데이터 표레임의 열을 분리하여 일반 텍스트 파일로 저장한 예이다. 다음은 저장된 students.txt 파일의 모습이다. 결과에서 볼 수 있듯이 데이터 프레임의 열 이름이 머리 행으로 저장되고 데이터들이 공백문자로 구분되어 저장되었다. 숫자 데이터는 그대로, 문자 데이터는 따옴표로 둘러싸여서 저장되어 있다.</p>
<pre><code>&quot;name&quot; &quot;grade&quot; &quot;gender&quot; &quot;midterm&quot; &quot;final&quot; &quot;retake&quot; &quot;hw&quot;
&quot;김철수&quot; 1 &quot; M&quot; 74 91 TRUE 8
&quot;김영희&quot; 4 &quot;F&quot; 82 77 FALSE 9
&quot;이철수&quot; 3 &quot;M&quot; 67 88 FALSE 7
&quot;이영희&quot; 2 &quot;F&quot; 89 78 TRUE 8
&quot;홍길동&quot; 1 &quot;M&quot; 50 86 FALSE 10</code></pre>
<p>두 번째 명령문은 <code>write.csv()</code> 함수를 사용하여 데이터 프레임을 CSV 파일 형식으로 저장한 예이다. 다음은 저장된 students.csv 파일의 모습이다. 결과에서 볼 수 있듯이 쉼표로 각 데이터가 분리되어 있다.다음 결과에서 볼 수 있듯이 쉼표로 각 데이터가 분리되어 있다. Excel에서 파일을 읽으면 데이터를 Excel의 각 셀로 잘 읽어 들일 수 있다.</p>
<pre><code>&quot;name&quot;,&quot;grade&quot;,&quot;gender&quot;,&quot;midterm&quot;,&quot;final&quot;,&quot;retake&quot;,&quot;hw&quot;
&quot;김철수&quot;,1,&quot; M&quot;,74,91,TRUE,8
&quot;김영희&quot;,4,&quot;F&quot;,82,77,FALSE,9
&quot;이철수&quot;,3,&quot;M&quot;,67,88,FALSE,7
&quot;이영희&quot;,2,&quot;F&quot;,89,78,TRUE,8
&quot;홍길동&quot;,1,&quot;M&quot;,50,86,FALSE,10</code></pre>
<p>세 번째 명령문은 <code>write.csv()</code>을 사용하여 CSV 파일로 데이터를 저장한 것은 두 번째 명령문과 같은데 다만 행 번호를 같이 저장한 예이다. 다음은 저장된 students_rn.csv 파일의 모습니다. 결과에서 첫 번째 열에 행 번호가 저장되어 있음을 볼 수 있다.</p>
<pre><code>&quot;&quot;,&quot;name&quot;,&quot;grade&quot;,&quot;gender&quot;,&quot;midterm&quot;,&quot;final&quot;,&quot;retake&quot;,&quot;hw&quot;
&quot;1&quot;,&quot;김철수&quot;,1,&quot; M&quot;,74,91,TRUE,8
&quot;2&quot;,&quot;김영희&quot;,4,&quot;F&quot;,82,77,FALSE,9
&quot;3&quot;,&quot;이철수&quot;,3,&quot;M&quot;,67,88,FALSE,7
&quot;4&quot;,&quot;이영희&quot;,2,&quot;F&quot;,89,78,TRUE,8
&quot;5&quot;,&quot;홍길동&quot;,1,&quot;M&quot;,50,86,FALSE,10</code></pre>
<p>다음 예에서 <code>write.table()</code> 또는 <code>write.csv()</code> 파일로 저장한 데이터를 다시 데이터 프레임으로 잘 복원할 수 있음을 확인할 수 있다. 이 때로 파일의 형식이 공백으로 분리된 파일인지 CSV 파일인지에 따라 <code>read.table()</code>과 <code>read.csv()</code>를 적절히 선택하여야 한다.</p>
<div class="sourceCode" id="cb1284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1284-1"><a href="ch-R-Data-Frame.html#cb1284-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/students.txt&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
1 김철수     1      M      74    91   TRUE  8
2 김영희     4      F      82    77  FALSE  9
3 이철수     3      M      67    88  FALSE  7
4 이영희     2      F      89    78   TRUE  8
5 홍길동     1      M      50    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1286-1"><a href="ch-R-Data-Frame.html#cb1286-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;data/students.csv&quot;</span>, <span class="dt">header=</span><span class="ot">TRUE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
<pre><code>    name grade gender midterm final retake hw
1 김철수     1      M      74    91   TRUE  8
2 김영희     4      F      82    77  FALSE  9
3 이철수     3      M      67    88  FALSE  7
4 이영희     2      F      89    78   TRUE  8
5 홍길동     1      M      50    86  FALSE 10</code></pre>
<p>사실 <code>write.csv()</code> 함수는 <code>write.table()</code>에서 sep 인수에 <code>','</code>를 부여한 결과와 같다. 따라서 두 번째와 세 번째 명령문은 다음처럼 하여도 같은 결과를 얻을 수 있다.</p>
<div class="sourceCode" id="cb1288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1288-1"><a href="ch-R-Data-Frame.html#cb1288-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">write.table</span>(students, <span class="st">&quot;data/students.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span>
<span id="cb1288-2"><a href="ch-R-Data-Frame.html#cb1288-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">write.table</span>(students, <span class="st">&quot;data/students_rn.csv&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;,&quot;</span>, <span class="dt">row.names=</span><span class="ot">TRUE</span>, <span class="dt">fileEncoding=</span><span class="st">&quot;UTF-8&quot;</span>)</span></code></pre></div>
</div>
<div id="바이너리-형식으로-데이터-객체-저장-및-복원" class="section level4 unnumbered">
<h4>바이너리 형식으로 데이터 객체 저장 및 복원</h4>
<p>데이터 프레임뿐 아니라 R의 모든 객체들을 saveRDS()와 readRDS(), 또는 save()와 load() 함수를 이용하여 바이너리 형식으로 저장하고 복원할 수 있다. 이 경우 메모리에 적재되는 형태대로 파일에 저장되었다가 복원되므로 별도의 처리 과정이 불필요해진다. 그러므로 대용량의 데이터를 R 플랫폼 내에서 저장하거나 복원할 때 매우 유용하다. 관련된 내용은 saveRDS()/readRDS()와 save()/load() 함수의 도움말을 참조하기 바란다.</p>
</div>
</div>
<div id="데이터-프레임의-열을-변수처럼-이용하는-방법" class="section level2" number="6.8">
<h2><span class="header-section-number">6.8</span> 데이터 프레임의 열을 변수처럼 이용하는 방법</h2>
<div id="변수-검색-경로" class="section level4 unnumbered">
<h4>변수 검색 경로</h4>
<p><code>$</code> 기호를 이용하는 방법보다 좀 더 간편하게 데이터 프레임의 열에 접근할 수 있는 방법이 있다. attach() 함수를 이용하면 데이터 프레임의 각 열을 변수로 등록할 수 있다. attach() 함수가 실행되면 해당 데이터 프레임의 각 열을 변수로 검색 경로(search path)에 등록한다. 검색 경로란 R이 어떤 변수를 참조할 때 변수에 대한 정보를 검색하는 경로를 의미한다. 현재의 검색 경로를 파악하기 위해서는 search() 함수를 이용하면 된다.</p>
<div class="sourceCode" id="cb1289"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1289-1"><a href="ch-R-Data-Frame.html#cb1289-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">search</span>()</span></code></pre></div>
<pre><code>[1] &quot;.GlobalEnv&quot;        &quot;package:stats&quot;     &quot;package:graphics&quot; 
[4] &quot;package:grDevices&quot; &quot;package:utils&quot;     &quot;package:datasets&quot; 
[7] &quot;package:methods&quot;   &quot;Autoloads&quot;         &quot;package:base&quot;     </code></pre>
<p>위의 결과에서 알 수 있듯이 R이 기동되면 현재의 작업공간을 .GlobalEnv라는 이름으로 첫 번째 검색 경로로 등록한다. 현재의 작업 공간에서 만든 변수들은 여기서 찾을 수 있다. 그리고 package:를 접두사로 하여 패키지별 변수의 데이터베이스가 검색 경로에 등록된다. R은 검색 경로에 나와 있는 순서대로 변수들의 정보를 찾는다.</p>
</div>
<div id="attach로-데이터-프레임을-검색-경로에-등록하기" class="section level4 unnumbered">
<h4>attach()로 데이터 프레임을 검색 경로에 등록하기</h4>
<p>본격적으로 attach() 함수의 작동을 보기 전에 students 데이터 프레임을 제외하고 다른 데이터 객체를 .GlobalEnv에서 삭제하도록 하겠다. .GlobalEnv 작업공간에 있는 변수를 보기 위해서는 ls() 또는 objects() 함수를 사용한다. rm() 함수를 이용하면 작업공간의 변수를 삭제할 수 있다. 이들 함수의 자세한 사용방법은 도움말을 참조한다.</p>
<div class="sourceCode" id="cb1291"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1291-1"><a href="ch-R-Data-Frame.html#cb1291-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>obj &lt;-<span class="st"> </span><span class="kw">ls</span>()</span>
<span id="cb1291-2"><a href="ch-R-Data-Frame.html#cb1291-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">rm</span>(<span class="dt">list=</span>obj[<span class="kw">which</span>(obj <span class="op">!=</span><span class="st"> &quot;students&quot;</span>)])</span>
<span id="cb1291-3"><a href="ch-R-Data-Frame.html#cb1291-3" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">ls</span>()</span></code></pre></div>
<pre><code>[1] &quot;obj&quot;      &quot;students&quot;</code></pre>
<div class="sourceCode" id="cb1293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1293-1"><a href="ch-R-Data-Frame.html#cb1293-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">rm</span>(obj)</span>
<span id="cb1293-2"><a href="ch-R-Data-Frame.html#cb1293-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">objects</span>()</span></code></pre></div>
<pre><code>[1] &quot;students&quot;</code></pre>
<p>아래는 attach() 함수를 이용하여 students 데이터 프레임을 검색 경로에 등록한 예이다. 아래 예에서 보듯이 students를 검색 경로에 등록하기 전에는 retake 변수가 검색 경로에 없으므로 찾을 수 없다고 나온다. 그러나 students 데이터 프레임을 검색 경로에 등록하면 데이터 프레임의 열인 retake를 변수처럼 이용할 수 있음을 알 수 있다.</p>
<div class="sourceCode" id="cb1295"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1295-1"><a href="ch-R-Data-Frame.html#cb1295-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>retake</span></code></pre></div>
<pre><code>Error in eval(expr, envir, enclos): object &#39;retake&#39; not found</code></pre>
<div class="sourceCode" id="cb1297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1297-1"><a href="ch-R-Data-Frame.html#cb1297-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">attach</span>(students)</span>
<span id="cb1297-2"><a href="ch-R-Data-Frame.html#cb1297-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>retake</span></code></pre></div>
<pre><code>[1]  TRUE FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb1299"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1299-1"><a href="ch-R-Data-Frame.html#cb1299-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">search</span>()</span></code></pre></div>
<pre><code> [1] &quot;.GlobalEnv&quot;        &quot;students&quot;          &quot;package:stats&quot;    
 [4] &quot;package:graphics&quot;  &quot;package:grDevices&quot; &quot;package:utils&quot;    
 [7] &quot;package:datasets&quot;  &quot;package:methods&quot;   &quot;Autoloads&quot;        
[10] &quot;package:base&quot;     </code></pre>
</div>
<div id="attach로-등록된-변수는-데이터-프레임과-독립적인-복사본이다." class="section level4 unnumbered">
<h4>attach()로 등록된 변수는 데이터 프레임과 독립적인 복사본이다.</h4>
<p>여기서 주의할 점은 attach 된 변수가 변경되더라도 원래 데이터 프레임의 데이터가 변경되지는 않는다는 것이다. attach를 통해 등록된 변수는 데이터 프레임의 데이터가 복사되어 생성되지만 데이터 프레임과는 무관한 별도의 변수처럼 작동한다.</p>
<div class="sourceCode" id="cb1301"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1301-1"><a href="ch-R-Data-Frame.html#cb1301-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>retake[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb1301-2"><a href="ch-R-Data-Frame.html#cb1301-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>retake</span></code></pre></div>
<pre><code>[1]    NA FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb1303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1303-1"><a href="ch-R-Data-Frame.html#cb1303-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>retake</span></code></pre></div>
<pre><code>[1]  TRUE FALSE FALSE  TRUE FALSE</code></pre>
<p>데이터 프레임의 데이터를 변경하려면 <code>$</code> 기호를 써서 직접 변경하여야 한다. 마찬가지로 원래 데이터 프레임의 데이터가 변경되어도 검색 경로에 추가된 retake 변수의 데이터는 변경되지 않음을 알 수 있다.</p>
<div class="sourceCode" id="cb1305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1305-1"><a href="ch-R-Data-Frame.html#cb1305-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>retake[<span class="dv">5</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb1305-2"><a href="ch-R-Data-Frame.html#cb1305-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>students<span class="op">$</span>retake</span></code></pre></div>
<pre><code>[1]  TRUE FALSE FALSE  TRUE    NA</code></pre>
<div class="sourceCode" id="cb1307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1307-1"><a href="ch-R-Data-Frame.html#cb1307-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span>retake</span></code></pre></div>
<pre><code>[1]    NA FALSE FALSE  TRUE FALSE</code></pre>
</div>
<div id="detach" class="section level4 unnumbered">
<h4>detach()</h4>
<p>데이터 프레임을 검색 경로에서 제거하려면 detach() 함수를 이용한다.</p>
<div class="sourceCode" id="cb1309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1309-1"><a href="ch-R-Data-Frame.html#cb1309-1" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">detach</span>(students)</span>
<span id="cb1309-2"><a href="ch-R-Data-Frame.html#cb1309-2" aria-hidden="true"></a><span class="op">&gt;</span><span class="st"> </span><span class="kw">search</span>()</span></code></pre></div>
<pre><code>[1] &quot;.GlobalEnv&quot;        &quot;package:stats&quot;     &quot;package:graphics&quot; 
[4] &quot;package:grDevices&quot; &quot;package:utils&quot;     &quot;package:datasets&quot; 
[7] &quot;package:methods&quot;   &quot;Autoloads&quot;         &quot;package:base&quot;     </code></pre>
</div>
<div id="attach로-등록된-변수의-검색-경로-상의-위치" class="section level4 unnumbered">
<h4>attach()로 등록된 변수의 검색 경로 상의 위치</h4>
<p>R에서 검색 경로의 첫 번째 위치는 항상 현재의 작업공간이 차지한다. attach()에 의해 추가되는 변수들은 항상 검색 경로 상에서 두번째나 그 뒤의 위치에 놓인다. 디폴트로 attach()에 의해 추가되는 변수는 검색 경로 상에서 두번째 위치에 놓이게 되므로 현재의 작업공간을 제외하고는 검색 우선순위가 가장 높게 설정된다. 이를 바꾸고 싶으면 attach() 함수의 position 인수를 이용하면 된다. (자세한 내용은 attach()의 도움말을 참조한다.)</p>
<p>일반적으로 데이터 프레임을 이용할 때 다음이 좋은 절차라 알려져 있다.</p>
<p>첫째, 어떤 문제와 관련된 모든 변수를 데이터 프레임에 포함시키고 적절한 이름을 부여한다.</p>
<p>둘째, 분석하는 문제와 관련된 데이터 프레임을 attach()하여 검색 경로 위치 두 번째에 추가한다. 검색경로의 첫 번째 위치에 작업공간이 있어서 분석 운영을 위한 수치와 임시적인 변수들이 놓인다.</p>
<p>셋째, 분석하는 문제를 떠나기 전에 다음에 사용하고자 하는 변수는 <code>$</code>를 이용하여 데이터 프레임에 저장한다. 그리고 detach() 한다.</p>
<p>넷째, 작업공간의 모든 필요 없는 변수를 삭제한다.</p>
<p>그러나 저자의 경우 attach()와 detach()를 잘 이용하지 않는다. 왜냐하면 이러한 방식은 프로그램이 복잡하거나 동시에 다루어야 할 데이터 프레임이 여러 개인 경우 변수 이름의 충돌이 일어나기 쉽다. 그래서 자신이 원하는 곳의 변수가 아니라 다른 위치의 동일한 이름의 변수를 참조하거나 변경하는 오류가 발생하기 쉽다. 또한 RStudio 같은 IDE를 사용하면 편집기 상에서 데이터 프레임의 이름 등을 자동 완성시킬 수 있으므로 긴 이름을 입력하는 것이 그리 수고스럽지 않기 때문이다. 이 두 가지 방법 중 어떠한 스타일을 택할 것인지는 개인의 선호에 달려 있다. 이 책에서는 특별한 경우가 아니면 attach() 등을 사용하지 않을 것이다.</p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p>참고로 이름이 비슷한 함수로 car 패키지의 subsets()라는 함수가 있다. 이 함수는 변수의 부분집합으로 회귀분석한 후, 그 결과를 그래프로 그리는 함수이다.<a href="ch-R-Data-Frame.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>Excel 파일 형식으로 바로 데이터를 읽어들이기 위해서는 readxl 패키지의 read_excel() 함수를 이용하면 된다. 관심있는 독자는 웹 검색을 해 보면 관련 자료를 쉽게 찾을 수 있을 것이다.<a href="ch-R-Data-Frame.html#fnref5" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ch-R-List.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ch-dataTransformation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R-programming-2nd.pdf", "R-programming-2nd.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
