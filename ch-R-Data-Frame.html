<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 6 R 데이터 프레임 | R 프로그래밍 (개정판)</title>
<meta name="author" content="Kilhwan Kim">
<meta name="description" content="이 장에서는 여러 타입의 데이터가 혼재된 데이터 프레임이란 데이터 구조를 다룬다. 보통 다른 통계 소프트웨어에서 데이터 분석의 기본 단위인 데이터 집합 또는 데이터 행렬이라고 불리는 것이다. 데이터 프레임의 두 측면: 리스트적 측면 행렬적 측면 데이터 프레임은 행렬을 일반화한 것으로 생각하면 이해하기 쉽다. 행렬에 속한 데이터는 모두 같은 타입인데...">
<meta name="generator" content="bookdown 0.33 with bs4_book()">
<meta property="og:title" content="Chapter 6 R 데이터 프레임 | R 프로그래밍 (개정판)">
<meta property="og:type" content="book">
<meta property="og:description" content="이 장에서는 여러 타입의 데이터가 혼재된 데이터 프레임이란 데이터 구조를 다룬다. 보통 다른 통계 소프트웨어에서 데이터 분석의 기본 단위인 데이터 집합 또는 데이터 행렬이라고 불리는 것이다. 데이터 프레임의 두 측면: 리스트적 측면 행렬적 측면 데이터 프레임은 행렬을 일반화한 것으로 생각하면 이해하기 쉽다. 행렬에 속한 데이터는 모두 같은 타입인데...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 6 R 데이터 프레임 | R 프로그래밍 (개정판)">
<meta name="twitter:description" content="이 장에서는 여러 타입의 데이터가 혼재된 데이터 프레임이란 데이터 구조를 다룬다. 보통 다른 통계 소프트웨어에서 데이터 분석의 기본 단위인 데이터 집합 또는 데이터 행렬이라고 불리는 것이다. 데이터 프레임의 두 측면: 리스트적 측면 행렬적 측면 데이터 프레임은 행렬을 일반화한 것으로 생각하면 이해하기 쉽다. 행렬에 속한 데이터는 모두 같은 타입인데...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-176754989-1"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-176754989-1');
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R 프로그래밍 (개정판)</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Preface</a></li>
<li><a class="" href="ch-intro.html"><span class="header-section-number">1</span> R 설치 및 시작</a></li>
<li><a class="" href="ch-R-Data-Basic.html"><span class="header-section-number">2</span> R 데이터 기초</a></li>
<li><a class="" href="ch-R-Vectors.html"><span class="header-section-number">3</span> R 벡터</a></li>
<li><a class="" href="ch-R-Matrix.html"><span class="header-section-number">4</span> R 행렬</a></li>
<li><a class="" href="ch-R-List.html"><span class="header-section-number">5</span> R 리스트</a></li>
<li><a class="active" href="ch-R-Data-Frame.html"><span class="header-section-number">6</span> R 데이터 프레임</a></li>
<li><a class="" href="ch-dataTransformation.html"><span class="header-section-number">7</span> dplyr을 이용한 데이터 변환</a></li>
<li><a class="" href="ch-visualization.html"><span class="header-section-number">8</span> ggplot2를 이용한 데이터 시각화</a></li>
<li><a class="" href="ch-R-Advanced-Data-Mgmt.html"><span class="header-section-number">9</span> R 고급 데이터 변환</a></li>
<li><a class="" href="ch-R-Programming-Structure.html"><span class="header-section-number">10</span> R 프로그래밍 구조</a></li>
<li><a class="" href="ch-R-OOP.html"><span class="header-section-number">11</span> R 객체 지향 프로그래밍</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="ch-RandPython.html"><span class="header-section-number">A</span> R과 Python 연동하기</a></li>
<li><a class="" href="ch-RTips.html"><span class="header-section-number">B</span> R 관련 여러 주제들</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="ch-R-Data-Frame" class="section level1" number="6">
<h1>
<span class="header-section-number">6</span> R 데이터 프레임<a class="anchor" aria-label="anchor" href="#ch-R-Data-Frame"><i class="fas fa-link"></i></a>
</h1>
<p>이 장에서는 여러 타입의 데이터가 혼재된 데이터 프레임이란 데이터 구조를 다룬다. 보통 다른 통계 소프트웨어에서 데이터 분석의 기본 단위인 데이터 집합 또는 데이터 행렬이라고 불리는 것이다.</p>
<div id="데이터-프레임의-두-측면-리스트적-측면-행렬적-측면" class="section level4 unnumbered">
<h4>데이터 프레임의 두 측면: 리스트적 측면 행렬적 측면<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%98-%EB%91%90-%EC%B8%A1%EB%A9%B4-%EB%A6%AC%EC%8A%A4%ED%8A%B8%EC%A0%81-%EC%B8%A1%EB%A9%B4-%ED%96%89%EB%A0%AC%EC%A0%81-%EC%B8%A1%EB%A9%B4"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임은 행렬을 일반화한 것으로 생각하면 이해하기 쉽다. 행렬에 속한 데이터는 모두 같은 타입인데 반해, 데이터 프레임은 각 열마다 각기 다른 타입의 데이터를 가질 수 있다. 데이터 프레임에는 한 열은 숫자 타입의 데이터가, 다른 한 열은 문자 타입의 데이터가 각각 들어갈 수 있다.</p>
<p>한 강의를 듣는 학생에 대한 표 <a href="ch-R-Data-Frame.html#tab:class-scores">6.1</a> 같은 데이터가 있다고 하자. 이 데이터에는 중간고사, 기말고사 같이 숫자 데이터도 있지만, 학생 이름과 성별처럼 문자 데이터도 있다. 그리고 재수강 여부처럼 논리 값 데이터도 있다. 데이터의 형태는 다르지만 한 학생에 대한 정보를 얻기 위해서는 숫자, 문자, 논리 값을 포함한 데이터를 다룰 수 있어야 한다. 이 경우에 사용할 수 있는 데이터 구조가 데이터 프레임이다.</p>
<p>본질적으로 데이터 프레임은 ‘data.frame’ 클래스인 리스트이다. 리스트가 특정 조건을 만족하면 데이터 프레임이 될 수 있다. 리스트와 데이터 프레임의 관계에 대한 자세한 내용은 <a href="ch-R-List.html#ch-R-List">5</a> 장을 참조하라.</p>
<div class="inline-table"><table class="table table-sm">
<caption>
<span id="tab:class-scores">Table 6.1: </span>한 과목의 수강생 데이터</caption>
<thead><tr class="header">
<th align="left">번호</th>
<th align="left">이름</th>
<th align="left">학년</th>
<th align="left">성별</th>
<th align="left">중간고사</th>
<th align="left">기말고사</th>
<th align="left">재수강</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1</td>
<td align="left">김철수</td>
<td align="left">1</td>
<td align="left">남</td>
<td align="left">74</td>
<td align="left">91</td>
<td align="left">T</td>
</tr>
<tr class="even">
<td align="left">2</td>
<td align="left">김영희</td>
<td align="left">4</td>
<td align="left">여</td>
<td align="left">82</td>
<td align="left">77</td>
<td align="left">F</td>
</tr>
<tr class="odd">
<td align="left">3</td>
<td align="left">이철수</td>
<td align="left">3</td>
<td align="left">남</td>
<td align="left">67</td>
<td align="left">88</td>
<td align="left">F</td>
</tr>
<tr class="even">
<td align="left">4</td>
<td align="left">이영희</td>
<td align="left">2</td>
<td align="left">여</td>
<td align="left">89</td>
<td align="left">78</td>
<td align="left">T</td>
</tr>
<tr class="odd">
<td align="left">5</td>
<td align="left">홍길동</td>
<td align="left">1</td>
<td align="left">남</td>
<td align="left">92</td>
<td align="left">86</td>
<td align="left">F</td>
</tr>
</tbody>
</table></div>
</div>
<div id="범주형-데이터와-요인-factors" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> 범주형 데이터와 요인 (Factors)<a class="anchor" aria-label="anchor" href="#%EB%B2%94%EC%A3%BC%ED%98%95-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%99%80-%EC%9A%94%EC%9D%B8-factors"><i class="fas fa-link"></i></a>
</h2>
<p>R 데이터 프레임의 각 열은 숫자, 문자, 논리 값 벡터 또는 요인으로 구성된다. 숫자, 문자, 논리 값 벡터에 대해서는 <a href="ch-R-Vectors.html#ch-R-Vectors">3</a> 장에서 다루었다. 본 절에서는 R 데이터 프레임에 대하여 설명하기에 앞서 요인에 대하여 살펴보도록 한다.</p>
<div id="명목형-변수와-요인" class="section level3" number="6.1.1">
<h3>
<span class="header-section-number">6.1.1</span> 명목형 변수와 요인<a class="anchor" aria-label="anchor" href="#%EB%AA%85%EB%AA%A9%ED%98%95-%EB%B3%80%EC%88%98%EC%99%80-%EC%9A%94%EC%9D%B8"><i class="fas fa-link"></i></a>
</h3>
<p>전국 유권자 대상으로 지지하는 정당에 대해 다음 설문조사를 하였다고 하자.</p>
<p>다음 중 지지하는 정당은? ( )</p>
<ol style="list-style-type: decimal">
<li>A 정당</li>
<li>B 정당</li>
<li>C 정당</li>
<li>지지하는 정당 없음</li>
</ol>
<div id="범주-데이터의-숫자-코딩" class="section level4 unnumbered">
<h4>범주 데이터의 숫자 코딩<a class="anchor" aria-label="anchor" href="#%EB%B2%94%EC%A3%BC-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%9D%98-%EC%88%AB%EC%9E%90-%EC%BD%94%EB%94%A9"><i class="fas fa-link"></i></a>
</h4>
<p>10 명의 유권자에게 응답을 얻었다면 아마도 1부터 4까지의 숫자를 이용하여 다음과 같이 설문 결과를 입력하게 될 것이다.</p>
<div class="sourceCode" id="cb1017"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">results</span></span></code></pre></div>
<pre><code>#&gt;  [1] 1 3 2 4 3 2 1 3 2 2</code></pre>
<p>여기서 숫자로 코딩된 설문 결과는 1부터 4까지의 수량적 의미를 가지기보다는 4가지 범주(A 정당, B 정당, C 정당, 없음)의 차이를 숫자로 표현한 것 뿐이다. 그런데 이렇게 범주형 데이터를 숫자 벡터로 표현하는 것은 범주형 데이터를 편리하게 코딩할 수 있는 장점이 있는 반면 다음과 같은 단점을 가진다.</p>
</div>
<div id="숫자-코딩의-문제점" class="section level4 unnumbered">
<h4>숫자 코딩의 문제점<a class="anchor" aria-label="anchor" href="#%EC%88%AB%EC%9E%90-%EC%BD%94%EB%94%A9%EC%9D%98-%EB%AC%B8%EC%A0%9C%EC%A0%90"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li>결과가 숫자 벡터로 입력되었으므로 다음처럼 어떤 범주에도 대응되지 않는 잘못된 숫자가 입력될 수도 있다.</li>
</ul>
<div class="sourceCode" id="cb1019"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">results</span></span></code></pre></div>
<pre><code>#&gt;  [1] 5 3 2 4 3 2 1 3 2 2</code></pre>
<ul>
<li>결과를 숫자형 데이터로 오인하여 잘못된 처리를 수행할 수 있다. 입력하는 시점에는 오인을 할 가능성이 적지만 데이터를 분석하는 과정에서 주의를 기울이지 않으면 범주형 데이터를 숫자 데이터로 오인하여 잘못된 분석을 수행할 수 있다. 다음은 범주형 데이터를 나타내는 벡터를 수량 데이터로 오인하여 평균을 분석한 예이다.</li>
</ul>
<div class="sourceCode" id="cb1021"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 2.7</code></pre>
<ul>
<li>데이터 입력 후 제대로 기록해 두지 않으면 각 숫자의 의미가 무엇인지 파악하기 어렵게 된다.</li>
</ul>
</div>
<div id="factor" class="section level4 unnumbered">
<h4>factor()<a class="anchor" aria-label="anchor" href="#factor"><i class="fas fa-link"></i></a>
</h4>
<p>이러한 문제를 해결하기 위해 R은 범주형 데이터를 처리할 때 이용할 수 있는 요인(factor)이라는 데이터 형태를 제공한다. 요인을 생성하기 위해서 factor() 함수를 이용한다.</p>
</div>
<div id="수준-levels" class="section level4 unnumbered">
<h4>수준 levels<a class="anchor" aria-label="anchor" href="#%EC%88%98%EC%A4%80-levels"><i class="fas fa-link"></i></a>
</h4>
<p>다음은 숫자로 코딩된 결과(results)를 이용하여 1, 2, 3, 4 수준(level)을 가진 요인을 생성한 예이다. 요인에서 수준은 요인 데이터가 가질 수 있는 차별적 값을 나타낸다.</p>
<div class="sourceCode" id="cb1023"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span></span></code></pre></div>
<pre><code>#&gt;  [1] 5 3 2 4 3 2 1 3 2 2</code></pre>
<div class="sourceCode" id="cb1025"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; NULL</code></pre>
<div class="sourceCode" id="cb1027"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">results</span>, levels<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">fResults</span></span></code></pre></div>
<pre><code>#&gt;  [1] &lt;NA&gt; 3    2    4    3    2    1    3    2    2   
#&gt; Levels: 1 2 3 4</code></pre>
<div class="sourceCode" id="cb1029"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span><span class="op">(</span><span class="va">fResults</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; $levels
#&gt; [1] "1" "2" "3" "4"
#&gt; 
#&gt; $class
#&gt; [1] "factor"</code></pre>
<p>결과에서 보듯이 수준에 포함되지 않은 5의 값은 NA로 변환된다. 요인으로 변경된 데이터의 클래스는 factor가 되고, levels 속성이 지정되어 있음을 볼 수 있다. results의 첫 번째 데이터를 제대로 된 값인 1로 변경한 후 다시 한번 요인으로 변경해 보자.</p>
<div class="sourceCode" id="cb1031"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">fResults</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">results</span>, levels<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">fResults</span></span></code></pre></div>
<pre><code>#&gt;  [1] 1 3 2 4 3 2 1 3 2 2
#&gt; Levels: 1 2 3 4</code></pre>
<p>만약 요인 데이터에 이미 정의된 수준을 제외한 다른 값을 입력하면 다음과 같이 경고가 출력되고 입력된 데이터는 NA로 입력됨을 볼 수 있다.</p>
<div class="sourceCode" id="cb1033"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fResults</span><span class="op">[</span><span class="fl">11</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span><span class="va">fResults</span></span></code></pre></div>
<pre><code>#&gt;  [1] 1 3 2 4 3 2 1 3 2 2 4
#&gt; Levels: 1 2 3 4</code></pre>
<div class="sourceCode" id="cb1035"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fResults</span><span class="op">[</span><span class="fl">12</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">5</span></span></code></pre></div>
<pre><code>#&gt; Warning in `[&lt;-.factor`(`*tmp*`, 12, value = 5): 요인의 수준(factor level)이
#&gt; 올바르지 않아 NA가 생성되었습니다.</code></pre>
<div class="sourceCode" id="cb1037"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fResults</span></span></code></pre></div>
<pre><code>#&gt;  [1] 1    3    2    4    3    2    1    3    2    2    4    &lt;NA&gt;
#&gt; Levels: 1 2 3 4</code></pre>
<p>만약 요인 데이터를 숫자 벡터로 착각하여 평균을 구하려고 해 보자. 먼저 fResults의 데이터를 원래대로 돌려놓은 후 mean() 함수로 평균을 구해보자. 그러면 숫자 데이터가 아니므로 평균을 구할 수 없음을 알 수 있다.</p>
<div class="sourceCode" id="cb1039"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fResults</span><span class="op">[</span><span class="fl">12</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">fResults</span></span></code></pre></div>
<pre><code>#&gt;  [1] 1 3 2 4 3 2 1 3 2 2 4 2
#&gt; Levels: 1 2 3 4</code></pre>
<div class="sourceCode" id="cb1041"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">fResults</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; Warning in mean.default(fResults): 인자가 수치형 또는 논리형이 아니므로 NA를
#&gt; 반환합니다</code></pre>
<pre><code>#&gt; [1] NA</code></pre>
</div>
<div id="levels" class="section level4 unnumbered">
<h4>levels()<a class="anchor" aria-label="anchor" href="#levels"><i class="fas fa-link"></i></a>
</h4>
<p>요인의 수준을 좀 더 의미있는 형태로 바꾸어 보자. 그러면 요인에 입력된 숫자가 각각 어떤 범주에 대응하는지를 쉽게 파악할 수 있다.</p>
<div class="sourceCode" id="cb1044"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">fResults</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "1" "2" "3" "4"</code></pre>
<div class="sourceCode" id="cb1046"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">fResults</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"None"</span><span class="op">)</span></span>
<span><span class="va">fResults</span></span></code></pre></div>
<pre><code>#&gt;  [1] A    C    B    None C    B    A    C    B    B    None B   
#&gt; Levels: A B C None</code></pre>
<p>이제 fResults 요인을 출력해 보면 각 데이터가 수준에 정의된 문자로 표현됨을 볼 수 있다. 그러면 fResults는 문자 데이터로 변환된 것일까? 그렇지 않다. 요인은 내부적으로 데이터를 각각의 범주를 1부터 시작하는 자연수로 관리한다. 이 예에서는 4가지 서로 다른 범주(수준)이 있으므로 1부터 4까지의 자연수로 데이터를 표현한다. 단지 입출력될 때 요인에 부여된 수준으로 처리를 할 뿐이다. 이를 확인하기 위해서 typeof() 함수로 요인의 근원적 타입을 확인하고, unclass() 함수를 이용하여 요인이 내부적으로 어떤 정보를 가지고 있는지 확인해 보자.</p>
<div class="sourceCode" id="cb1048"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="va">fResults</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "integer"</code></pre>
<div class="sourceCode" id="cb1050"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">fResults</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "factor"</code></pre>
<div class="sourceCode" id="cb1052"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="va">fResults</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;  [1] 1 3 2 4 3 2 1 3 2 2 4 2
#&gt; attr(,"levels")
#&gt; [1] "A"    "B"    "C"    "None"</code></pre>
<p>요인이 내부적으로 숫자로 데이터를 표현하고 있다고 하더라도, 수준에 정의되지 않은 숫자로 데이터를 입력할 수는 없다. 요인은 항상 수준에 정의되어 있는 데이터 값만으로 입력되거나 출력될 수 있다.</p>
<div class="sourceCode" id="cb1054"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">fResults</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "A"    "B"    "C"    "None"</code></pre>
<div class="sourceCode" id="cb1056"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fResults</span><span class="op">[</span><span class="fl">11</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">4</span></span></code></pre></div>
<pre><code>#&gt; Warning in `[&lt;-.factor`(`*tmp*`, 11, value = 4): 요인의 수준(factor level)이
#&gt; 올바르지 않아 NA가 생성되었습니다.</code></pre>
<div class="sourceCode" id="cb1058"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fResults</span><span class="op">[</span><span class="fl">12</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"None"</span></span>
<span><span class="va">fResults</span></span></code></pre></div>
<pre><code>#&gt;  [1] A    C    B    None C    B    A    C    B    B    &lt;NA&gt; None
#&gt; Levels: A B C None</code></pre>
</div>
</div>
<div id="순서형-변수와-요인" class="section level3" number="6.1.2">
<h3>
<span class="header-section-number">6.1.2</span> 순서형 변수와 요인<a class="anchor" aria-label="anchor" href="#%EC%88%9C%EC%84%9C%ED%98%95-%EB%B3%80%EC%88%98%EC%99%80-%EC%9A%94%EC%9D%B8"><i class="fas fa-link"></i></a>
</h3>
<p>범주형 데이터는 앞의 예처럼 범주 간에 순서가 없는 명목형 데이터도 있지만, 범주 간에 순서가 있는 순서형 데이터도 있다. 전국 유권자 대상으로 현 정권에 대한 만족도에 대해 다음 설문조사를 하였다고 하자.</p>
<p>현 정권의 국정 수행에 대해 만족하고 계십니까? ( )</p>
<ol style="list-style-type: decimal">
<li>매우 불만</li>
<li>불만</li>
<li>보통</li>
<li>만족</li>
<li>매우 만족</li>
</ol>
<p>설문 결과를 다음과 같이 요인을 가지고 결과를 코딩할 수 있을 것이다. 그러나 요인은 디폴트로 수준 간에 순서가 없는 명목형 변수로 데이터를 처리한다. 그러므로 순서를 비교하는 비교 연산을 적용할 수 없다.</p>
<div class="sourceCode" id="cb1060"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">satisfaction</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"매우 불만"</span>, <span class="st">"매우 만족"</span>, <span class="st">"불만"</span>, <span class="st">"만족"</span>, <span class="st">"보통"</span>, </span>
<span>                  <span class="st">"불만"</span>, <span class="st">"매우 불만"</span>, <span class="st">"보통"</span>, <span class="st">"매우 만족"</span>, <span class="st">"불만"</span><span class="op">)</span></span>
<span><span class="va">fSatisfaction</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">satisfaction</span>, </span>
<span>        levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"매우 불만"</span>, <span class="st">"불만"</span>, <span class="st">"보통"</span>, <span class="st">"만족"</span>, <span class="st">"매우 만족"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fSatisfaction</span></span></code></pre></div>
<pre><code>#&gt;  [1] 매우 불만 매우 만족 불만      만족      보통      불만      매우 불만
#&gt;  [8] 보통      매우 만족 불만     
#&gt; Levels: 매우 불만 불만 보통 만족 매우 만족</code></pre>
<div class="sourceCode" id="cb1062"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fSatisfaction</span> <span class="op">&gt;=</span> <span class="st">"만족"</span></span></code></pre></div>
<pre><code>#&gt; Warning in Ops.factor(fSatisfaction, "만족"): 요인(factors)에 대하여 의미있는
#&gt; '&gt;='가 아닙니다.</code></pre>
<pre><code>#&gt;  [1] NA NA NA NA NA NA NA NA NA NA</code></pre>
<div id="ordered-인수로-순서형-변수-만들기" class="section level4 unnumbered">
<h4>ordered 인수로 순서형 변수 만들기<a class="anchor" aria-label="anchor" href="#ordered-%EC%9D%B8%EC%88%98%EB%A1%9C-%EC%88%9C%EC%84%9C%ED%98%95-%EB%B3%80%EC%88%98-%EB%A7%8C%EB%93%A4%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>명목형 데이터를 나타내는 요인의 숫자는 각 범주를 표현하는 의미를 가지므로 앞의 맨 마지막 예처럼 순서를 비교하는 연산을 수행할 수 없다. 그런데 이 경우에는 범주 간에 순서적 의미가 있으므로 factor() 함수의 ordered 인수를 설정하여 범주 간의 순서 관계를 명확히 할 수 있다. 다음 예에서 볼 수 있듯이 범주 간의 순서가 수준이 출력될 때 명시됨을 볼 수 있고, 순서 비교가 가능함을 볼 수 있다. 심지어는 order() 함수로 순서를 파악할 수 있다.</p>
<div class="sourceCode" id="cb1065"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oSatisfaction</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">satisfaction</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"매우 불만"</span>, <span class="st">"불만"</span>, <span class="st">"보통"</span>, <span class="st">"만족"</span>, <span class="st">"매우 만족"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">oSatisfaction</span></span></code></pre></div>
<pre><code>#&gt;  [1] 매우 불만 매우 만족 불만      만족      보통      불만      매우 불만
#&gt;  [8] 보통      매우 만족 불만     
#&gt; Levels: 매우 불만 &lt; 불만 &lt; 보통 &lt; 만족 &lt; 매우 만족</code></pre>
<div class="sourceCode" id="cb1067"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oSatisfaction</span> <span class="op">&gt;=</span> <span class="st">"만족"</span> </span></code></pre></div>
<pre><code>#&gt;  [1] FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb1069"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">oSatisfaction</span> <span class="op">&gt;=</span> <span class="st">"만족"</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
<div class="sourceCode" id="cb1071"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">oSatisfaction</span> <span class="op">&gt;=</span> <span class="st">"만족"</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 0.3</code></pre>
<div class="sourceCode" id="cb1073"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">oSatisfaction</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;  [1]  1  7  3  6 10  5  8  4  2  9</code></pre>
<p>R은 범주형 변수인 ’불만’과 ’만족’의 순서를 알 수 없다. ordered() 함수로 순서형 범주를 만들 때 levels에 나열된 순서로 크기가 주어진다고 가정한다. 만약 위의 예에서 levels의 순서가 다르면 다른 결과가 나올 것이다.</p>
<div class="sourceCode" id="cb1075"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oSatisfaction</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">satisfaction</span>, ordered <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>        levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"매우 만족"</span>, <span class="st">"만족"</span>, <span class="st">"보통"</span>, <span class="st">"불만"</span>, <span class="st">"매우 불만"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">oSatisfaction</span></span></code></pre></div>
<pre><code>#&gt;  [1] 매우 불만 매우 만족 불만      만족      보통      불만      매우 불만
#&gt;  [8] 보통      매우 만족 불만     
#&gt; Levels: 매우 만족 &lt; 만족 &lt; 보통 &lt; 불만 &lt; 매우 불만</code></pre>
<div class="sourceCode" id="cb1077"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oSatisfaction</span> <span class="op">&gt;=</span> <span class="st">"만족"</span> </span></code></pre></div>
<pre><code>#&gt;  [1]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb1079"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">oSatisfaction</span> <span class="op">&gt;=</span> <span class="st">"만족"</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 8</code></pre>
<div class="sourceCode" id="cb1081"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">oSatisfaction</span> <span class="op">&gt;=</span> <span class="st">"만족"</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 0.8</code></pre>
<div class="sourceCode" id="cb1083"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">oSatisfaction</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;  [1]  2  9  4  5  8  3  6 10  1  7</code></pre>
</div>
<div id="수준의-순서" class="section level4 unnumbered">
<h4>수준의 순서<a class="anchor" aria-label="anchor" href="#%EC%88%98%EC%A4%80%EC%9D%98-%EC%88%9C%EC%84%9C"><i class="fas fa-link"></i></a>
</h4>
<p>순서형이 아닌 명목형 범주 데이터는 factor()로 만들어지고 이 때도 levels에 주어진 순서로, 범주(수준)가 내부적으로 저장되는 숫자가 결정된다. levels에 언급된 수준의 순서대로 1번부터 차례로 숫자가 부여된다. 순서형 범주 데이터처럼 순서가 데이터 분석에 핵심적인 역할을 하지는 않지만, 그래프나 표가 표현될 때 이 범주(수준)의 순서대로 출력되므로, 범주를 원하는 순서대로 출력하고자 하면 levels 인수에 수준의 순서를 명시하는 것이 좋다. 그렇지 않으면 단어의 사전적 순서 등에 의해 순서가 부여된다.</p>
<div class="sourceCode" id="cb1085"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span></span>
<span><span class="va">fa1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span>
<span><span class="va">fa1</span></span></code></pre></div>
<pre><code>#&gt; [1] F M F M F
#&gt; Levels: F M</code></pre>
<div class="sourceCode" id="cb1087"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="va">fa1</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 2 1 2 1
#&gt; attr(,"levels")
#&gt; [1] "F" "M"</code></pre>
<div class="sourceCode" id="cb1089"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">fa1</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; fa1
#&gt; F M 
#&gt; 3 2</code></pre>
<div class="sourceCode" id="cb1091"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fa2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">a</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fa2</span></span></code></pre></div>
<pre><code>#&gt; [1] F M F M F
#&gt; Levels: M F</code></pre>
<div class="sourceCode" id="cb1093"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="va">fa2</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 2 1 2 1 2
#&gt; attr(,"levels")
#&gt; [1] "M" "F"</code></pre>
<div class="sourceCode" id="cb1095"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">fa2</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; fa2
#&gt; M F 
#&gt; 2 3</code></pre>
</div>
<div id="relevel과-reorder를-이용한-수준의-순서-변경" class="section level4 unnumbered">
<h4>
<code>relevel()</code>과 <code>reorder()</code>를 이용한 수준의 순서 변경<a class="anchor" aria-label="anchor" href="#relevel%EA%B3%BC-reorder%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%88%98%EC%A4%80%EC%9D%98-%EC%88%9C%EC%84%9C-%EB%B3%80%EA%B2%BD"><i class="fas fa-link"></i></a>
</h4>
<p>앞의 예에서는 <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> 함수의 <code>levels</code> 인수를 사용하여 수준의 순서를 바꾸는 방법을 보았다.
이러한 방법은 수준의 수가 적을 때는 편리한 방법이지만, 수준의 수가 많으면 모든 수준을 <code>levels</code> 인수에 나열하여야 하기 때문에 불편하다.
예를 들어, 분석의 주안점이 되는 수준이 있고, 나머지 수준의 순서는 중요하지 않은 경우, 관심의 대상이 되는 수준이 맨 앞에 오도록 순서를 변경하려면 <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> 함수의 <code>levels</code> 인수에 모든 수준을 다시 나열해 주어야 하므로 불편하다.
이러한 경우에는 <code><a href="https://rdrr.io/r/stats/relevel.html">relevel()</a></code> 함수를 사용하면 원하는 결과를 쉽게 얻을 수 있다.</p>
<p>다음의 <code>fResult</code> 요인에서 <code>"None"</code>이라는 수준이 맨 앞에 나타나도록 변경하고자 한다.</p>
<div class="sourceCode" id="cb1097"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fResults</span></span></code></pre></div>
<pre><code>#&gt;  [1] A    C    B    None C    B    A    C    B    B    &lt;NA&gt; None
#&gt; Levels: A B C None</code></pre>
<p><code><a href="https://rdrr.io/r/stats/relevel.html">relevel()</a></code> 함수의 <code>ref</code> 인수에 맨 앞에 나타날 수준을 지정하면 나머지 수준의 순서는 변하지 않고 지정된 수준만 앞으로 이동하게 된다.</p>
<div class="sourceCode" id="cb1099"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fResults2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/relevel.html">relevel</a></span><span class="op">(</span><span class="va">fResults</span>, ref <span class="op">=</span> <span class="st">"None"</span><span class="op">)</span></span>
<span><span class="va">fResults2</span></span></code></pre></div>
<pre><code>#&gt;  [1] A    C    B    None C    B    A    C    B    B    &lt;NA&gt; None
#&gt; Levels: None A B C</code></pre>
<div class="sourceCode" id="cb1101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">fResults2</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; fResults2
#&gt; None    A    B    C 
#&gt;    2    2    4    3</code></pre>
<p><code>InsectSprays</code>는 살충제의 종류(spray)와 농작물에 있는 해충의 수(count)를 보여주는 데이터이다.
살충제의 종류는 6 개의 수준을 가지는 요인이다.</p>
<div class="sourceCode" id="cb1103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">InsectSprays</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;   count spray
#&gt; 1    10     A
#&gt; 2     7     A
#&gt; 3    20     A
#&gt; 4    14     A
#&gt; 5    14     A
#&gt; 6    12     A</code></pre>
<div class="sourceCode" id="cb1105"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">InsectSprays</span><span class="op">$</span><span class="va">spray</span></span></code></pre></div>
<pre><code>#&gt;  [1] A A A A A A A A A A A A B B B B B B B B B B B B C C C C C C C C C C C C D D
#&gt; [39] D D D D D D D D D D E E E E E E E E E E E E F F F F F F F F F F F F
#&gt; Levels: A B C D E F</code></pre>
<p>다음은 살충제 종류에 따른 해충의 수의 분포를 상자 그래프로 나타낸 것이다.</p>
<div class="sourceCode" id="cb1107"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">count</span> <span class="op">~</span> <span class="va">spray</span>, data<span class="op">=</span><span class="va">InsectSprays</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="RDataFrame_files/figure-html/unnamed-chunk-6-1.png" width="60%" style="display: block; margin: auto;"></div>
<p>그런데 이런 데이터는 살충력이 높은 것에서 낮은 것 순으로 배열되는 것이 더 이해하기가 쉽다.
그러한 형태로 그래프를 그리려면 요인이 <code>spray</code> 열의 수준이 <code>count</code>의 중위수가 낮은 것부터 높은 것 순으로 정렬되어야 한다.
<code><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder()</a></code> 함수를 사용하면 이러한 수준의 변경을 손 쉽게 할 수 있다.
<code><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder()</a></code>는 첫 번째 인수로 요인을, 두 번째 인수로 요인의 수준을 결정할 다른 수치 벡터를, 세 번째 인수로 수치 벡터에 적용할 통계 함수를 지정한다. 그러면 수치 벡터를 요인의 수준 별로 나누어 통계 함수를 적용한 후, 가장 낮은 값에서 큰 값으로 수준의 순서를 재정렬한다.</p>
<div class="sourceCode" id="cb1108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">count</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">spray</span>, <span class="va">count</span>, <span class="va">median</span><span class="op">)</span>, data<span class="op">=</span><span class="va">InsectSprays</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="RDataFrame_files/figure-html/unnamed-chunk-7-1.png" width="60%" style="display: block; margin: auto;"></div>
</div>
<div id="labels-인수" class="section level4 unnumbered">
<h4>labels 인수<a class="anchor" aria-label="anchor" href="#labels-%EC%9D%B8%EC%88%98"><i class="fas fa-link"></i></a>
</h4>
<p>요인을 만든 후 기존의 수준을 변경하고 싶으면 levels() 함수를 이용하여 새로운 수준을 할당한다고 설명하였다. 그러나 요인을 만들 때 기존에 코딩된 수준을 바로 변경하고 싶을 수가 있다. 이 경우에는 factor() 함수에 labels 인수를 이용하면 기존의 수준이 labels 인수에 주어진 형태로 변경된다. 이 때 주의할 점은 levels 인수는 원래 데이터가 코딩된 형태로 정의되어야 하고, labels 인수는 바꿀 코딩 형태로 정의되어야 한다.</p>
<div class="sourceCode" id="cb1109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fa3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">a</span>, levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Male"</span>, <span class="st">"Female"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">fa3</span></span></code></pre></div>
<pre><code>#&gt; [1] Female Male   Female Male   Female
#&gt; Levels: Male Female</code></pre>
<div class="sourceCode" id="cb1111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">unclass</a></span><span class="op">(</span><span class="va">fa3</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 2 1 2 1 2
#&gt; attr(,"levels")
#&gt; [1] "Male"   "Female"</code></pre>
<div class="sourceCode" id="cb1113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">fa3</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; fa3
#&gt;   Male Female 
#&gt;      2      3</code></pre>
<div class="sourceCode" id="cb1115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fa3</span><span class="op">[</span><span class="fl">6</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"M"</span></span></code></pre></div>
<pre><code>#&gt; Warning in `[&lt;-.factor`(`*tmp*`, 6, value = "M"): 요인의 수준(factor level)이
#&gt; 올바르지 않아 NA가 생성되었습니다.</code></pre>
<div class="sourceCode" id="cb1117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fa3</span><span class="op">[</span><span class="fl">6</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"Male"</span></span></code></pre></div>
</div>
</div>
</div>
<div id="데이터-프레임-만들기" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> 데이터 프레임 만들기<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84-%EB%A7%8C%EB%93%A4%EA%B8%B0"><i class="fas fa-link"></i></a>
</h2>
<div id="data.frame" class="section level4 unnumbered">
<h4>data.frame()<a class="anchor" aria-label="anchor" href="#data.frame"><i class="fas fa-link"></i></a>
</h4>
<p>data.frame() 함수를 이용하면 벡터, 행렬, 요인, 심지어 다른 데이터 프레임을 묶어서 새로운 데이터 프레임을 만들 수 있다. 이 때 다음과 같은 제한 조건이 있다.</p>
<p>첫째, 벡터는 모두 같은 길이를 가져야 하며 행렬과 데이터 프레임은 모두 같은 행 수를 가져야 한다. 벡터의 같은 위치의 데이터와 행렬 및 데이터 프레임의 같은 행에 있는 데이터가 연결되어 하나의 데이터 단위가 된다.</p>
<p>둘째, 벡터는 하나의 벡터가 데이터 프레임의 하나의 열이 되지만, 행렬, 데이터 프레임은 각 열이 데이터 프레임의 하나의 열이 된다.</p>
<p>이러한 사실을 염두하면서 표 <a href="ch-R-Data-Frame.html#tab:class-scores">6.1</a>의 데이터를 데이터 프레임으로 만들어 본다. 먼저 학생이름, 학년, 성별로만 이루어진 데이터 프레임을 만들어 보자.</p>
<div class="sourceCode" id="cb1118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"김철수"</span>, <span class="st">"김영희"</span>, <span class="st">"이철수"</span>, <span class="st">"이영희"</span>, <span class="st">"홍길동"</span><span class="op">)</span></span>
<span><span class="va">grade</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">3</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">gender</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">" M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span></span>
<span><span class="va">student</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">grade</span>, <span class="va">gender</span><span class="op">)</span></span>
<span><span class="va">student</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender
#&gt; 1 김철수     1      M
#&gt; 2 김영희     4      F
#&gt; 3 이철수     3      M
#&gt; 4 이영희     2      F
#&gt; 5 홍길동     1      M</code></pre>
<p>위의 예에서는 길이가 같은 벡터와 요인을 인수로 해서 데이터 프레임을 만들었다. 데이터 프레임을 출력해 보면 자동으로 행 번호가 부여되어 있음을 볼 수 있다. 열의 이름으로 각각 벡터와 요인을 저장한 변수명이 부여되었음을 볼 수 있다.</p>
<p>이번에는 만들어진 데이터 프레임에 중간, 기말 고사 점수와 재수강 여부를 포함시켜 새로운 데이터 프레임을 만들어 보자. 아래 예에서는 중간, 기말 고사 점수를 행렬로 먼저 만든 후 데이터 프레임에 포함시켜 보았다.</p>
<div class="sourceCode" id="cb1120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">midterm</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">74</span>, <span class="fl">82</span>, <span class="fl">67</span>, <span class="fl">89</span>, <span class="fl">92</span><span class="op">)</span></span>
<span><span class="va">final</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">91</span>, <span class="fl">77</span>, <span class="fl">88</span>, <span class="fl">78</span>, <span class="fl">86</span><span class="op">)</span></span>
<span><span class="va">scores</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">midterm</span>, <span class="va">final</span><span class="op">)</span></span>
<span><span class="va">scores</span></span></code></pre></div>
<pre><code>#&gt;      midterm final
#&gt; [1,]      74    91
#&gt; [2,]      82    77
#&gt; [3,]      67    88
#&gt; [4,]      89    78
#&gt; [5,]      92    86</code></pre>
<div class="sourceCode" id="cb1122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">students</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">student</span>, <span class="va">scores</span>, retake <span class="op">=</span> <span class="va">rt</span><span class="op">)</span></span>
<span><span class="va">students</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake
#&gt; 1 김철수     1      M      74    91   TRUE
#&gt; 2 김영희     4      F      82    77  FALSE
#&gt; 3 이철수     3      M      67    88  FALSE
#&gt; 4 이영희     2      F      89    78   TRUE
#&gt; 5 홍길동     1      M      92    86  FALSE</code></pre>
<p>위에서 새로운 데이터 프레임의 각 열의 이름은 기존 데이터 프레임의 각 열의 이름, 행렬의 열 이름이 자동으로 부여되고 있음을 볼 수 있다. 재수강 여부 데이터벡터 rt는 data.frame()이 호출될 때, retake = rt 형태로 인수를 전달하여 새로운 데이터 프레임에서는 이름이 retake로 변경되었다. 데이터 프레임을 생성할 때 각 열에 이름을 부여하고 싶으면 이와 같은 방식으로 이름을 부여하면 된다.</p>
</div>
<div id="cbind" class="section level4 unnumbered">
<h4>cbind()<a class="anchor" aria-label="anchor" href="#cbind"><i class="fas fa-link"></i></a>
</h4>
<p>앞서 설명하였듯이 데이터 프레임은 행렬적인 외양을 가지고 있으므로 행렬처럼 cbind()나 rbind()를 이용하여 행과 열을 추가할 수 있다. 다음 예는 cbind를 이용하여 중간과 기말의 총점 열을 추가한 예이다.</p>
<div class="sourceCode" id="cb1124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">total.scores</span> <span class="op">&lt;-</span> <span class="va">midterm</span> <span class="op">+</span> <span class="va">final</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">students</span>, <span class="va">total.scores</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake total.scores
#&gt; 1 김철수     1      M      74    91   TRUE          165
#&gt; 2 김영희     4      F      82    77  FALSE          159
#&gt; 3 이철수     3      M      67    88  FALSE          155
#&gt; 4 이영희     2      F      89    78   TRUE          167
#&gt; 5 홍길동     1      M      92    86  FALSE          178</code></pre>
</div>
<div id="rbind" class="section level4 unnumbered">
<h4>rbind()<a class="anchor" aria-label="anchor" href="#rbind"><i class="fas fa-link"></i></a>
</h4>
<p>다음 예는 rbind()로 새로운 데이터 행을 추가한 예이다. 이 때 주의할 점은 추가할 데이터의 각 항목의 이름과 형식이 일치해야 한다는 것이다.</p>
<div class="sourceCode" id="cb1126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"Jane Eyre"</span>, grade<span class="op">=</span><span class="fl">4</span>, gender<span class="op">=</span><span class="st">"F"</span>, </span>
<span>                midterm<span class="op">=</span><span class="fl">90</span>, final<span class="op">=</span><span class="fl">85</span>, retake<span class="op">=</span><span class="cn">F</span><span class="op">)</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code>#&gt;        name grade gender midterm final retake
#&gt; 1 Jane Eyre     4      F      90    85  FALSE</code></pre>
<div class="sourceCode" id="cb1128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="va">students</span>, <span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;        name grade gender midterm final retake
#&gt; 1    김철수     1      M      74    91   TRUE
#&gt; 2    김영희     4      F      82    77  FALSE
#&gt; 3    이철수     3      M      67    88  FALSE
#&gt; 4    이영희     2      F      89    78   TRUE
#&gt; 5    홍길동     1      M      92    86  FALSE
#&gt; 6 Jane Eyre     4      F      90    85  FALSE</code></pre>
</div>
</div>
<div id="데이터-프레임-각-열의-지정" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> 데이터 프레임 각 열의 지정<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84-%EA%B0%81-%EC%97%B4%EC%9D%98-%EC%A7%80%EC%A0%95"><i class="fas fa-link"></i></a>
</h2>
<div id="데이터-프레임은-리스트-타입" class="section level4 unnumbered">
<h4>데이터 프레임은 리스트 타입<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%80-%EB%A6%AC%EC%8A%A4%ED%8A%B8-%ED%83%80%EC%9E%85"><i class="fas fa-link"></i></a>
</h4>
<p>생성된 데이터 프레임에 대해 typeof() 함수와 attributes() 함수를 이용하여 타입과 속성을 알아보자. 다음 결과에서 데이터 프레임은 리스트 타입이며, names 속성에 데이터 프레임의 각 열의 이름이 나열되어 있음을 볼 수 있다.</p>
<div class="sourceCode" id="cb1130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="va">students</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "list"</code></pre>
<div class="sourceCode" id="cb1132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span><span class="op">(</span><span class="va">students</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; $names
#&gt; [1] "name"    "grade"   "gender"  "midterm" "final"   "retake" 
#&gt; 
#&gt; $class
#&gt; [1] "data.frame"
#&gt; 
#&gt; $row.names
#&gt; [1] 1 2 3 4 5</code></pre>
</div>
<div id="리스트-형식으로-데이터-프레임의-열-지정" class="section level4 unnumbered">
<h4>리스트 형식으로 데이터 프레임의 열 지정<a class="anchor" aria-label="anchor" href="#%EB%A6%AC%EC%8A%A4%ED%8A%B8-%ED%98%95%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%98-%EC%97%B4-%EC%A7%80%EC%A0%95"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임은 본질적으로 리스트 타입이므로 데이터 프레임의 각 열은 리스트의 요소가 된다. 따라서 데이터 프레임의 각 열을 지정할 때는 리스트의 각 요소를 지정할 때와 마찬가지로, <code>$</code> 기호 또는 <code>[[ ]]</code>를 이용하여 다음과 같은 형태로 지정하면 된다. 이는 데이터 프레임이 리스트 타입이기 때문에 리스트와 같은 방식으로 요소들에 접근할 수 있기 때문이다. 리스트에 대한 자세한 설명은 <a href="ch-R-List.html#ch-R-List">5</a> 장을 확인하기 바란다.</p>
<div class="sourceCode" id="cb1134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_frame_name</span><span class="op">$</span><span class="va">column_name</span></span>
<span><span class="va">data_frame_name</span><span class="op">[[</span><span class="va">column_number</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">data_frame_name</span><span class="op">[[</span><span class="va">column_name</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<p>다음은 위에서 생성한 students의 각 열을 이름으로 지정하여, 학생의 성별 데이터, 중간, 기말고사를 출력한 예이다.</p>
<div class="sourceCode" id="cb1135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">$</span><span class="va">gender</span></span></code></pre></div>
<pre><code>#&gt; [1] " M" "F"  "M"  "F"  "M"</code></pre>
<div class="sourceCode" id="cb1137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[[</span><span class="st">"midterm"</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt; [1] 74 82 67 89 92</code></pre>
<div class="sourceCode" id="cb1139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[[</span><span class="fl">5</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt; [1] 91 77 88 78 86</code></pre>
<div class="sourceCode" id="cb1141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">$</span><span class="va">name</span></span></code></pre></div>
<pre><code>#&gt; [1] "김철수" "김영희" "이철수" "이영희" "홍길동"</code></pre>
<div class="sourceCode" id="cb1143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">name</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "character"</code></pre>
</div>
<div id="데이터-프레임의-각-열은-벡터" class="section level4 unnumbered">
<h4>데이터 프레임의 각 열은 벡터<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%98-%EA%B0%81-%EC%97%B4%EC%9D%80-%EB%B2%A1%ED%84%B0"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임의 각 열은 벡터이므로 데이터 프레임의 특정 열을 리스트 필터링과 같은 방식으로 지정한 후, 벡터 연산이나 벡터 인덱스를 이용하여 각 요소의 값을 출력하거나 변경할 수 있다.</p>
<div class="sourceCode" id="cb1145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">$</span><span class="va">midterm</span> <span class="op">*</span> <span class="fl">2</span></span></code></pre></div>
<pre><code>#&gt; [1] 148 164 134 178 184</code></pre>
<div class="sourceCode" id="cb1147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">midterm</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 404</code></pre>
<div class="sourceCode" id="cb1149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">$</span><span class="va">midterm</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt; [1] 92</code></pre>
<div class="sourceCode" id="cb1151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">$</span><span class="va">midterm</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span><span class="va">students</span><span class="op">[[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt; [1] 67 89 50</code></pre>
<p>또한 리스트에 새로운 요소를 추가할 때와 마찬가지 방법으로 열을 추가할 수도 있다. 다음 예는 hw이라는 이름으로 숙제 점수 열을 추가하는 예이다.</p>
<div class="sourceCode" id="cb1153"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">$</span><span class="va">hw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">students</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 2 김영희     4      F      82    77  FALSE  9
#&gt; 3 이철수     3      M      67    88  FALSE  7
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 5 홍길동     1      M      50    86  FALSE 10</code></pre>
</div>
</div>
<div id="데이터-프레임의-필터링" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> 데이터 프레임의 필터링<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%98-%ED%95%84%ED%84%B0%EB%A7%81"><i class="fas fa-link"></i></a>
</h2>
<p>데이터를 분석하다 보면 작업 중인 데이터 프레임의 일부만을 선택하여 작업을 할필요가 있다. 어떤 경우에는 데이터의 일부분만 변경할 필요가 있다. 필요 없는 열을 제거하거나 새로운 열을 추가하기 위해서는 여러 열을 한번에 지정할 수도 있어야 한다.</p>
<p>이러한 작업을 수행하기 위해서는 데이터 프레임의 일부분을 지정하는 필터링을 수행하여야 한다. 데이터 프레임은 리스트를 기본적인 속성으로 하기 때문에 리스트로서 부분을 필터링하는 방법이 있고, 행렬적 외양을 가지고 있기 때문에 행렬처럼 필터링을 하는 방법이 있다.</p>
<div id="리스트-형식으로-필터링" class="section level3" number="6.4.1">
<h3>
<span class="header-section-number">6.4.1</span> 리스트 형식으로 필터링<a class="anchor" aria-label="anchor" href="#%EB%A6%AC%EC%8A%A4%ED%8A%B8-%ED%98%95%EC%8B%9D%EC%9C%BC%EB%A1%9C-%ED%95%84%ED%84%B0%EB%A7%81"><i class="fas fa-link"></i></a>
</h3>
<p>데이터 프레임은 리스트 구조를 가지고 있으며, 데이터 프레임의 열은 리스트의 각 요소가 된다. 따라서 <a href="ch-R-List.html#ch-R-List">5</a> 장에서 이용한 리스트의 부분 필터링을 수행하는 방법으로 데이터 프레임의 일부 열만 필터링을 수행할 수 있다.</p>
<div id="리스트로서-필터링은-1차원-인덱스-구조를-갖는다." class="section level4 unnumbered">
<h4>리스트로서 필터링은 1차원 인덱스 구조를 갖는다.<a class="anchor" aria-label="anchor" href="#%EB%A6%AC%EC%8A%A4%ED%8A%B8%EB%A1%9C%EC%84%9C-%ED%95%84%ED%84%B0%EB%A7%81%EC%9D%80-1%EC%B0%A8%EC%9B%90-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EA%B5%AC%EC%A1%B0%EB%A5%BC-%EA%B0%96%EB%8A%94%EB%8B%A4."><i class="fas fa-link"></i></a>
</h4>
<p>리스트로서 데이터 프레임을 필터링하는 방법은 아래와 같이 인덱스 벡터를 이용하는 것이다. 여기서 인덱스 벡터는 벡터나 리스트의 인덱스 벡터와 마찬가지로 숫자, 이름, 논리값 벡터가 될 수 있다.</p>
<div class="sourceCode" id="cb1155"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_frame_name</span><span class="op">[</span><span class="va">index_vector</span><span class="op">]</span></span></code></pre></div>
<p>다음 예는 students 데이터 프레임에서 열의 인덱스를 숫자, 이름, 논리값으로 각각 지정하여 새로운 데이터 프레임을 만든 경우이다.</p>
<div class="sourceCode" id="cb1156"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students.new</span> <span class="op">&lt;-</span> <span class="va">students</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">students.new</span></span></code></pre></div>
<pre><code>#&gt;     name grade
#&gt; 1 김철수     1
#&gt; 2 김영희     4
#&gt; 3 이철수     3
#&gt; 4 이영희     2
#&gt; 5 홍길동     1</code></pre>
<div class="sourceCode" id="cb1158"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students.new</span> <span class="op">&lt;-</span> <span class="va">students</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">students.new</span></span></code></pre></div>
<pre><code>#&gt;   gender midterm final retake hw
#&gt; 1      M      74    91   TRUE  8
#&gt; 2      F      82    77  FALSE  9
#&gt; 3      M      67    88  FALSE  7
#&gt; 4      F      89    78   TRUE  8
#&gt; 5      M      50    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1160"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">student.new</span> <span class="op">&lt;-</span> <span class="va">students</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"grade"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">student.new</span></span></code></pre></div>
<pre><code>#&gt;   gender grade
#&gt; 1      M     1
#&gt; 2      F     4
#&gt; 3      M     3
#&gt; 4      F     2
#&gt; 5      M     1</code></pre>
<div class="sourceCode" id="cb1162"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">student.new</span> <span class="op">&lt;-</span> <span class="va">students</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">T</span>, <span class="cn">F</span>, <span class="cn">F</span>, <span class="cn">T</span>, <span class="cn">T</span>, <span class="cn">F</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">student.new</span></span></code></pre></div>
<pre><code>#&gt;     name midterm final hw
#&gt; 1 김철수      74    91  8
#&gt; 2 김영희      82    77  9
#&gt; 3 이철수      67    88  7
#&gt; 4 이영희      89    78  8
#&gt; 5 홍길동      50    86 10</code></pre>
<p>data.frame() 함수를 이용하면 기존의 데이터 프레임에 새로운 열을 추가하여 새로운 데이터 프레임도 만들 수 있다. 다음 예는 기존의 students 데이터 프레임에 키 데이터를 추가한 경우이다.</p>
<div class="sourceCode" id="cb1164"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">height</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">172</span>, <span class="fl">167</span>, <span class="fl">181</span>, <span class="fl">162</span>, <span class="fl">178</span><span class="op">)</span></span>
<span><span class="va">students.new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">students</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, height<span class="op">=</span><span class="va">height</span><span class="op">)</span></span>
<span><span class="va">students.new</span></span></code></pre></div>
<pre><code>#&gt;   grade gender height
#&gt; 1     1      M    172
#&gt; 2     4      F    167
#&gt; 3     3      M    181
#&gt; 4     2      F    162
#&gt; 5     1      M    178</code></pre>
</div>
<div id="열-지정하기-vs.-한-열만-데이터-프레임으로-필터링" class="section level4 unnumbered">
<h4>열 지정하기 vs. 한 열만 데이터 프레임으로 필터링<a class="anchor" aria-label="anchor" href="#%EC%97%B4-%EC%A7%80%EC%A0%95%ED%95%98%EA%B8%B0-vs.-%ED%95%9C-%EC%97%B4%EB%A7%8C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9C%BC%EB%A1%9C-%ED%95%84%ED%84%B0%EB%A7%81"><i class="fas fa-link"></i></a>
</h4>
<p>앞서 설명하였듯이 데이터 프레임은 리스트이므로 데이터 프레임의 한 열만을 지정할 때 <code>[]</code>뿐 아니라 <code>[[]]</code>나 와 <code>$</code>를 이용해 한 열을 지정할 수 있다. 두 방식의 차이는 전자가 데이터 프레임에서 지정된 열만으로 이루어진 새로운 데이터 프레임을 반환하는 반면, 후자는 데이터 프레임에 있는 열 자체, 즉 벡터를 반환한다. 아래는 students 데이터 프레임에서 <code>[]</code>와 <code>[[]]</code>를 이용하여 두번째 열을 지정한 결과이다.</p>
<div class="sourceCode" id="cb1166"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">students</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code>#&gt;   grade
#&gt; 1     1
#&gt; 2     4
#&gt; 3     3
#&gt; 4     2
#&gt; 5     1</code></pre>
<div class="sourceCode" id="cb1168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "list"</code></pre>
<div class="sourceCode" id="cb1170"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; $names
#&gt; [1] "grade"
#&gt; 
#&gt; $row.names
#&gt; [1] 1 2 3 4 5
#&gt; 
#&gt; $class
#&gt; [1] "data.frame"</code></pre>
<div class="sourceCode" id="cb1172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">students</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">a</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 4 3 2 1</code></pre>
<div class="sourceCode" id="cb1174"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "double"</code></pre>
<div class="sourceCode" id="cb1176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; NULL</code></pre>
<p>지금까지 설명한 내용은 데이터 프레임이 리스트 타입이기 때문에 성립하는 내용이다. 따라서 지금까지 설명한 내용은 리스트에도 모두 적용된다.</p>
</div>
</div>
<div id="행렬-형식으로-필터링" class="section level3" number="6.4.2">
<h3>
<span class="header-section-number">6.4.2</span> 행렬 형식으로 필터링<a class="anchor" aria-label="anchor" href="#%ED%96%89%EB%A0%AC-%ED%98%95%EC%8B%9D%EC%9C%BC%EB%A1%9C-%ED%95%84%ED%84%B0%EB%A7%81"><i class="fas fa-link"></i></a>
</h3>
<div id="행렬로서-필터링은-2차원-인덱스-구조를-갖는다." class="section level4 unnumbered">
<h4>행렬로서 필터링은 2차원 인덱스 구조를 갖는다.<a class="anchor" aria-label="anchor" href="#%ED%96%89%EB%A0%AC%EB%A1%9C%EC%84%9C-%ED%95%84%ED%84%B0%EB%A7%81%EC%9D%80-2%EC%B0%A8%EC%9B%90-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EA%B5%AC%EC%A1%B0%EB%A5%BC-%EA%B0%96%EB%8A%94%EB%8B%A4."><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임은 열의 길이가 모두 같기 때문에, 보통의 리스트에는 없는 행렬과 같은 필터링 방법이 존재한다. 특히 기존의 데이터 프레임에 행을 삭제 또는 추가할 필요가 있는 경우 이러한 행렬 방식의 필터링 방법은 매우 유용한다.<br>
데이터 프레임의 인덱스 벡터의 사용은 다음과 같이 행렬의 방식과 동일하게 행과 열을 독립적으로 지정하는 2차원 인덱스 구조를 가진다.</p>
<div class="sourceCode" id="cb1178"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_frame_name</span><span class="op">[</span><span class="va">row_index_vector</span>, <span class="va">column_index_vector</span><span class="op">]</span></span></code></pre></div>
<p>다음은 students 데이터 프레임에서 행렬 인덱스 벡터를 이용하여 데이터의 일부를 지정한 예이다.</p>
<div class="sourceCode" id="cb1179"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 1 김철수     1      M      74    91   TRUE  8</code></pre>
<div class="sourceCode" id="cb1181"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span>,<span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 2 김영희     4      F      82    77  FALSE  9
#&gt; 3 이철수     3      M      67    88  FALSE  7</code></pre>
<div class="sourceCode" id="cb1183"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,<span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 5 홍길동     1      M      50    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1185"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span>,<span class="fl">4</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt; [1] 74 82 67 89 50</code></pre>
<div class="sourceCode" id="cb1187"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span>,<span class="op">-</span><span class="fl">4</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender final retake hw
#&gt; 1 김철수     1      M    91   TRUE  8
#&gt; 2 김영희     4      F    77  FALSE  9
#&gt; 3 이철수     3      M    88  FALSE  7
#&gt; 4 이영희     2      F    78   TRUE  8
#&gt; 5 홍길동     1      M    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1189"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">4</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;   grade midterm
#&gt; 1     1      74
#&gt; 2     4      82
#&gt; 3     3      67
#&gt; 4     2      89
#&gt; 5     1      50</code></pre>
<div class="sourceCode" id="cb1191"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">4</span>, <span class="fl">3</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;   gender midterm final
#&gt; 2      F      82    77
#&gt; 3      M      67    88
#&gt; 4      F      89    78</code></pre>
<div class="sourceCode" id="cb1193"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">$</span><span class="va">midterm</span> <span class="op">&gt;=</span> <span class="fl">80</span></span></code></pre></div>
<pre><code>#&gt; [1] FALSE  TRUE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb1195"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="va">students</span><span class="op">$</span><span class="va">midterm</span> <span class="op">&gt;=</span> <span class="fl">80</span>, <span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 2 김영희     4      F      82    77  FALSE  9
#&gt; 4 이영희     2      F      89    78   TRUE  8</code></pre>
<div class="sourceCode" id="cb1197"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="va">students</span><span class="op">$</span><span class="va">midterm</span> <span class="op">&gt;=</span> <span class="fl">80</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"grade"</span>, <span class="st">"gender"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender
#&gt; 2 김영희     4      F
#&gt; 4 이영희     2      F</code></pre>
<div class="sourceCode" id="cb1199"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="va">students</span><span class="op">$</span><span class="va">grade</span> <span class="op">!=</span> <span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"grade"</span>, <span class="st">"gender"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender
#&gt; 2 김영희     4      F
#&gt; 3 이철수     3      M
#&gt; 4 이영희     2      F</code></pre>
</div>
<div id="행렬-필터링-방법을-이용한-데이터-프레임-정렬" class="section level4 unnumbered">
<h4>행렬 필터링 방법을 이용한 데이터 프레임 정렬<a class="anchor" aria-label="anchor" href="#%ED%96%89%EB%A0%AC-%ED%95%84%ED%84%B0%EB%A7%81-%EB%B0%A9%EB%B2%95%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84-%EC%A0%95%EB%A0%AC"><i class="fas fa-link"></i></a>
</h4>
<p>행렬과 마찬가지로 데이터 프레임을 특정 열을 기준으로 정렬할 수 있다. 다음은 학년을 기준으로 데이터 프레임을 정렬한 예와, 기말고사 점수가 높은 학생부터 낮은 학생 순으로 정렬한 예이다.</p>
<div class="sourceCode" id="cb1201"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">grade</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 5 4 3 2</code></pre>
<div class="sourceCode" id="cb1203"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">grade</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 5 홍길동     1      M      50    86  FALSE 10
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 3 이철수     3      M      67    88  FALSE  7
#&gt; 2 김영희     4      F      82    77  FALSE  9</code></pre>
<div class="sourceCode" id="cb1205"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">final</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 3 5 4 2</code></pre>
<div class="sourceCode" id="cb1207"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">final</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 3 이철수     3      M      67    88  FALSE  7
#&gt; 5 홍길동     1      M      50    86  FALSE 10
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 2 김영희     4      F      82    77  FALSE  9</code></pre>
<p>만약 학생을 학년으로 정렬을 한 후, 동일 학년이면 기말고사가 높은 사람이 먼저 나오게 정렬하고자 하면 어떻게 할까?
사실 order() 함수는 길이가 같은 여러 개의 벡터를 차례대로 비교하여 순위를 결정할 수 있다. order()의 인수 중 맨처음 나열된 벡터를 기준으로 순서를 결정하지만, 동률이 있으면 두번째로 나열된 벡터를 기준으로 동률 간의 순서를 결정한다. 두번째 벡터에서도 동률이면 다음에 나열된 벡터를 기준으로 이용한다.
예를 들어 학생을 학년 순서로 정렬하는데, 학년이 동률인 경우 기말고사 점수로 순서를 정한다고 하자. 그러면 다음과 같이 order() 함수를 기술하면 된다.</p>
<div class="sourceCode" id="cb1209"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">grade</span>, <span class="va">students</span><span class="op">$</span><span class="va">final</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 5 1 4 3 2</code></pre>
<div class="sourceCode" id="cb1211"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">grade</span>, <span class="va">students</span><span class="op">$</span><span class="va">final</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 5 홍길동     1      M      50    86  FALSE 10
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 3 이철수     3      M      67    88  FALSE  7
#&gt; 2 김영희     4      F      82    77  FALSE  9</code></pre>
<p>그런데 우리는 학년은 낮은 학년부터 높은 학년으로 정렬하지만 기말고사는 높은 점수에서 낮은 점수로 정렬하고자 한다. order() 함수의 decreasing 인수를 TRUE로 하면 학년마저 높은 순에서 낮은 순으로 되니 원하는 결과를 얻을 수 없다.
이런 경우에는 첫번째 벡터는 그대로 두고, 두번째 벡터에 -1을 곱한 후 순서를 정렬하면 원하는 결과를 얻을 수 있다.</p>
<div class="sourceCode" id="cb1213"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">grade</span>, <span class="va">students</span><span class="op">$</span><span class="va">final</span>, decreasing<span class="op">=</span><span class="cn">T</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 2 김영희     4      F      82    77  FALSE  9
#&gt; 3 이철수     3      M      67    88  FALSE  7
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 5 홍길동     1      M      50    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1215"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/order.html">order</a></span><span class="op">(</span><span class="va">students</span><span class="op">$</span><span class="va">grade</span>, <span class="op">-</span><span class="va">students</span><span class="op">$</span><span class="va">final</span><span class="op">)</span>, <span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 5 홍길동     1      M      50    86  FALSE 10
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 3 이철수     3      M      67    88  FALSE  7
#&gt; 2 김영희     4      F      82    77  FALSE  9</code></pre>
</div>
</div>
<div id="subset을-이용한-필터링" class="section level3" number="6.4.3">
<h3>
<span class="header-section-number">6.4.3</span> subset()을 이용한 필터링<a class="anchor" aria-label="anchor" href="#subset%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%95%84%ED%84%B0%EB%A7%81"><i class="fas fa-link"></i></a>
</h3>
<p>subset()<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;참고로 이름이 비슷한 함수로 car 패키지의 subsets()라는 함수가 있다. 이 함수는 변수의 부분집합으로 회귀분석한 후, 그 결과를 그래프로 그리는 함수이다.&lt;/p&gt;"><sup>4</sup></a> 함수는 벡터, 행렬, 데이터 프레임에서 조건에 맞는 부분을 반환하는 함수이다. 지금까지 우리는 벡터, 행렬, 데이터 프레임을 필터링할 때, 인덱스 벡터를 이용하여 이를 수행하였다. 사실 데이터 처리에 필요한 거의 모든 작업은 subset()을 이용할 필요가 없이, 지금까지 설명한 인덱스 벡터를 이용하여 필터링을 수행하면 된다. 그러나 subset() 함수를 이용하면 지금까지의 필터링 방법을 좀 더 쉽게 할 수 있는 경우가 있다.
subset() 함수는 다음과 같은 형식을 가진다.</p>
<div id="subset" class="section level4 unnumbered">
<h4>subset()<a class="anchor" aria-label="anchor" href="#subset"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1217"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">subset</span>, <span class="va">select</span>, drop<span class="op">=</span><span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
<p>subset() 함수로 필터링하는 방법과 인덱스 벡터를 이용하는 필터링과의 차이점은 다음 3가지이다.</p>
<ul>
<li>조건에 부합하는 행을 필터링 할 때, subset() 함수는 subset 인수에 조건을 기술한다. 인덱스 벡터는 자연수, 음의 정수, 논리값, 문자열이 모두 가능하지만, subset에서는 논리값만 가능하다. subset에서는 열을 변수처럼 기술할 수 있기 때문에 행 필터링 조건을 인덱스 벡터를 이용하는 방법보다 좀 더 간편하게 기술할 수 있다.</li>
<li>subset() 함수를 이용한 필터링에서는 subset의 조건식의 결과가 NA인 경우는 FALSE로 평가하여 NA 행을 자동으로 제거한다. 인덱스 벡터를 이용하는 경우는 조건식의 결과가 NA이어도 그 행은 제거되지 않는다.</li>
<li>열을 필터링할 때, 인덱스 벡터를 이용한 필터링에서는 열의 번호나 이름으로 필터링할 열을 지정한다. 열의 이름으로 필터링 할 때는 반드시 문자열로 열의 이름이 표시된다. subset()의 경우 선택할 열은 select 인수로 표현하는데, 열의 이름을 따옴표 없이 변수처럼 그대로 기술한다. 그러면 열의 이름이 열의 번호로 대체되어 최종적으로 필터링이 수행된다.</li>
</ul>
<p>위에서 설명한 내용이 어떤 의미인지를 벡터, 행렬, 데이터 프레임의 경우에서 각각 살펴보도록 한다.</p>
</div>
<div id="subset을-이용한-벡터-필터링" class="section level4 unnumbered">
<h4>subset()을 이용한 벡터 필터링<a class="anchor" aria-label="anchor" href="#subset%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%B2%A1%ED%84%B0-%ED%95%84%ED%84%B0%EB%A7%81"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1218"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">9</span>, <span class="cn">NA</span>, <span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">x</span><span class="op">[</span><span class="va">x</span><span class="op">&gt;</span><span class="fl">6</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt; [1]  7  9 NA</code></pre>
<div class="sourceCode" id="cb1220"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">x</span><span class="op">&gt;</span> <span class="fl">6</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 7 9</code></pre>
<p>위의 예에서 보듯이 벡터를 필터링할 때, 인덱스 벡터를 이용하는 방법은 NA가 있는 경우 그 결과를 알 수 없으므로 필터링한 결과에도 NA로 표시한다. 그러나 subset() 함수는 NA를 자동으로 제거함을 알 수 있다.</p>
</div>
<div id="subset을-이용한-데이터-프레임-필터링" class="section level4 unnumbered">
<h4>subset()을 이용한 데이터 프레임 필터링<a class="anchor" aria-label="anchor" href="#subset%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84-%ED%95%84%ED%84%B0%EB%A7%81"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb1222"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span><span class="op">:</span><span class="op">-</span><span class="fl">5</span></span>
<span><span class="va">long.name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span></span>
<span><span class="va">long.name</span></span></code></pre></div>
<pre><code>#&gt;    x y  z
#&gt; 1  7 1 -1
#&gt; 2  9 2 -2
#&gt; 3 NA 3 -3
#&gt; 4  5 4 -4
#&gt; 5  2 5 -5</code></pre>
<div class="sourceCode" id="cb1224"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span></span>
<span><span class="va">long.name</span><span class="op">[</span><span class="va">long.name</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span><span class="fl">6</span>, <span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     x  y  z
#&gt; 1   7  1 -1
#&gt; 2   9  2 -2
#&gt; NA NA NA NA</code></pre>
<div class="sourceCode" id="cb1226"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">long.name</span>, <span class="va">x</span><span class="op">&gt;</span><span class="fl">6</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;   x y  z
#&gt; 1 7 1 -1
#&gt; 2 9 2 -2</code></pre>
<p>위의 예에서 보듯이 인덱스 벡터를 이용하는 경우에는 데이터 프레임의 열을 지정하기 위해서 <code>$</code> 앞에 데이터 프레임 이름을 일일이 지정해야 했다. 그러나 subset()의 경우 두번째 인수에 열을 그냥 변수처럼 기술한다.</p>
<p>인덱스 벡터를 이용하는 방법은 NA가 있는 경우 그 결과를 알 수 없으므로 필터링한 결과에도 NA로 표시한다. 그러나 subset() 함수는 NA를 자동으로 제거한다.</p>
<div class="sourceCode" id="cb1228"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">long.name</span><span class="op">[</span><span class="va">long.name</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span><span class="fl">6</span>, <span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     y  z
#&gt; 1   1 -1
#&gt; 2   2 -2
#&gt; NA NA NA</code></pre>
<div class="sourceCode" id="cb1230"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">long.name</span>, <span class="va">x</span><span class="op">&gt;</span><span class="fl">6</span>, <span class="va">y</span><span class="op">:</span><span class="va">z</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;   y  z
#&gt; 1 1 -1
#&gt; 2 2 -2</code></pre>
<div class="sourceCode" id="cb1232"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">long.name</span><span class="op">[</span><span class="va">long.name</span><span class="op">$</span><span class="va">x</span> <span class="op">&gt;</span><span class="fl">6</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"z"</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<pre><code>#&gt;     x  z
#&gt; 1   7 -1
#&gt; 2   9 -2
#&gt; NA NA NA</code></pre>
<div class="sourceCode" id="cb1234"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">long.name</span>, <span class="va">x</span><span class="op">&gt;</span><span class="fl">6</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">z</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;   x  z
#&gt; 1 7 -1
#&gt; 2 9 -2</code></pre>
<div class="sourceCode" id="cb1236"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">long.name</span>, <span class="va">x</span><span class="op">&gt;</span><span class="fl">6</span>, <span class="op">-</span><span class="va">z</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;   x y
#&gt; 1 7 1
#&gt; 2 9 2</code></pre>
<p>인덱스 벡터의 경우 열을 지정할 때 번호나 문자열 이름을 이용하였는데, subset()은 열의 이름을 변수처럼 사용하여 지정하고 있음을 알 수 있다. 앞서 설명하였듯이 변수처럼 사용된 열의 이름은 열의 위치를 나타내는 숫자로 변환되어 처리된다. 그렇기 때문에 y:z나 -z 등의 기술이 가능하다.</p>
</div>
</div>
</div>
<div id="데이터-프레임에-함수-적용하기" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> 데이터 프레임에 함수 적용하기<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%97%90-%ED%95%A8%EC%88%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0"><i class="fas fa-link"></i></a>
</h2>
<div id="리스트로서-각-열에-함수-적용하기" class="section level4 unnumbered">
<h4>리스트로서 각 열에 함수 적용하기<a class="anchor" aria-label="anchor" href="#%EB%A6%AC%EC%8A%A4%ED%8A%B8%EB%A1%9C%EC%84%9C-%EA%B0%81-%EC%97%B4%EC%97%90-%ED%95%A8%EC%88%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임은 리스트로서의 속성이 있기 때문에 lapply()나 sapply() 함수를 이용하여 열별로 함수를 적용할 수 있다.</p>
<div class="sourceCode" id="cb1238"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">students</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="va">mean</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; $midterm
#&gt; [1] 72.4
#&gt; 
#&gt; $final
#&gt; [1] 84</code></pre>
<div class="sourceCode" id="cb1240"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">students</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="va">mean</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; midterm   final 
#&gt;    72.4    84.0</code></pre>
<div class="sourceCode" id="cb1242"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html">sapply</a></span><span class="op">(</span><span class="va">students</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="va">summary</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;         midterm final
#&gt; Min.       50.0    77
#&gt; 1st Qu.    67.0    78
#&gt; Median     74.0    86
#&gt; Mean       72.4    84
#&gt; 3rd Qu.    82.0    88
#&gt; Max.       89.0    91</code></pre>
</div>
<div id="행렬-함수-적용하기" class="section level4 unnumbered">
<h4>행렬 함수 적용하기<a class="anchor" aria-label="anchor" href="#%ED%96%89%EB%A0%AC-%ED%95%A8%EC%88%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임은 행렬과 동일한 형식을 가지고 있기 때문에 행렬에서 사용했던 다양한 함수가 데이터 프레임에도 작동하는 경우가 많다.
다음은 행과 열의 길이를 알아내는 nrow()과 ncol() 함수, 그리고 행과 열을 전치시키는 t() 함수를 데이터 프레임에 적용한 예이다.</p>
<div class="sourceCode" id="cb1244"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">students</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 5</code></pre>
<div class="sourceCode" id="cb1246"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">students</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 7</code></pre>
<div class="sourceCode" id="cb1248"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">students</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;         [,1]     [,2]     [,3]     [,4]     [,5]    
#&gt; name    "김철수" "김영희" "이철수" "이영희" "홍길동"
#&gt; grade   "1"      "4"      "3"      "2"      "1"     
#&gt; gender  " M"     "F"      "M"      "F"      "M"     
#&gt; midterm "74"     "82"     "67"     "89"     "50"    
#&gt; final   "91"     "77"     "88"     "78"     "86"    
#&gt; retake  "TRUE"   "FALSE"  "FALSE"  "TRUE"   "FALSE" 
#&gt; hw      " 8"     " 9"     " 7"     " 8"     "10"</code></pre>
<p>행과 열이 전치된 데이터 프레임을 살펴보면 모든 열이 문자열 벡터로 변경되었음을 볼 수 있다. 데이터 프레임의 각 열은 모두 동일한 타입이어야 한다. 전치된 열은 논리값, 숫자, 문자가 모두 포함되어 있다. 따라서 이를 모두 수용할 수 있는 문자 행렬로 변환되었음을 볼 수 있다.</p>
</div>
<div id="apply로-행이나-열에-함수-적용하기" class="section level4 unnumbered">
<h4>apply()로 행이나 열에 함수 적용하기<a class="anchor" aria-label="anchor" href="#apply%EB%A1%9C-%ED%96%89%EC%9D%B4%EB%82%98-%EC%97%B4%EC%97%90-%ED%95%A8%EC%88%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임에도 apply() 함수를 적용할 수 있다. 그러나 여기서 주의할 점은 R은 apply() 함수를 적용하기 앞서 데이터 프레임을 행렬로 변환시킨다. 따라서 앞의 t() 함수의 적용 결과처럼 요소 중에 하나라도 문자가 있으면 모든 요소를 수용할 수 있는 문자 행렬로 변환하게 된다.</p>
<div class="sourceCode" id="cb1250"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">students</span>, <span class="fl">2</span>, <span class="va">mean</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;    name   grade  gender midterm   final  retake      hw 
#&gt;      NA      NA      NA      NA      NA      NA      NA</code></pre>
<div class="sourceCode" id="cb1252"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">students</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="fl">2</span>, <span class="va">mean</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; midterm   final 
#&gt;    72.4    84.0</code></pre>
<div class="sourceCode" id="cb1254"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html">apply</a></span><span class="op">(</span><span class="va">students</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>, <span class="fl">1</span>, <span class="va">sum</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 165 159 155 167 136</code></pre>
<p>첫번째 예에서는 students에 문자 열이 있어 모두 문자 행렬로 변환된다. 그러므로 mean이 적용될 수 없어서 경고와 함께 모두 NA의 값이 출력되었다.
그러나 중간과 기말고사 점수가 있는 부분만으로 부분 데이터 프레임을 만들어 apply()을 적용하면 모두 숫자이므로 숫자 행렬로 변환되어 결과가 잘 수행되었음을 알 수 있다.
따라서 열별로 함수를 적용할 때에는 행렬로 변환이 필요한 apply()보다는 lapply()나 sapply()를 바로 적용하는 것이 더 좋다.</p>
</div>
<div id="긴-데이터-프레임의-앞-또는-뒷-부분-출력하기" class="section level4 unnumbered">
<h4>긴 데이터 프레임의 앞 또는 뒷 부분 출력하기<a class="anchor" aria-label="anchor" href="#%EA%B8%B4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%98-%EC%95%9E-%EB%98%90%EB%8A%94-%EB%92%B7-%EB%B6%80%EB%B6%84-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임에만 적용되는 것은 아니지만 head()와 tail() 함수를 이용하면 긴 데이터 프레임의 앞 부분과 뒤 부분만을 쉽게 참조할 수 있다.</p>
<div class="sourceCode" id="cb1256"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 150</code></pre>
<div class="sourceCode" id="cb1258"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
#&gt; 1          5.1         3.5          1.4         0.2  setosa
#&gt; 2          4.9         3.0          1.4         0.2  setosa
#&gt; 3          4.7         3.2          1.3         0.2  setosa
#&gt; 4          4.6         3.1          1.5         0.2  setosa
#&gt; 5          5.0         3.6          1.4         0.2  setosa
#&gt; 6          5.4         3.9          1.7         0.4  setosa</code></pre>
<div class="sourceCode" id="cb1260"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
#&gt; 145          6.7         3.3          5.7         2.5 virginica
#&gt; 146          6.7         3.0          5.2         2.3 virginica
#&gt; 147          6.3         2.5          5.0         1.9 virginica
#&gt; 148          6.5         3.0          5.2         2.0 virginica
#&gt; 149          6.2         3.4          5.4         2.3 virginica
#&gt; 150          5.9         3.0          5.1         1.8 virginica</code></pre>
<p>iris 데이터는 R에서 제공하는 데이터인데 150 개의 관측치로 되어 있으므로 이를 화면에 다 출력하면 화면이 많이 스크롤되어서 데이터를 파악하기 힘들다. 이런 경우 head()나 tail()을 사용하여 데이터의 앞 또는 뒷 부분을 파악한다. 이 두 함수는 데이터 프레임의 앞과 뒤의 6줄을 반환한다.
다음처럼 n 인수를 사용하여 출력할 행의 수를 직접 지정할 수도 있다.</p>
<div class="sourceCode" id="cb1262"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">iris</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
#&gt; 1          5.1         3.5          1.4         0.2  setosa
#&gt; 2          4.9         3.0          1.4         0.2  setosa
#&gt; 3          4.7         3.2          1.3         0.2  setosa</code></pre>
<div class="sourceCode" id="cb1264"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">iris</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
#&gt; 149          6.2         3.4          5.4         2.3 virginica
#&gt; 150          5.9         3.0          5.1         1.8 virginica</code></pre>
</div>
</div>
<div id="dataFileImport" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> 파일에서 데이터 읽어오기<a class="anchor" aria-label="anchor" href="#dataFileImport"><i class="fas fa-link"></i></a>
</h2>
<p>규모가 큰 데이터는 R 콘솔에서 직접 입력하기보다는 파일에서 불러오는 경우가 많다. R에서는 주로 텍스트 파일이나 Excel의 데이터를 읽어오는 경우가 많다.</p>
<div id="텍스트-파일에서-데이터-읽어오기" class="section level3" number="6.6.1">
<h3>
<span class="header-section-number">6.6.1</span> 텍스트 파일에서 데이터 읽어오기<a class="anchor" aria-label="anchor" href="#%ED%85%8D%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%BD%EC%96%B4%EC%98%A4%EA%B8%B0"><i class="fas fa-link"></i></a>
</h3>
<p>텍스트에 있는 모든 데이터를 데이터 프레임에 저장하려는 경우 read.table() 함수를 이용하면 편리하다.</p>
<p>파일을 불러오기 전에 주의할 점은 파일의 이름만으로 파일을 읽어오고 싶으면 현재의 작업 디렉토리(폴더)에 파일이 있어야 한다는 것이다. 그렇지 않은 경우에는 파일의 절대 경로를 모두 써 주어야만 읽어올 수 있다.</p>
<div id="작업-디렉토리-설정" class="section level4 unnumbered">
<h4>작업 디렉토리 설정<a class="anchor" aria-label="anchor" href="#%EC%9E%91%EC%97%85-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EC%84%A4%EC%A0%95"><i class="fas fa-link"></i></a>
</h4>
<p>R 윈도우 버전에서 작업 디렉터리의 변경은 [파일]-[작업디렉토리변경] 메뉴를 이용하면 된다. RStudio에서는 [Session]-[Set Working Directory]-[Choose Directory] 메뉴를 이용하면 된다. 현재의 작업 디렉터리가 어디인지를 알기 위해서는 getwd() 명령을 이용하면 된다. 현재 작업 디렉터리의 파일을 보고 싶으면 list.files() 명령을 이용한다.</p>
<p>R 명령으로 작업 디렉터리를 변경하려면 setwd()를 이용한다. 다음은 getwd()로 현재 작업 디렉토리를 얻은 후 setwd()로 data라는 하위 디렉토리(폴더)로 작업 디렉토리를 변경하고, 그 안에 있는 파일 목록을 확인한 예이다.</p>
<div class="sourceCode" id="cb1266"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">WD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">WD</span>, <span class="st">"data"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html">list.files</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"txt"</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "courses2.txt"         "scores_no_header.txt" "scores_rn.txt"       
#&gt; [4] "scores.txt"           "students.txt"</code></pre>
<p>텍스트 파일을 읽어들이는 예제는 다음 파일을 사용하니 예제를 따라하고자 하는 분들은 내려받기를 하자.</p>
<a href="data:application/zip;base64,UEsDBBQAAgAIAMqMN0kGxCl30AAAAFkBAAAMAAAAY291cnNlczIudHh0U6pMTSxSUlAqTs1NLS5JBTGTM1NAZF5ibiqILkpNySwpBrIy8kuLipV4uYwUDBWUvAKMjMwNgaKvNu19M6PxbdvWV5tbHrUuUFIwUjBGUmNqBFfzZsHU15u3vOme86ZrydvWOUoKxgomIJVGUNOMMExbCDcNqsbUGKjm9fKON3sa3va0Qk0whtllgjDh1eY9b6fORFdgboJmRbB++JvuJW+6toJUGoNUwiwyB6nc0fFmDlDZVmSjoArMjBH+6p7zet2a1ws63szd8qZ1BlQlAFBLAwQKAAIAAAAkkxtRHMQCdCEAAAAhAAAAFAAAAHNjb3Jlc19ub19oZWFkZXIudHh07ISc7Jq4CTI1DQrrjIDsoIQJMzUNCuyynOyViAk0Mg0KUEsDBAoAAgAAACSTG1FeTF8oOwAAADsAAAANAAAAc2NvcmVzX3JuLnR4dCAgICBwcm92CXNjb3Jlcw0KMTAJ7ISc7Jq4CTI1DQoyMAnrjIDsoIQJMzUNCjMwCeyynOyViAk0Mg0KUEsDBAoAAgAAABSkG1HO8koXMgAAADIAAAAKAAAAc2NvcmVzLnR4dHByb3YgIHNjb3Jlcw0K7ISc7Jq4ICAyNQ0K64yA7KCEICAzNQ0K7LKc7JWIICA0Mg0KUEsDBBQAAgAIAK2yJlfvZW+VpgAAANgAAAAMAAAAc3R1ZGVudHMudHh0U8pLzE1VUlBKL0pMAdOpeSmpRUBGbmZKSWpRLpCVlpmXmAOki1JLErNBajLKlbiUXu1seLNpwZuOGUoKhgpKCr5KCuYmCpaGCiFBoa4KFhD5GY1v565RUjBRUHJTUrAwUjA3V3Bz9Al2VbDkUnozdwtMv7GCElC7mbmChQVU3hwiD9VvBNFvqWBuATf+7czeVzt2vO6fCbYeqN3UQMHCDKrd0IALAFBLAQIeAxQAAgAIAMqMN0kGxCl30AAAAFkBAAAMAAAAAAAAAAEAAAC0gQAAAABjb3Vyc2VzMi50eHRQSwECHgMKAAIAAAAkkxtRHMQCdCEAAAAhAAAAFAAAAAAAAAABAAAApIH6AAAAc2NvcmVzX25vX2hlYWRlci50eHRQSwECHgMKAAIAAAAkkxtRXkxfKDsAAAA7AAAADQAAAAAAAAABAAAApIFNAQAAc2NvcmVzX3JuLnR4dFBLAQIeAwoAAgAAABSkG1HO8koXMgAAADIAAAAKAAAAAAAAAAEAAACkgbMBAABzY29yZXMudHh0UEsBAh4DFAACAAgArbImV+9lb5WmAAAA2AAAAAwAAAAAAAAAAQAAAKSBDQIAAHN0dWRlbnRzLnR4dFBLBQYAAAAABQAFACkBAADdAgAAAAA=" download="courses2.zip">텍스트 파일 내려받기</a>
</div>
<div id="머리-행이-있는-텍스트-데이터-파일-읽기" class="section level4 unnumbered">
<h4>머리 행이 있는 텍스트 데이터 파일 읽기<a class="anchor" aria-label="anchor" href="#%EB%A8%B8%EB%A6%AC-%ED%96%89%EC%9D%B4-%EC%9E%88%EB%8A%94-%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8C%8C%EC%9D%BC-%EC%9D%BD%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>다음처럼 파일에 있는 데이터가 첫 행은 각 항목의 이름이고 둘째 행부터 데이터가 있는 경우를 먼저 살펴보자.</p>
<pre><code>#&gt; prov  scores
#&gt; 서울  25
#&gt; 대전  35
#&gt; 천안  42</code></pre>
<p>데이터 파일이 작업 디렉토리(폴더) 밑에 <code>scores.txt</code>로 저장되어 있다면 read.table() 함수를 이용하여 다음과 같이 header=TRUE 인수로 데이터 프레임으로 읽어올 수 있다.</p>
<div class="sourceCode" id="cb1269"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prov.scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="st">"scores.txt"</span>, header<span class="op">=</span><span class="cn">TRUE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="va">prov.scores</span></span></code></pre></div>
<pre><code>#&gt;   prov scores
#&gt; 1 서울     25
#&gt; 2 대전     35
#&gt; 3 천안     42</code></pre>
<div class="sourceCode" id="cb1271"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html">attributes</a></span><span class="op">(</span><span class="va">prov.scores</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; $names
#&gt; [1] "prov"   "scores"
#&gt; 
#&gt; $class
#&gt; [1] "data.frame"
#&gt; 
#&gt; $row.names
#&gt; [1] 1 2 3</code></pre>
<p>위 결과에서 보면 파일에서 데이터를 읽어와 데이터 프레임을 생성했고, 첫 행에 나와 있는 항목 이름을 데이터 프레임 각 열의 이름으로 하고 있다. 행의 이름으로는 1, 2, 3의 순서로 행 번호를 자동 부여했다. 각 행의 데이터는 공백 문자를 기준으로 구분을 하였다.</p>
<p>앞의 명령어에서 <code>fileEncoding</code> 인수는 텍스트 파일이 어떤 문자 인코딩으로 저장되어 있는지를 지정한 것이다. 윈도우즈를 제외한 대부분의 시스템에서는 UTF-8 형식으로 텍스트 파일을 저장하지만, 한글 윈도우는 CP949 (EUC-KR)로 텍스트를 인코딩 한다. 여러 시스템 간의 호환성을 위하여 이 책에서는 텍스트 데이터를 UTF-8으로 저장하고 읽어들이기로 한다. read.table() 함수 등은 시스템의 디폴트 인코딩을 사용하여 데이터를 읽어 온다. 한글 윈도우즈의 디폴트 인코딩은 CP949이므로 UTF-8으로 텍스트 데이터를 처리하기 위하여 <code>fileEncoding</code> 인수를 지정하였다.</p>
</div>
<div id="행-이름이-있는-텍스트-데이터-파일-읽기" class="section level4 unnumbered">
<h4>행 이름이 있는 텍스트 데이터 파일 읽기<a class="anchor" aria-label="anchor" href="#%ED%96%89-%EC%9D%B4%EB%A6%84%EC%9D%B4-%EC%9E%88%EB%8A%94-%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8C%8C%EC%9D%BC-%EC%9D%BD%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>다음 예는 파일에 데이터의 행 번호 또는 이름이 부여되어 있는 경우이다. 이 같은 경우에는 첫 행에 행 번호를 나타내는 이름은 표시하지 않는다. 따라서 첫 행과 다른 행은 항목의 수가 하나 차이가 난다.</p>
<pre><code>#&gt;     prov scores
#&gt; 10   서울  25
#&gt; 20   대전  35
#&gt; 30   천안  42</code></pre>
<p>이와 같은 형식의 파일이 작업 디렉토리 밑의 <code>scores_rn.txt</code>에 저장되어 있는 경우에도 같은 방식으로 데이터를 데이터 프레임으로 읽어온다. 다음에서 볼 수 있듯이 행 번호로 파일의 첫 번째 열의 값이 사용되었다. 그리고 read.table() 함수에서 header 인수를 사용하지 않았다. 항목이 하나 적은 것으로 첫 번째 행이 머리행인 것을 자동 인식하기 때문이다.</p>
<div class="sourceCode" id="cb1274"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prov.scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="st">"scores_rn.txt"</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="va">prov.scores</span></span></code></pre></div>
<pre><code>#&gt;    prov scores
#&gt; 10 서울     25
#&gt; 20 대전     35
#&gt; 30 천안     42</code></pre>
</div>
<div id="머리-행이-없는-텍스트-데이터-파일-읽기" class="section level4 unnumbered">
<h4>머리 행이 없는 텍스트 데이터 파일 읽기<a class="anchor" aria-label="anchor" href="#%EB%A8%B8%EB%A6%AC-%ED%96%89%EC%9D%B4-%EC%97%86%EB%8A%94-%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8C%8C%EC%9D%BC-%EC%9D%BD%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>위의 결과에서 파일에 있는 행 번호가 데이터 프레임에 이용되었음을 볼 수 있다. read.table() 함수는 머리 행이 없는 텍스트 파일에서도 데이터를 읽어들일 수 있다. 다음과 같은 <code>scores_no_header.txt</code> 파일이 작업 디렉토리에 저장되어 있다고 하자.</p>
<pre><code>#&gt; 서울   25
#&gt; 대전   35
#&gt; 천안   42</code></pre>
<p>다음 명령문은 <code>scores_no_header.txt</code> 데이터 파일을 데이터 프레임으로 읽어들인 예이다. 열의 이름이 임의로 붙여졌음을 볼 수 있다.</p>
<div class="sourceCode" id="cb1277"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prov.scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="st">"scores_no_header.txt"</span>, header<span class="op">=</span><span class="cn">FALSE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="va">prov.scores</span></span></code></pre></div>
<pre><code>#&gt;     V1 V2
#&gt; 1 서울 25
#&gt; 2 대전 35
#&gt; 3 천안 42</code></pre>
</div>
<div id="edit" class="section level4 unnumbered">
<h4>edit()<a class="anchor" aria-label="anchor" href="#edit"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임에서 데이터를 편집하고 싶으면 edit() 함수를 이용한다. 다음 명령을 수행하면 데이터 프레임이 스프레드시트 형태로 나타나 수정이 가능하다. 편집창에서 수정 후 편집창을 닫으면 변경한 내용이 반영되어 새로운 데이터 프레임 prov.scores.new가 생성된다.</p>
<div class="sourceCode" id="cb1279"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prov.scores.new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/edit.html">edit</a></span><span class="op">(</span><span class="va">prov.scores</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="csv-파일에서-데이터-읽어오기" class="section level3" number="6.6.2">
<h3>
<span class="header-section-number">6.6.2</span> CSV 파일에서 데이터 읽어오기<a class="anchor" aria-label="anchor" href="#csv-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%BD%EC%96%B4%EC%98%A4%EA%B8%B0"><i class="fas fa-link"></i></a>
</h3>
<div id="csv-파일" class="section level4 unnumbered">
<h4>CSV 파일<a class="anchor" aria-label="anchor" href="#csv-%ED%8C%8C%EC%9D%BC"><i class="fas fa-link"></i></a>
</h4>
<p>많은 경우 데이터가 Excel로 저장되어 있다. Excel에서 데이터를 읽어오기 위해서는 먼저 Excel 파일을 CSV 형태의 파일로 작업 디렉토리에 저장하여야 한다.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;Excel 파일 형식으로 바로 데이터를 읽어들이기 위해서는 readxl 패키지의 read_excel() 함수를 이용하면 된다. 관심있는 독자는 웹 검색을 해 보면 관련 자료를 쉽게 찾을 수 있을 것이다.&lt;/p&gt;"><sup>5</sup></a> CSV 파일은 데이터의 각 필드가 쉼표로 분리되어 있는 파일이다. 대부분의 통계 패키지뿐 아니라 다수의 SW에서 지원하는 파일 형식이다. Excel의 버전에 따라 저장방식이 조금 차이가 있을 수 있으나, 대부분 ’다른 이름으로 저장’에서 파일 형식을 CSV 형식으로 지정해 주면 된다.</p>
<p>CSV 파일을 읽어들이는 예제는 다음 파일을 사용하니 예제를 따라하고자 하는 독자는 내려받도록 하자.</p>
<a href="data:text/csv;base64,Q291bnRyeSxZZWFyLE1hbGVzLEZlbWFsZXMNCkFMQkFOSUEsMyw0LjcsMy4zDQpBTlRJR1VBIEFORCBCQVJCVURBLDk1LDAsMA0KQVJHRU5USU5BLDgsMTIuNiwzDQpBUk1FTklBLDgsMi44LDEuMQ0KQVVTVFJBTElBLDYsMTIuOCwzLjYNCkFVU1RSSUEsOSwyMy44LDcuMQ0KQVpFUkJBSUpBTiw3LDEsMC4zDQpCQUhBTUFTLDUsMS45LDAuNg0KQkFIUkFJTiw2LDQsMy41DQpCQVJCQURPUyw2LDcuMywwDQpCRUxBUlVTLDcsNDguNyw4LjgNCkJFTEdJVU0sNSwyOC44LDEwLjMNCkJFTElaRSw4LDYuNiwwLjcNCkJPU05JQSBBTkQgSEVSWkVHT1ZJTkEsOTEsMjAuMywzLjMNCkJSQVpJTCw4LDcuNywyDQpCVUxHQVJJQSw4LDE4LjgsNi4yDQpDQU5BREEsNCwxNy4zLDUuNA0KQ0hJTEUsNywxOC4yLDQuMg0KQ0hJTkEgKFNlbGVjdGVkIHJ1cmFsICYgdXJiYW4gYXJlYXMpLDk5LDEzLDE0LjgNCkNISU5BIChIb25nIEtvbmcgU0FSKSw5LDE5LDEwLjcNCkNPTE9NQklBLDcsNy45LDINCkNPU1RBIFJJQ0EsOSwxMC4yLDEuOQ0KQ1JPQVRJQSw5LDI4LjksNy41DQpDVUJBLDgsMTksNS41DQpDWVBSVVMsOCw3LjQsMS43DQpDWkVDSCBSRVBVQkxJQyw5LDIzLjksNC40DQpERU5NQVJLLDYsMTcuNSw2LjQNCkRPTUlOSUNBTiBSRVBVQkxJQyw1LDMuOSwwLjcNCkVDVUFET1IsOSwxMC41LDMuNg0KRUdZUFQsOSwwLjEsMA0KRUwgU0FMVkFET1IsOCwxMi45LDMuNg0KRVNUT05JQSw4LDMwLjYsNy4zDQpGSU5MQU5ELDksMjksMTANCkZSQU5DRSw3LDI0LjcsOC41DQpHRU9SR0lBLDksNy4xLDEuNw0KR0VSTUFOWSw2LDE3LjksNg0KR1JFRUNFLDksNiwxDQpHUkVOQURBLDgsMCwwDQpHVUFURU1BTEEsOCw1LjYsMS43DQpHVVlBTkEsNiwzOSwxMy40DQpIQUlUSSwzLDAsMA0KSE9ORFVSQVMsNzgsMCwwDQpIVU5HQVJZLDksNDAsMTAuNg0KSUNFTEFORCw4LDE2LjUsNw0KSU5ESUEsOSwxMyw3LjgNCklSQU4sOTEsMC4zLDAuMQ0KSVJFTEFORCw5LDE5LDQuNw0KSVNSQUVMLDcsNywxLjUNCklUQUxZLDcsMTAsMi44DQpKQU1BSUNBLDkwLDAuMywwDQpKQVBBTiw5LDM2LjIsMTMuMg0KSk9SREFOLDgsMC4yLDANCktBWkFLSFNUQU4sOCw0Myw5LjQNCktVV0FJVCw5LDEuOSwxLjcNCktZUkdZWlNUQU4sOSwxNC4xLDMuNg0KTEFUVklBLDksNDAsOC4yDQpMSVRIVUFOSUEsOSw2MS4zLDEwLjQNCkxVWEVNQk9VUkcsOCwxNi4xLDMuMg0KTUFMRElWRVMsNSwwLjcsMA0KTUFMVEEsOCw1LjksMQ0KTUFVUklUSVVTLDgsMTEuOCwxLjkNCk1FWElDTyw4LDcsMS41DQpORVRIRVJMQU5EUyw5LDEzLjEsNS41DQpORVcgWkVBTEFORCw3LDE4LjEsNS41DQpOSUNBUkFHVUEsNiw5LDIuNg0KTk9SV0FZLDksMTcuMyw2LjUNClBBTkFNQSw4LDksMS45DQpQQVJBR1VBWSw4LDUuMSwyDQpQRVJVLDcsMS45LDENClBISUxJUFBJTkVTLDkzLDIuNSwxLjcNClBPTEFORCw4LDI2LjQsNC4xDQpQT1JUVUdBTCw5LDE1LjYsNA0KUFVFUlRPIFJJQ08sNSwxMy4yLDINClJFUFVCTElDIE9GIEtPUkVBLDksMzkuOSwyMi4xDQpSRVBVQkxJQyBPRiBNT0xET1ZBLDgsMzAuMSw1LjYNClJPTUFOSUEsOSwyMSwzLjUNClJVU1NJQU4gRkVERVJBVElPTiw2LDUzLjksOS41DQpTQUlOVCBLSVRUUyBBTkQgTkVWSVMsOTUsMCwwDQpTQUlOVCBMVUNJQSw1LDQuOSwwDQpTQUlOVCBWSU5DRU5UIEFORCBUSEUgR1JFTkFESU5FUyw4LDUuNCwxLjkNClNBTyBUT01FIEFORCBQUklOQ0lQRSw4NywwLDEuOA0KU0VSQklBLDksMjguMSwxMA0KU0VZQ0hFTExFUyw4LDguOSwwDQpTSU5HQVBPUkUsNiwxMi45LDcuNw0KU0xPVkFLSUEsNSwyMi4zLDMuNA0KU0xPVkVOSUEsOSwzNC42LDkuNA0KU09VVEggQUZSSUNBLDcsMS40LDAuNA0KU1BBSU4sOCwxMS45LDMuNA0KU1JJIExBTktBLDkxLDQ0LjYsMTYuOA0KU1VSSU5BTUUsNSwyMy45LDQuOA0KU1dFREVOLDgsMTguNyw2LjgNClNXSVRaRVJMQU5ELDcsMjQuOCwxMS40DQpTWVJJQU4gQVJBQiBSRVBVQkxJQyw4NSwwLjIsMA0KVEFKSUtJU1RBTiwxLDIuOSwyLjMNClRIQUlMQU5ELDIsMTIsMy44DQpURllSIE1BQ0VET05JQSwzLDkuNSw0DQpUUklOSURBRCBBTkQgVE9CQUdPLDYsMTcuOSwzLjgNClRVUktNRU5JU1RBTiw5OCwxMy44LDMuNQ0KVUtSQUlORSw5LDM3LjgsNw0KVU5JVEVEIEtJTkdET00sOSwxMC45LDMNClVOSVRFRCBTVEFURVMgT0YgQU1FUklDQSw1LDE3LjcsNC41DQpVUlVHVUFZLDQsMjYsNi4zDQpVWkJFS0lTVEFOLDUsNywyLjMNClZFTkVaVUVMQSw3LDUuMywxLjINClpJTUJBQldFLDkwLDEwLjYsNS4yDQo=" download="suicide_rates.csv">Download suicide_rates.csv</a>
</div>
<div id="read.csv" class="section level4 unnumbered">
<h4>read.csv()<a class="anchor" aria-label="anchor" href="#read.csv"><i class="fas fa-link"></i></a>
</h4>
<p>R에서 CSV 파일을 읽어오는 함수는 read.csv()이다. 다음은 각 국의 자살률에 대한 성별, 조사년도 데이터를 읽어온 예이다. 총 105개의 데이터인데 처음 몇 개의 데이터만 출력하여 보이고 있다.</p>
<div class="sourceCode" id="cb1280"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span>file<span class="op">=</span><span class="st">"suicide_rates.csv"</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">sr</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 105</code></pre>
<div class="sourceCode" id="cb1282"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">sr</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;               Country Year Males Females
#&gt; 1             ALBANIA    3   4.7     3.3
#&gt; 2 ANTIGUA AND BARBUDA   95   0.0     0.0
#&gt; 3           ARGENTINA    8  12.6     3.0
#&gt; 4             ARMENIA    8   2.8     1.1
#&gt; 5           AUSTRALIA    6  12.8     3.6
#&gt; 6             AUSTRIA    9  23.8     7.1</code></pre>
<p>참고로 이 예에서는 영어로 된 파일이므로 파일 인코딩을 지정하지 않아도 된다.</p>
<p>사실 read.csv() 함수는 read.table()의 wrapper 함수로서 header=TRUE, sep=‘,’ 인수로 read.table() 함수를 호출하기만 한다. 따라서 다음처럼 read.table() 함수를 이용해서도 CSV 파일을 읽어들일 수 있다. 이 때 주의할 점은 함수 호출 시 header=TRUE, sep=‘,’ 인수를 지정해야 한다는 것이다.</p>
<div class="sourceCode" id="cb1284"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sr2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span>file<span class="op">=</span><span class="st">"suicide_rates.csv"</span>, header<span class="op">=</span><span class="cn">TRUE</span>, sep<span class="op">=</span><span class="st">","</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">sr2</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 105</code></pre>
<div class="sourceCode" id="cb1286"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">sr2</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;               Country Year Males Females
#&gt; 1             ALBANIA    3   4.7     3.3
#&gt; 2 ANTIGUA AND BARBUDA   95   0.0     0.0
#&gt; 3           ARGENTINA    8  12.6     3.0
#&gt; 4             ARMENIA    8   2.8     1.1
#&gt; 5           AUSTRALIA    6  12.8     3.6
#&gt; 6             AUSTRIA    9  23.8     7.1</code></pre>
</div>
<div id="read.csv와-관련된-흔한-실수" class="section level4 unnumbered">
<h4>read.csv()와 관련된 흔한 실수<a class="anchor" aria-label="anchor" href="#read.csv%EC%99%80-%EA%B4%80%EB%A0%A8%EB%90%9C-%ED%9D%94%ED%95%9C-%EC%8B%A4%EC%88%98"><i class="fas fa-link"></i></a>
</h4>
<p>read.csv() 함수를 이용할 때 초보자가 가장 자주 하는 실수가 일반 텍스트 파일인데 read.csv() 함수로 데이터를 읽어들이는 것이다. 다음은 공백으로 필드가 구분된 scores.txt 파일을 read.table()과 read.csv() 함수로 각각 읽어들인 결과이다.</p>
<div class="sourceCode" id="cb1288"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prov.scores</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="st">"scores.txt"</span>, header<span class="op">=</span><span class="cn">TRUE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="va">prov.scores</span></span></code></pre></div>
<pre><code>#&gt;   prov scores
#&gt; 1 서울     25
#&gt; 2 대전     35
#&gt; 3 천안     42</code></pre>
<div class="sourceCode" id="cb1290"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prov.scores.csv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"scores.txt"</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="va">prov.scores.csv</span></span></code></pre></div>
<pre><code>#&gt;   prov..scores
#&gt; 1     서울  25
#&gt; 2     대전  35
#&gt; 3     천안  42</code></pre>
<p>출력해 보면 두 결과가 유사해 보인다. 그러나 읽어들여진 데이터로 작업을 해보면 read.csv() 파일로 읽어들인 데이터로는 제대로 된 작업이 수행되지 않음을 알 수 있다. 먼저 두 데이터에서 scores 열에 대한 평균을 내 보자.</p>
<div class="sourceCode" id="cb1292"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">prov.scores</span><span class="op">$</span><span class="va">scores</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 34</code></pre>
<div class="sourceCode" id="cb1294"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">prov.scores.csv</span><span class="op">$</span><span class="va">scores</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; Warning in mean.default(prov.scores.csv$scores): 인자가 수치형 또는 논리형이
#&gt; 아니므로 NA를 반환합니다</code></pre>
<pre><code>#&gt; [1] NA</code></pre>
<p>결과에서 보듯이 read.table()로 읽어들인 데이터 프레임에서는 원하는 결과를 얻을 수 있지만 read.csv()로 읽어들인 데이터 프레임에서는 그렇지 않았다. 그 이유는 read.csv()는 데이터 열이 쉼표로 분리된 것으로 가정하므로 한 줄의 데이터를 읽어들인 후 쉼표를 발견할 수 없어서 모두 하나의 열로 처리를 했기 때문이다. 하나가 된 데이터에는 문자와 숫자가 모두 포함되어 있으므로 이를 모두 처리할 수 있는 문자 벡터로 데이터를 저장하게 된다. 따라서 숫자 데이터 처리 함수인 mean()을 적용할 때 오류가 난 것이다. 이는 두 데이터 프레임의 열의 개수와 이름 등을 확인해 보면 쉽게 확인할 수 있다.</p>
<div class="sourceCode" id="cb1297"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">prov.scores</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<div class="sourceCode" id="cb1299"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">prov.scores</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "prov"   "scores"</code></pre>
<div class="sourceCode" id="cb1301"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html">ncol</a></span><span class="op">(</span><span class="va">prov.scores.csv</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<div class="sourceCode" id="cb1303"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">prov.scores.csv</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "prov..scores"</code></pre>
</div>
</div>
<div id="excel-파일에서-데이터-읽기" class="section level3" number="6.6.3">
<h3>
<span class="header-section-number">6.6.3</span> Excel 파일에서 데이터 읽기<a class="anchor" aria-label="anchor" href="#excel-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%BD%EA%B8%B0"><i class="fas fa-link"></i></a>
</h3>
<p>Excel에는 Excel 파일을 CSV 파일로 저장하는 기능이 있다.
이 기능을 사용하여 CSV 파일로 변환을 하면 앞에서 설명한 <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code> 함수를 이용하여 Excel 데이터를 읽어들일 수 있다.
만약 Excel 데이터를 변환 없이 그대로 읽어들이고 싶으면, <code>readxl</code> 패키지의 <code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> 함수를 사용한다.
<code>readxl</code> 패키지가 설치되어 있지 않다면 다음 명령이나 RStudio의 Packages 패널의 기능을 사용하여 설치한다.</p>
<div class="sourceCode" id="cb1305"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"readxl"</span><span class="op">)</span></span></code></pre></div>
<a href="data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,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" download="dataMerge.xlsx">Download dataMerge.xlsx</a>
<p>위의 파일을 내려받으면, 다음과 같이, 4 개의 워크시트가 있는 Excel 파일에서 project라는 이름의 워크시트를 데이터프레임으로 읽어들이는 예를 살펴보자.</p>
<div class="inline-figure"><img src="img/dataMerge.png" width="90%" style="display: block; margin: auto;"></div>
<p><code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> 함수는 첫 번째 인수로 파일명을, 두 번째 <code>sheet</code> 인수로 읽어들일 워크시트를 지정한다.
(<code><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel()</a></code> 함수는 데이터를 <code>tibble</code>이라는 일종의 개량된 data.frame 형식으로 저장한다. 그렇기 때문에 출력 결과과 일반 data.frame과 조금 다르다.)</p>
<div class="sourceCode" id="cb1306"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="va">project</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"dataMerge.xlsx"</span>, sheet <span class="op">=</span> <span class="st">"project"</span><span class="op">)</span> </span>
<span><span class="va">project</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 4 × 2
#&gt;   Team  Project
#&gt;   &lt;chr&gt;   &lt;dbl&gt;
#&gt; 1 A          80
#&gt; 2 B          90
#&gt; 3 C          85
#&gt; 4 D          75</code></pre>
<p><code>sheet</code> 인수에 아무것도 지정하지 않으면, 맨 처음 워크시트의 데이터를 읽어들인다.</p>
<div class="sourceCode" id="cb1308"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">class1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_excel</a></span><span class="op">(</span><span class="st">"dataMerge.xlsx"</span><span class="op">)</span> </span>
<span><span class="va">class1</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 5 × 6
#&gt;   ID    Name   Adress Midterm Final Team 
#&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;
#&gt; 1 015   김철수 서울        78    59 A    
#&gt; 2 018   김영희 경기        85    87 A    
#&gt; 3 025   이철수 충남        80    70 B    
#&gt; 4 034   이영희 대전        92    89 B    
#&gt; 5 151   홍길동 세종        58    66 B</code></pre>
</div>
</div>
<div id="데이터-프레임을-파일로-쓰기" class="section level2" number="6.7">
<h2>
<span class="header-section-number">6.7</span> 데이터 프레임을 파일로 쓰기<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%84-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EC%93%B0%EA%B8%B0"><i class="fas fa-link"></i></a>
</h2>
<div id="write.table과-write.csv" class="section level4 unnumbered">
<h4>write.table()과 write.csv()<a class="anchor" aria-label="anchor" href="#write.table%EA%B3%BC-write.csv"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임의 작업 결과를 추후에 다시 이용하기 위해서, 또는 다른 통계 패키지에서 작업 결과를 이용하기 위해서는 데이터 프레임을 파일로 저장할 수 있어야 한다. 이 경우 <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code>과 <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code> 함수를 이용하면 데이터 프레임을 파일에 저장할 수 있다.</p>
<p>다음 <code>sr</code> 데이터프레임에 남자(<code>Males</code>)와 여자(<code>Females</code>)의 자살률의 산술 평균을 <code>Avg</code> 열로 추가한 후, 그 결과를 <code>sr.csv</code>라는 파일로 저장하는 예이다.</p>
<div class="sourceCode" id="cb1310"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sr</span><span class="op">$</span><span class="va">Avg</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">sr</span><span class="op">$</span><span class="va">Males</span> <span class="op">+</span> <span class="va">sr</span><span class="op">$</span><span class="va">Females</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">sr</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;               Country Year Males Females   Avg
#&gt; 1             ALBANIA    3   4.7     3.3  4.00
#&gt; 2 ANTIGUA AND BARBUDA   95   0.0     0.0  0.00
#&gt; 3           ARGENTINA    8  12.6     3.0  7.80
#&gt; 4             ARMENIA    8   2.8     1.1  1.95
#&gt; 5           AUSTRALIA    6  12.8     3.6  8.20
#&gt; 6             AUSTRIA    9  23.8     7.1 15.45</code></pre>
<div class="sourceCode" id="cb1312"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">sr</span>, file <span class="op">=</span> <span class="st">"sr.csv"</span><span class="op">)</span></span></code></pre></div>
<p>작업 디렉토리에 저장된 <code>sr.csv</code> 파일을 열어보면 다음처럼 행번호도 함께 저장된 것을 확인할 수 있다.</p>
<pre><code>#&gt; "","Country","Year","Males","Females","Avg"
#&gt; "1","ALBANIA",3,4.7,3.3,4
#&gt; "2","ANTIGUA AND BARBUDA",95,0,0,0
#&gt; "3","ARGENTINA",8,12.6,3,7.8
#&gt; "4","ARMENIA",8,2.8,1.1,1.95</code></pre>
<p>행번호를 제외하고 파일에 데이터를 저장하려면 <code>row.names=F</code>로 설정한다.</p>
<div class="sourceCode" id="cb1314"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">sr</span>, file <span class="op">=</span> <span class="st">"sr2.csv"</span>, row.names <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<p>작업 디렉토리에 저장된 <code>sr2.csv</code> 파일을 열어보면 이번에는 행번호가 저장되지 않은 것을 확인할 수 있다.</p>
<pre><code>#&gt; "Country","Year","Males","Females","Avg"
#&gt; "ALBANIA",3,4.7,3.3,4
#&gt; "ANTIGUA AND BARBUDA",95,0,0,0
#&gt; "ARGENTINA",8,12.6,3,7.8
#&gt; "ARMENIA",8,2.8,1.1,1.95</code></pre>
<p>만약 데이터에 영어와 숫자 이외에 한글 등이 포함되어 있으면 파일의 인코딩을 지정하여 저장하여 저장하는 것이 좋다.
다음 예제에서 사용하는 students는 앞선 예제에서 만든 데이터 프레임이다.
만약 이 데이터 프레임이 현재 R 세션에 없다면, 다음 students.RData 파일을 RStudio로 적재하면 students 객체가 생성될 것이다.</p>
<a href="data:application/octet-stream;base64,H4sIAAAAAAAAAwtyiTDmiuBiYGBgZmBhYmRgZgUyGVhDQ9x0LRiAIkAOIwMLAyeQ5iguKU1JzSspBqoVBvLZgVgApJiBoQEkz/lqZ8ObTQvedMxAFpjR+HbuGpjAm7lbUFWABFBUvJ3Z+2rHjtf9M4EcPpDh9h8YwMBBAEpzQGkIxQCThzsG4lgmBV8oi9ENxsAmArXFIagBYmoIlA44AKHDIPY4eMJtgagPg8oHQ+XDoK4KhuoPbYCp54IEETAYEQDGhpilANWrBKVloDRMXAWmDSU6WPMSc1OLod5mhwqygARhCtKLElNgHLb01LyU1CIojz03M6UktSgXpjItMy8xB6ayKLUkMRumjymjHM1ezqL8cj2Y3bwgJSCv/v///ze6A5NzEothDoQJcqUkliTqpRWBnMnA8A+EAR6MwW2DAgAA" download="students.RData">Download students.RData</a>
<p>다음 예에서는 이 장에서 만든 students 데이터 프레임을 세 가지 형식으로 작업 디렉토리 밑에 저장하고 있다.
한글 때문에 파일의 인코딩 방식을 지정하여 저장하였다.</p>
<div class="sourceCode" id="cb1316"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 2 김영희     4      F      82    77  FALSE  9
#&gt; 3 이철수     3      M      67    88  FALSE  7
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 5 홍길동     1      M      50    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1318"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">students</span>, <span class="st">"students.txt"</span>, row.names<span class="op">=</span><span class="cn">FALSE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">students</span>, <span class="st">"students.csv"</span>, row.names<span class="op">=</span><span class="cn">FALSE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span><span class="op">(</span><span class="va">students</span>, <span class="st">"students_rn.csv"</span>, row.names<span class="op">=</span><span class="cn">TRUE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span></code></pre></div>
<p>첫 번째 <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code>은 공백문자로 데이터 표레임의 열을 분리하여 일반 텍스트 파일로 저장한 예이다. 다음은 저장된 students.txt 파일의 모습이다. 결과에서 볼 수 있듯이 데이터 프레임의 열 이름이 머리 행으로 저장되고 데이터들이 공백문자로 구분되어 저장되었다. 숫자 데이터는 그대로, 문자 데이터는 따옴표로 둘러싸여서 저장되어 있다.</p>
<pre><code>#&gt; "name" "grade" "gender" "midterm" "final" "retake" "hw"
#&gt; "김철수" 1 " M" 74 91 TRUE 8
#&gt; "김영희" 4 "F" 82 77 FALSE 9
#&gt; "이철수" 3 "M" 67 88 FALSE 7
#&gt; "이영희" 2 "F" 89 78 TRUE 8
#&gt; "홍길동" 1 "M" 50 86 FALSE 10</code></pre>
<p>두 번째 명령문은 <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code> 함수를 사용하여 데이터 프레임을 CSV 파일 형식으로 저장한 예이다. 다음은 저장된 students.csv 파일의 모습이다. 결과에서 볼 수 있듯이 쉼표로 각 데이터가 분리되어 있다.다음 결과에서 볼 수 있듯이 쉼표로 각 데이터가 분리되어 있다. Excel에서 파일을 읽으면 데이터를 Excel의 각 셀로 잘 읽어 들일 수 있다.</p>
<pre><code>#&gt; "name","grade","gender","midterm","final","retake","hw"
#&gt; "김철수",1," M",74,91,TRUE,8
#&gt; "김영희",4,"F",82,77,FALSE,9
#&gt; "이철수",3,"M",67,88,FALSE,7
#&gt; "이영희",2,"F",89,78,TRUE,8
#&gt; "홍길동",1,"M",50,86,FALSE,10</code></pre>
<p>세 번째 명령문은 <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code>을 사용하여 CSV 파일로 데이터를 저장한 것은 두 번째 명령문과 같은데 다만 행 번호를 같이 저장한 예이다. 다음은 저장된 students_rn.csv 파일의 모습니다. 결과에서 첫 번째 열에 행 번호가 저장되어 있음을 볼 수 있다.</p>
<pre><code>#&gt; "","name","grade","gender","midterm","final","retake","hw"
#&gt; "1","김철수",1," M",74,91,TRUE,8
#&gt; "2","김영희",4,"F",82,77,FALSE,9
#&gt; "3","이철수",3,"M",67,88,FALSE,7
#&gt; "4","이영희",2,"F",89,78,TRUE,8
#&gt; "5","홍길동",1,"M",50,86,FALSE,10</code></pre>
<p>다음 예에서 <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code> 또는 <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code> 파일로 저장한 데이터를 다시 데이터 프레임으로 잘 복원할 수 있음을 확인할 수 있다. 이 때로 파일의 형식이 공백으로 분리된 파일인지 CSV 파일인지에 따라 <code><a href="https://rdrr.io/r/utils/read.table.html">read.table()</a></code>과 <code><a href="https://rdrr.io/r/utils/read.table.html">read.csv()</a></code>를 적절히 선택하여야 한다.</p>
<div class="sourceCode" id="cb1322"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.table</a></span><span class="op">(</span><span class="st">"students.txt"</span>, header<span class="op">=</span><span class="cn">TRUE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 2 김영희     4      F      82    77  FALSE  9
#&gt; 3 이철수     3      M      67    88  FALSE  7
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 5 홍길동     1      M      50    86  FALSE 10</code></pre>
<div class="sourceCode" id="cb1324"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"students.csv"</span>, header<span class="op">=</span><span class="cn">TRUE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;     name grade gender midterm final retake hw
#&gt; 1 김철수     1      M      74    91   TRUE  8
#&gt; 2 김영희     4      F      82    77  FALSE  9
#&gt; 3 이철수     3      M      67    88  FALSE  7
#&gt; 4 이영희     2      F      89    78   TRUE  8
#&gt; 5 홍길동     1      M      50    86  FALSE 10</code></pre>
<p>사실 <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code> 함수는 <code><a href="https://rdrr.io/r/utils/write.table.html">write.table()</a></code>에서 sep 인수에 <code>','</code>를 부여한 결과와 같다. 따라서 두 번째와 세 번째 명령문은 다음처럼 하여도 같은 결과를 얻을 수 있다.</p>
<div class="sourceCode" id="cb1326"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">students</span>, <span class="st">"students.csv"</span>, sep<span class="op">=</span><span class="st">","</span>, row.names<span class="op">=</span><span class="cn">FALSE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html">write.table</a></span><span class="op">(</span><span class="va">students</span>, <span class="st">"students_rn.csv"</span>, sep<span class="op">=</span><span class="st">","</span>, row.names<span class="op">=</span><span class="cn">TRUE</span>, fileEncoding<span class="op">=</span><span class="st">"UTF-8"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="데이터-프레임을-excel-파일에-쓰기" class="section level4 unnumbered">
<h4>데이터 프레임을 Excel 파일에 쓰기<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%84-excel-%ED%8C%8C%EC%9D%BC%EC%97%90-%EC%93%B0%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임을 Excel 파일로 저장하려면, CSV 파일로 저장한 후 Excel에서 이를 다시 Excel의 파일 형식인 xlsx 형식의 파일로 저장하거나, <code>writexl</code> 패키지를 사용하여 Excel 파일을 R에서 직접 생성하면 된다.
여기서는 <code>writexl</code> 패키지를 사용하여 Excel 파일로 데이터를 저장하는 방법을 설명한다.</p>
<p><code>writexl</code> 패키지가 설치되어 있지 않다면, 다음 명령이나 RStudio의 Packages 패널의 기능을 사용하여 설치한다.</p>
<div class="sourceCode" id="cb1327"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"writexl"</span><span class="op">)</span></span></code></pre></div>
<p><code>writexl</code> 패키지의 <code><a href="https://docs.ropensci.org/writexl/reference/write_xlsx.html">write_xlsx()</a></code> 함수를 사용하면 데이터 프레임을 Excel 파일로 저장할 수 있다.
다음은 하나의 students 데이터 프레임을 Excel 파일로 저장하는 예이다.</p>
<div class="sourceCode" id="cb1328"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/writexl/">writexl</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/writexl/reference/write_xlsx.html">write_xlsx</a></span><span class="op">(</span><span class="va">students</span>, <span class="st">"students1.xlsx"</span><span class="op">)</span></span></code></pre></div>
<p>작업 디렉토리에 만들어진 <code>students1.xlsx</code> 파일을 Excel로 열어보면 첫 번째 워크시트에 데이터 프레임이 저장되어 있는 것을 확인할 수 있다.
여러 데이터 프레임을 한 번에 저장하려면 다음처럼 리스트 형식으로 데이터를 전달한다.
이 때 리스트의 각 요소에 이름을 부여하면 해당 이름으로 워크시트가 만들어져 데이터 프레임들이 저장된다.</p>
<div class="sourceCode" id="cb1329"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://docs.ropensci.org/writexl/reference/write_xlsx.html">write_xlsx</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>students<span class="op">=</span><span class="va">students</span>, sr<span class="op">=</span><span class="va">sr</span>, project<span class="op">=</span><span class="va">project</span><span class="op">)</span>, <span class="st">"multipleData.xlsx"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="바이너리-형식으로-데이터-객체-저장-및-복원" class="section level3" number="6.7.1">
<h3>
<span class="header-section-number">6.7.1</span> 바이너리 형식으로 데이터 객체 저장 및 복원<a class="anchor" aria-label="anchor" href="#%EB%B0%94%EC%9D%B4%EB%84%88%EB%A6%AC-%ED%98%95%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B0%9D%EC%B2%B4-%EC%A0%80%EC%9E%A5-%EB%B0%8F-%EB%B3%B5%EC%9B%90"><i class="fas fa-link"></i></a>
</h3>
<p>데이터 프레임뿐 아니라 R의 모든 객체들을 <code><a href="https://rdrr.io/r/base/readRDS.html">saveRDS()</a></code>와 <code><a href="https://rdrr.io/r/base/readRDS.html">readRDS()</a></code>, 또는 <code><a href="https://rdrr.io/r/base/save.html">save()</a></code>와 <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> 함수를 이용하여 바이너리 형식으로 저장하고 복원할 수 있다. 이 경우 메모리에 적재되는 형태대로 파일에 저장되었다가 복원되므로 별도의 처리 과정이 불필요해진다. 그러므로 대용량의 데이터를 R 플랫폼 내에서 저장하거나 복원할 때 매우 유용하다.</p>
<p>다음은 <code>x</code>라는 벡터, <code>y</code>라는 행렬, <code>z</code>라는 데이터 프레임을 만든 후, <code><a href="https://rdrr.io/r/base/save.html">save()</a></code> 함수를 이용하여 바이너리 형식으로 <code>xyz.RData</code>라는 파일에 저장하는 예이다.</p>
<div class="sourceCode" id="cb1330"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>; <span class="va">x</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb1332"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html">matrix</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">12</span>, nrow<span class="op">=</span><span class="fl">3</span>, ncol<span class="op">=</span><span class="fl">3</span><span class="op">)</span>; <span class="va">y</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    4    7   10
#&gt; [2,]    5    8   11
#&gt; [3,]    6    9   12</code></pre>
<div class="sourceCode" id="cb1334"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span>; <span class="va">z</span></span></code></pre></div>
<pre><code>#&gt;   x X1 X2 X3
#&gt; 1 1  4  7 10
#&gt; 2 2  5  8 11
#&gt; 3 3  6  9 12</code></pre>
<div class="sourceCode" id="cb1336"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/save.html">save</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span>, file <span class="op">=</span> <span class="st">"xyz.RData"</span><span class="op">)</span></span></code></pre></div>
<p>작업 디렉토리에 가보면 <code>xyz.RData</code>라는 파일이 생성된 것을 확인할 수 있다.
<code><a href="https://rdrr.io/r/base/save.html">save()</a></code>와 <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> 함수를 이용하여 저장하는 데이터 파일은 일밙거으로 <code>.RData</code>라는 확장자를 이용한다.
그러면 대부분의 컴퓨터 설정에서 <code>.RData</code> 데이터 파일이 <strong>R</strong>이나 <strong>RStudio</strong>로 자동으로 연결되어 더블 클릭만으로 파일에 저장된 객체를 <strong>R</strong> 세션에 적재할 수 있다.</p>
<p>파일에 데이터가 잘 저장되었고 이를 다시 <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> 함수로 <strong>R</strong> 세션에 잘 복원할 수 있는지를 확인하기 위하여, 현재 <strong>R</strong> 세션에 있는, <code>x</code>, <code>y</code>, <code>z</code> 객체를 환경에서 제거해 보자. 다음 명령을 사용하거나 <strong>RStudio</strong>의 Environment 패널에 이 객체를 제거할 수 있다.</p>
<div class="sourceCode" id="cb1337"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">z</span><span class="op">)</span></span>
<span><span class="va">x</span>; <span class="va">y</span>; <span class="va">z</span></span></code></pre></div>
<pre><code>#&gt; Error in eval(expr, envir, enclos): 객체 'x'를 찾을 수 없습니다</code></pre>
<pre><code>#&gt; Error in eval(expr, envir, enclos): 객체 'y'를 찾을 수 없습니다</code></pre>
<pre><code>#&gt; Error in eval(expr, envir, enclos): 객체 'z'를 찾을 수 없습니다</code></pre>
<p>세 객체가 모두 제거되었기 때문에 객체를 출력하려고 하면 오류가 발생한다.</p>
<p>다음으로 작업 디렉토리의 <code>xyz.RData</code>를 이용하여 <strong>R</strong> 세션에 복원해 보자.
이를 위해 다음처럼 데이터 파일이 있는 폴더를 작업 디렉토리로 설정하고 <code><a href="https://rdrr.io/r/base/load.html">load()</a></code> 함수를 사용할 수도 있고, 파일 탐색기에서 해당 파일의 컨텍스트 메뉴에서 연결 프로그램을 <strong>RStudio</strong>로 하여 파일을 열어도 된다.</p>
<div class="sourceCode" id="cb1341"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/load.html">load</a></span><span class="op">(</span><span class="st">"xyz.RData"</span><span class="op">)</span></span>
<span><span class="va">x</span>; <span class="va">y</span>; <span class="va">z</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    4    7   10
#&gt; [2,]    5    8   11
#&gt; [3,]    6    9   12</code></pre>
<pre><code>#&gt;   x X1 X2 X3
#&gt; 1 1  4  7 10
#&gt; 2 2  5  8 11
#&gt; 3 3  6  9 12</code></pre>
<p>이번에는 세 객체가 모두 잘 출력되는 것을 확인할 수 있다.
<strong>RStudio</strong>의 Environment 패널에서도 이 객체가 다시 생성되었음을 확인할 수 있다.</p>
</div>
</div>
<div id="데이터-프레임의-열을-변수처럼-이용하는-방법" class="section level2" number="6.8">
<h2>
<span class="header-section-number">6.8</span> 데이터 프레임의 열을 변수처럼 이용하는 방법 *<a class="anchor" aria-label="anchor" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%98-%EC%97%B4%EC%9D%84-%EB%B3%80%EC%88%98%EC%B2%98%EB%9F%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95"><i class="fas fa-link"></i></a>
</h2>
<div id="변수-검색-경로" class="section level4 unnumbered">
<h4>변수 검색 경로<a class="anchor" aria-label="anchor" href="#%EB%B3%80%EC%88%98-%EA%B2%80%EC%83%89-%EA%B2%BD%EB%A1%9C"><i class="fas fa-link"></i></a>
</h4>
<p><code>$</code> 기호를 이용하는 방법보다 좀 더 간편하게 데이터 프레임의 열에 접근할 수 있는 방법이 있다. attach() 함수를 이용하면 데이터 프레임의 각 열을 변수로 등록할 수 있다. attach() 함수가 실행되면 해당 데이터 프레임의 각 열을 변수로 검색 경로(search path)에 등록한다. 검색 경로란 R이 어떤 변수를 참조할 때 변수에 대한 정보를 검색하는 경로를 의미한다. 현재의 검색 경로를 파악하기 위해서는 search() 함수를 이용하면 된다.</p>
<div class="sourceCode" id="cb1345"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;  [1] ".GlobalEnv"        "package:writexl"   "package:readxl"   
#&gt;  [4] "package:stats"     "package:graphics"  "package:grDevices"
#&gt;  [7] "package:utils"     "package:datasets"  "package:methods"  
#&gt; [10] "Autoloads"         "package:base"</code></pre>
<p>위의 결과에서 알 수 있듯이 R이 기동되면 현재의 작업공간을 .GlobalEnv라는 이름으로 첫 번째 검색 경로로 등록한다. 현재의 작업 공간에서 만든 변수들은 여기서 찾을 수 있다. 그리고 package:를 접두사로 하여 패키지별 변수의 데이터베이스가 검색 경로에 등록된다. R은 검색 경로에 나와 있는 순서대로 변수들의 정보를 찾는다.</p>
</div>
<div id="attach로-데이터-프레임을-검색-경로에-등록하기" class="section level4 unnumbered">
<h4>attach()로 데이터 프레임을 검색 경로에 등록하기<a class="anchor" aria-label="anchor" href="#attach%EB%A1%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%84-%EA%B2%80%EC%83%89-%EA%B2%BD%EB%A1%9C%EC%97%90-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>본격적으로 attach() 함수의 작동을 보기 전에 students 데이터 프레임을 제외하고 다른 데이터 객체를 .GlobalEnv에서 삭제하도록 하겠다. .GlobalEnv 작업공간에 있는 변수를 보기 위해서는 ls() 또는 objects() 함수를 사용한다. rm() 함수를 이용하면 작업공간의 변수를 삭제할 수 있다. 이들 함수의 자세한 사용방법은 도움말을 참조한다.</p>
<div class="sourceCode" id="cb1347"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span>list<span class="op">=</span><span class="va">obj</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">obj</span> <span class="op">!=</span> <span class="st">"students"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">ls</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "obj"      "students"</code></pre>
<div class="sourceCode" id="cb1349"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rm.html">rm</a></span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/ls.html">objects</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt; [1] "students"</code></pre>
<p>아래는 attach() 함수를 이용하여 students 데이터 프레임을 검색 경로에 등록한 예이다. 아래 예에서 보듯이 students를 검색 경로에 등록하기 전에는 retake 변수가 검색 경로에 없으므로 찾을 수 없다고 나온다. 그러나 students 데이터 프레임을 검색 경로에 등록하면 데이터 프레임의 열인 retake를 변수처럼 이용할 수 있음을 알 수 있다.</p>
<div class="sourceCode" id="cb1351"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">retake</span></span></code></pre></div>
<pre><code>#&gt; Error in eval(expr, envir, enclos): 객체 'retake'를 찾을 수 없습니다</code></pre>
<div class="sourceCode" id="cb1353"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/attach.html">attach</a></span><span class="op">(</span><span class="va">students</span><span class="op">)</span></span>
<span><span class="va">retake</span></span></code></pre></div>
<pre><code>#&gt; [1]  TRUE FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb1355"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;  [1] ".GlobalEnv"        "students"          "package:writexl"  
#&gt;  [4] "package:readxl"    "package:stats"     "package:graphics" 
#&gt;  [7] "package:grDevices" "package:utils"     "package:datasets" 
#&gt; [10] "package:methods"   "Autoloads"         "package:base"</code></pre>
</div>
<div id="attach로-등록된-변수는-데이터-프레임과-독립적인-복사본이다." class="section level4 unnumbered">
<h4>attach()로 등록된 변수는 데이터 프레임과 독립적인 복사본이다.<a class="anchor" aria-label="anchor" href="#attach%EB%A1%9C-%EB%93%B1%EB%A1%9D%EB%90%9C-%EB%B3%80%EC%88%98%EB%8A%94-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EA%B3%BC-%EB%8F%85%EB%A6%BD%EC%A0%81%EC%9D%B8-%EB%B3%B5%EC%82%AC%EB%B3%B8%EC%9D%B4%EB%8B%A4."><i class="fas fa-link"></i></a>
</h4>
<p>여기서 주의할 점은 attach 된 변수가 변경되더라도 원래 데이터 프레임의 데이터가 변경되지는 않는다는 것이다. attach를 통해 등록된 변수는 데이터 프레임의 데이터가 복사되어 생성되지만 데이터 프레임과는 무관한 별도의 변수처럼 작동한다.</p>
<div class="sourceCode" id="cb1357"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">retake</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">retake</span></span></code></pre></div>
<pre><code>#&gt; [1]    NA FALSE FALSE  TRUE FALSE</code></pre>
<div class="sourceCode" id="cb1359"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">$</span><span class="va">retake</span></span></code></pre></div>
<pre><code>#&gt; [1]  TRUE FALSE FALSE  TRUE FALSE</code></pre>
<p>데이터 프레임의 데이터를 변경하려면 <code>$</code> 기호를 써서 직접 변경하여야 한다. 마찬가지로 원래 데이터 프레임의 데이터가 변경되어도 검색 경로에 추가된 retake 변수의 데이터는 변경되지 않음을 알 수 있다.</p>
<div class="sourceCode" id="cb1361"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">students</span><span class="op">$</span><span class="va">retake</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span><span class="va">students</span><span class="op">$</span><span class="va">retake</span></span></code></pre></div>
<pre><code>#&gt; [1]  TRUE FALSE FALSE  TRUE    NA</code></pre>
<div class="sourceCode" id="cb1363"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">retake</span></span></code></pre></div>
<pre><code>#&gt; [1]    NA FALSE FALSE  TRUE FALSE</code></pre>
</div>
<div id="detach" class="section level4 unnumbered">
<h4>detach()<a class="anchor" aria-label="anchor" href="#detach"><i class="fas fa-link"></i></a>
</h4>
<p>데이터 프레임을 검색 경로에서 제거하려면 detach() 함수를 이용한다.</p>
<div class="sourceCode" id="cb1365"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/detach.html">detach</a></span><span class="op">(</span><span class="va">students</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/search.html">search</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code>#&gt;  [1] ".GlobalEnv"        "package:writexl"   "package:readxl"   
#&gt;  [4] "package:stats"     "package:graphics"  "package:grDevices"
#&gt;  [7] "package:utils"     "package:datasets"  "package:methods"  
#&gt; [10] "Autoloads"         "package:base"</code></pre>
</div>
<div id="attach로-등록된-변수의-검색-경로-상의-위치" class="section level4 unnumbered">
<h4>attach()로 등록된 변수의 검색 경로 상의 위치<a class="anchor" aria-label="anchor" href="#attach%EB%A1%9C-%EB%93%B1%EB%A1%9D%EB%90%9C-%EB%B3%80%EC%88%98%EC%9D%98-%EA%B2%80%EC%83%89-%EA%B2%BD%EB%A1%9C-%EC%83%81%EC%9D%98-%EC%9C%84%EC%B9%98"><i class="fas fa-link"></i></a>
</h4>
<p>R에서 검색 경로의 첫 번째 위치는 항상 현재의 작업공간이 차지한다. attach()에 의해 추가되는 변수들은 항상 검색 경로 상에서 두번째나 그 뒤의 위치에 놓인다. 디폴트로 attach()에 의해 추가되는 변수는 검색 경로 상에서 두번째 위치에 놓이게 되므로 현재의 작업공간을 제외하고는 검색 우선순위가 가장 높게 설정된다. 이를 바꾸고 싶으면 attach() 함수의 position 인수를 이용하면 된다. (자세한 내용은 attach()의 도움말을 참조한다.)</p>
<p>일반적으로 데이터 프레임을 이용할 때 다음이 좋은 절차라 알려져 있다.</p>
<p>첫째, 어떤 문제와 관련된 모든 변수를 데이터 프레임에 포함시키고 적절한 이름을 부여한다.</p>
<p>둘째, 분석하는 문제와 관련된 데이터 프레임을 attach()하여 검색 경로 위치 두 번째에 추가한다. 검색경로의 첫 번째 위치에 작업공간이 있어서 분석 운영을 위한 수치와 임시적인 변수들이 놓인다.</p>
<p>셋째, 분석하는 문제를 떠나기 전에 다음에 사용하고자 하는 변수는 <code>$</code>를 이용하여 데이터 프레임에 저장한다. 그리고 detach() 한다.</p>
<p>넷째, 작업공간의 모든 필요 없는 변수를 삭제한다.</p>
<p>그러나 저자의 경우 attach()와 detach()를 잘 이용하지 않는다. 왜냐하면 이러한 방식은 프로그램이 복잡하거나 동시에 다루어야 할 데이터 프레임이 여러 개인 경우 변수 이름의 충돌이 일어나기 쉽다. 그래서 자신이 원하는 곳의 변수가 아니라 다른 위치의 동일한 이름의 변수를 참조하거나 변경하는 오류가 발생하기 쉽다. 또한 RStudio 같은 IDE를 사용하면 편집기 상에서 데이터 프레임의 이름 등을 자동 완성시킬 수 있으므로 긴 이름을 입력하는 것이 그리 수고스럽지 않기 때문이다. 이 두 가지 방법 중 어떠한 스타일을 택할 것인지는 개인의 선호에 달려 있다. 이 책에서는 특별한 경우가 아니면 attach() 등을 사용하지 않을 것이다.</p>

</div>
</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="ch-R-List.html"><span class="header-section-number">5</span> R 리스트</a></div>
<div class="next"><a href="ch-dataTransformation.html"><span class="header-section-number">7</span> dplyr을 이용한 데이터 변환</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#ch-R-Data-Frame"><span class="header-section-number">6</span> R 데이터 프레임</a></li>
<li>
<a class="nav-link" href="#%EB%B2%94%EC%A3%BC%ED%98%95-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%99%80-%EC%9A%94%EC%9D%B8-factors"><span class="header-section-number">6.1</span> 범주형 데이터와 요인 (Factors)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%EB%AA%85%EB%AA%A9%ED%98%95-%EB%B3%80%EC%88%98%EC%99%80-%EC%9A%94%EC%9D%B8"><span class="header-section-number">6.1.1</span> 명목형 변수와 요인</a></li>
<li><a class="nav-link" href="#%EC%88%9C%EC%84%9C%ED%98%95-%EB%B3%80%EC%88%98%EC%99%80-%EC%9A%94%EC%9D%B8"><span class="header-section-number">6.1.2</span> 순서형 변수와 요인</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84-%EB%A7%8C%EB%93%A4%EA%B8%B0"><span class="header-section-number">6.2</span> 데이터 프레임 만들기</a></li>
<li><a class="nav-link" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84-%EA%B0%81-%EC%97%B4%EC%9D%98-%EC%A7%80%EC%A0%95"><span class="header-section-number">6.3</span> 데이터 프레임 각 열의 지정</a></li>
<li>
<a class="nav-link" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%98-%ED%95%84%ED%84%B0%EB%A7%81"><span class="header-section-number">6.4</span> 데이터 프레임의 필터링</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%EB%A6%AC%EC%8A%A4%ED%8A%B8-%ED%98%95%EC%8B%9D%EC%9C%BC%EB%A1%9C-%ED%95%84%ED%84%B0%EB%A7%81"><span class="header-section-number">6.4.1</span> 리스트 형식으로 필터링</a></li>
<li><a class="nav-link" href="#%ED%96%89%EB%A0%AC-%ED%98%95%EC%8B%9D%EC%9C%BC%EB%A1%9C-%ED%95%84%ED%84%B0%EB%A7%81"><span class="header-section-number">6.4.2</span> 행렬 형식으로 필터링</a></li>
<li><a class="nav-link" href="#subset%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%ED%95%84%ED%84%B0%EB%A7%81"><span class="header-section-number">6.4.3</span> subset()을 이용한 필터링</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%97%90-%ED%95%A8%EC%88%98-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0"><span class="header-section-number">6.5</span> 데이터 프레임에 함수 적용하기</a></li>
<li>
<a class="nav-link" href="#dataFileImport"><span class="header-section-number">6.6</span> 파일에서 데이터 읽어오기</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%ED%85%8D%EC%8A%A4%ED%8A%B8-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%BD%EC%96%B4%EC%98%A4%EA%B8%B0"><span class="header-section-number">6.6.1</span> 텍스트 파일에서 데이터 읽어오기</a></li>
<li><a class="nav-link" href="#csv-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%BD%EC%96%B4%EC%98%A4%EA%B8%B0"><span class="header-section-number">6.6.2</span> CSV 파일에서 데이터 읽어오기</a></li>
<li><a class="nav-link" href="#excel-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%BD%EA%B8%B0"><span class="header-section-number">6.6.3</span> Excel 파일에서 데이터 읽기</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%84-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EC%93%B0%EA%B8%B0"><span class="header-section-number">6.7</span> 데이터 프레임을 파일로 쓰기</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#%EB%B0%94%EC%9D%B4%EB%84%88%EB%A6%AC-%ED%98%95%EC%8B%9D%EC%9C%BC%EB%A1%9C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B0%9D%EC%B2%B4-%EC%A0%80%EC%9E%A5-%EB%B0%8F-%EB%B3%B5%EC%9B%90"><span class="header-section-number">6.7.1</span> 바이너리 형식으로 데이터 객체 저장 및 복원</a></li></ul>
</li>
<li><a class="nav-link" href="#%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%94%84%EB%A0%88%EC%9E%84%EC%9D%98-%EC%97%B4%EC%9D%84-%EB%B3%80%EC%88%98%EC%B2%98%EB%9F%BC-%EC%9D%B4%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95"><span class="header-section-number">6.8</span> 데이터 프레임의 열을 변수처럼 이용하는 방법 *</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R 프로그래밍 (개정판)</strong>" was written by Kilhwan Kim. It was last built on 2023-09-06.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
